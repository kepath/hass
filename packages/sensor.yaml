---
sensor:

  - platform: "statistics"
    entity_id: "sensor.nvidia_shield_bed_c_unifi_tx"
    unique_id: "nvidia_shield_bed_c_unifi_tx_data_speed"
    name: "Nvidia Shield Lounge Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.nvidia_shield_bed_e_unifi_tx"
    unique_id: "nvidia_shield_bed_e_unifi_tx_data_speed"
    name: "Nvidia Shield Bed E Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.amazon_firestick_4k_rj45_bed_a_unifi_tx"
    unique_id: "amazon_firestick_4k_rj45_bed_a_unifi_tx_data_speed"
    name: "Amazon FireStick Bed A Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.amazon_firestick_4k_rj45_kitchen_unifi_tx"
    unique_id: "amazon_firestick_4k_rj45_kitchen_unifi_tx_data_speed"
    name: "Amazon FireStick Kitchen Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.apple_imac_2011_unifi_tx"
    unique_id: "apple_imac_2011_unifi_tx_data_speed"
    name: "Apple iMac 2011 Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.apple_macbook_pro_2018_kev_unifi_tx"
    unique_id: "apple_macbook_pro_2018_kev_unifi_tx_data_speed"
    name: "Apple MacBook Pro 2018 WiFi Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.apple_tv_4k_unifi_tx"
    unique_id: "apple_tv_4k_unifi_tx_data_speed"
    name: "Apple TV Lounge Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.arcade_machine_unifi_tx"
    unique_id: "arcade_machine_unifi_tx_data_speed"
    name: "Arcade Machine Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.big_pc_unifi_tx"
    unique_id: "big_pc_unifi_tx_data_speed"
    name: "BigPC Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.caldigit_thunderbolt_dock_unifi_tx"
    unique_id: "caldigit_thunderbolt_dock_unifi_tx_data_speed"
    name: "Caldigit Thunderbolt Dock Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.dans_nintendo_switch_unifi_tx"
    unique_id: "dans_nintendo_switch_unifi_tx_data_speed"
    name: "Dans Nintendo Switch Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.dell_work_laptop_kev_unifi_wifi_tx"
    unique_id: "dell_work_laptop_kev_unifi_wifi_tx_data_speed"
    name: "Kev Dell Work Laptop WiFi Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.download_pc_unifi_tx"
    unique_id: "download_pc_unifi_tx_data_speed"
    name: "Download PC Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.ipad_air_4thgen_unifi_tx"
    unique_id: "ipad_air_4thgen_unifi_tx_data_speed"
    name: "Emily iPad Air 4th Gen Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.kev_iphone_11_unifi_tx"
    unique_id: "kev_iphone_11_unifi_tx_data_speed"
    name: "Kev Iphone 11 Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.home_assistant_unifi_tx"
    unique_id: "home_assistant_unifi_tx_data_speed"
    name: "Home Assistant Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.iphone_12_dan_unifi_tx"
    unique_id: "iphone_12_dan_unifi_tx_data_speed"
    name: "Dan iPhone 12 Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.iphone_13_emily_unifi_tx"
    unique_id: "iphone_13_emily_unifi_tx_data_speed"
    name: "Emily iPhone 13 Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.ju_iphone_8_unifi_tx"
    unique_id: "ju_iphone_8_unifi_tx_data_speed"
    name: "Ju iPhone 8 Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.samsung_ue32f4500_tv_bed_a_unifi_tx"
    unique_id: "samsung_ue32f4500_tv_bed_a_unifi_tx_data_speed"
    name: "Samsung UE32F4500 TV Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.samsung_ue48hu7500t_tv_unifi_tx"
    unique_id: "samsung_ue48hu7500t_tv_unifi_tx_data_speed"
    name: "Samsung UE48HU7500T TV Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.sony_playstation_3_unifi_tx"
    unique_id: "sony_playstation_3_unifi_tx_data_speed"
    name: "Sony PlayStation 3 Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.synology_diskstation_ds412_unifi_tx"
    unique_id: "synology_diskstation_ds412_unifi_tx_data_speed"
    name: "Synology Diskstation DS412 Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  - platform: "statistics"
    entity_id: "sensor.xbox_series_x_unifi_tx"
    unique_id: "xbox_series_x_unifi_tx_data_speed"
    name: "XBox Series X Unifi TX Data Speed"
    state_characteristic: "mean"
    sampling_size: 5

  # kitchen
  - platform: "integration"
    source: "sensor.zigbee_energy_monitor_outlet_switch_washing_machine_instantaneous_demand"
    name: "washing_machine_plug_total_increasing_energy"
    unique_id: "sensor.washing_machine_plug_total_increasing_energy"
    round: 2
  - platform: "integration"
    source: "sensor.zigbee_energy_monitor_outlet_switch_dishwasher_instantaneous_demand"
    name: "dishwasher_plug_total_increasing_energy"
    unique_id: "sensor.dishwasher_plug_total_increasing_energy"
    round: 2
  # Unifi
  - platform: "integration"
    source: "sensor.usw_pro_24_poe_bed_a_laptop_poe_power"
    name: "usw_pro_24_poe_bed_a_laptop_poe_energy"
    unique_id: "sensor.usw_pro_24_poe_bed_a_laptop_poe_energy"
    unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.usw_pro_24_poe_bed_a_tv_poe_power"
    name: "usw_pro_24_poe_bed_a_tv_poe_energy"
    unique_id: "sensor.usw_pro_24_poe_bed_a_tv_poe_energy"
    unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.usw_pro_24_poe_bed_b_poe_power"
    name: "usw_pro_24_poe_bed_b_poe_energy"
    unique_id: "sensor.usw_pro_24_poe_bed_b_poe_energy"
    round: 2
  - platform: "integration"
    source: "sensor.usw_pro_24_poe_kitchen_poe_power"
    name: "usw_pro_24_poe_kitchen_poe_energy"
    unique_id: "sensor.usw_pro_24_poe_kitchen_poe_energy"
    round: 2
  - platform: "integration"
    source: "sensor.usw_pro_24_poe_loft_poe_power"
    name: "usw_pro_24_poe_loft_poe_energy"
    unique_id: "sensor.usw_pro_24_poe_loft_poe_energy"
    round: 2
  - platform: "integration"
    source: "sensor.usw_pro_24_poe_lounge_right_poe_power"
    name: "usw_pro_24_poe_lounge_right_poe_energy"
    unique_id: "sensor.usw_pro_24_poe_lounge_right_poe_energy"
    round: 2
  - platform: "integration"
    source: "sensor.usw_pro_24_poe_study_poe_power"
    name: "usw_pro_24_poe_study_poe_energy"
    unique_id: "sensor.usw_pro_24_poe_study_poe_energy"
    round: 2

  - platform: "integration"
    source: "sensor.usw_flex_loft_ap_top_poe_power"
    name: "usw_flex_loft_ap_top_poe_energy"
    unique_id: "sensor.usw_flex_loft_ap_top_poe_energy"
    round: 2
  - platform: "integration"
    source: "sensor.usw_flex_loft_cam_back_poe_power"
    name: "usw_flex_loft_cam_back_poe_energy"
    unique_id: "sensor.usw_flex_loft_cam_back_poe_energy"
    round: 2
  - platform: "integration"
    source: "sensor.usw_flex_loft_cam_front_poe_power"
    name: "usw_flex_loft_cam_front_poe_energy"
    unique_id: "sensor.usw_flex_loft_cam_front_poe_energy"
    round: 2
  - platform: "integration"
    source: "sensor.usw_flex_loft_dlpc_isolated_poe_power"
    name: "usw_flex_loft_dlpc_isolated_poe_energy"
    unique_id: "sensor.usw_flex_loft_dlpc_isolated_poe_energy"
    round: 2

  - platform: "integration"
    source: "sensor.usw_lite_8port_bed_e_g3_flex_hall_poe_power"
    name: "usw_lite_8port_bed_e_g3_flex_hall_poe_energy"
    unique_id: "sensor.usw_lite_8port_bed_e_g3_flex_hall_poe_energy"
    # unit_prefix: "k"
    round: 2

  # TP 110 plugs
  - platform: "integration"
    source: "sensor.fridge_plug_kitchen_current_power"
    name: "Fridge Plug Energy:Kitchen"
    unique_id: "sensor.kitchen_fridge_total_increasing_energy"
    # unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.kettle_plug_kitchen_current_power"
    name: "Kettle Plug Energy:Kitchen"
    unique_id: "sensor.kitchen_kettle_total_increasing_energy"
    # unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.microwave_plug_kitchen_current_power"
    name: "Microwave Plug Energy:Kitchen"
    unique_id: "sensor.kitchen_microwave_total_increasing_energy"
    # unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.chest_freezer_plug_garage_current_power"
    name: "Chest Freezer Plug Energy:Garage"
    unique_id: "sensor.garage_chest_freezer_total_increasing_energy"
    # unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.fridge_freezer_plug_garage_current_power"
    name: "Fridge/Freezer Plug Energy:Garage"
    unique_id: "sensor.garage_fridgefreezer_total_increasing_energy"
    # unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.drinks_fridge_plug_bed_c_current_power"
    name: "Drinks Fridge Plug Energy:Bed C"
    unique_id: "sensor.bed_c_drinks_fridge_total_increasing_energy"
    # unit_prefix: "k"
    round: 2
  - platform: "integration"
    source: "sensor.udm_pro_plug_bed_c_current_power"
    name: "UDM Pro Plug Energy:Bed C"
    unique_id: "sensor.bed_c_udm_pro_total_increasing_energy"
    # unit_prefix: "k"
    round: 2
  # - platform: "integration"
  #   source: "sensor.table_lamp_plug_lounge_current_power"
  #   name: "Table Lamp Plug Energy:Lounge"
  #   unique_id: "sensor.lounge_table_lamp_total_increasing_energy"
  #   # unit_prefix: "k"
  #   round: 2
  - platform: "influxdb"
    database: "unifi"
    username: !secret "influx_db_user"
    password: !secret "influx_db_pass"
    queries:
      - unique_id: "influxdb_unifi_rx_yaml_imported"
        name: "InfluxDB Unifi RX"
        unit_of_measurement: "B/s"
        field: "rx_bytes"
        where: "time > now() - 1d"
        group_function: "last"
        database: "unifi"
        measurement: >
          "unifi"."autogen"."clients"

  # - platform: "derivative"
  #   # unique_id: "sensor.caldigit_thunderbolt_dock_unifi_tx_yaml_derivative"
  #   source: "sensor.caldigit_thunderbolt_dock_unifi_tx"
  #   name: "Caldigit Thunderbolt Dock:Unifi TX:Derivative"
  #   # device_class: "data_rate"
  #   # icon: "mdi:download-network"
  #   round: 2
  #   unit_time: "s"
  #   time_window: "00:01:00"
