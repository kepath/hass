const t=(t,...e)=>{console.info(`%c  LINKED-LOVELACE-UI \n%c  ${t}   `,"color: orange; font-weight: bold; background: black","font-weight: bold;",...e)};class e{constructor(t){this.cache=void 0,this.cache=t}define(t,e){this.cache[t]=e}get(t){return this.cache[t]}remove(t){delete this.cache[t]}reset(){this.cache={}}load(t){this.cache={...this.cache,...t}}}class r extends Error{constructor(t){super(t),this.name="Eta Error"}}function n(t,e,n){const i=e.slice(0,n).split(/\n/),o=i.length,s=i[o-1].length+1;throw t+=" at line "+o+" col "+s+":\n\n  "+e.split(/\n/)[o-1]+"\n  "+Array(s).join(" ")+"^",new r(t)}function i(t,e,n,i){const o=e.split("\n"),s=Math.max(n-3,0),a=Math.min(o.length,n+3),l=i,c=o.slice(s,a).map((function(t,e){const r=e+s+1;return(r==n?" >> ":"    ")+r+"| "+t})).join("\n"),h=new r((l?l+":"+n+"\n":"line "+n+"\n")+c+"\n\n"+t.message);throw h.name=t.name,h}const o=async function(){}.constructor;function s(t,e){const n=this.config,i=e&&e.async?o:Function;try{return new i(n.varName,"options",this.compileToString.call(this,t,e))}catch(n){throw n instanceof SyntaxError?new r("Bad template syntax\n\n"+n.message+"\n"+Array(n.message.length+1).join("=")+"\n"+this.compileToString.call(this,t,e)+"\n"):n}}function a(t,e){const r=this.config,n=e&&e.async,i=this.parse.call(this,t);let o=`${r.functionHeader}\nlet include = (template, data) => this.render(template, data, options);\nlet includeAsync = (template, data) => this.renderAsync(template, data, options);\n\nlet __eta = {res: "", e: this.config.escapeFunction, f: this.config.filterFunction${r.debug?', line: 1, templateStr: "'+t.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n")+'"':""}};\n\nfunction layout(path, data) {\n  __eta.layout = path;\n  __eta.layoutData = data;\n}${r.debug?"try {":""}${r.useWith?"with("+r.varName+"||{}){":""}\n\n${l.call(this,i)}\nif (__eta.layout) {\n  __eta.res = ${n?"await includeAsync":"include"} (__eta.layout, {...${r.varName}, body: __eta.res, ...__eta.layoutData});\n}\n${r.useWith?"}":""}${r.debug?"} catch (e) { this.RuntimeErr(e, __eta.templateStr, __eta.line, options.filepath) }":""}\nreturn __eta.res;\n`;if(r.plugins)for(let t=0;t<r.plugins.length;t++){const e=r.plugins[t];e.processFnString&&(o=e.processFnString(o,r))}return o}function l(t){const e=this.config;let r=0;const n=t.length;let i="";for(;r<n;r++){const n=t[r];if("string"==typeof n){i+="__eta.res+='"+n+"'\n"}else{const t=n.t;let r=n.val||"";e.debug&&(i+="__eta.line="+n.lineNo+"\n"),"r"===t?(e.autoFilter&&(r="__eta.f("+r+")"),i+="__eta.res+="+r+"\n"):"i"===t?(e.autoFilter&&(r="__eta.f("+r+")"),e.autoEscape&&(r="__eta.e("+r+")"),i+="__eta.res+="+r+"\n"):"e"===t&&(i+=r+"\n")}}return i}const c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(t){return c[t]}const u={autoEscape:!0,autoFilter:!1,autoTrim:[!1,"nl"],cache:!1,cacheFilepaths:!0,debug:!1,escapeFunction:function(t){const e=String(t);return/[&<>"']/.test(e)?e.replace(/[&<>"']/g,h):e},filterFunction:t=>String(t),functionHeader:"",parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],useWith:!1,varName:"it"},d=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,f=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,p=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function g(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function m(t,e){return t.slice(0,e).split("\n").length}function y(t){const e=this.config;let r=[],i=!1,o=0;const s=e.parse;if(e.plugins)for(let r=0;r<e.plugins.length;r++){const n=e.plugins[r];n.processTemplate&&(t=n.processTemplate(t,e))}function a(t,n){t&&(t=function(t,e,r,n){let i,o;return Array.isArray(e.autoTrim)?(i=e.autoTrim[1],o=e.autoTrim[0]):i=o=e.autoTrim,(r||!1===r)&&(i=r),(n||!1===n)&&(o=n),o||i?"slurp"===i&&"slurp"===o?t.trim():("_"===i||"slurp"===i?t=t.trimStart():"-"!==i&&"nl"!==i||(t=t.replace(/^(?:\r\n|\n|\r)/,"")),"_"===o||"slurp"===o?t=t.trimEnd():"-"!==o&&"nl"!==o||(t=t.replace(/(?:\r\n|\n|\r)$/,"")),t):t}(t,e,i,n),t&&(t=t.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),r.push(t)))}e.rmWhitespace&&(t=t.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),d.lastIndex=0,f.lastIndex=0,p.lastIndex=0;const l=[s.exec,s.interpolate,s.raw].reduce((function(t,e){return t&&e?t+"|"+g(e):e?g(e):t}),""),c=new RegExp(g(e.tags[0])+"(-|_)?\\s*("+l+")?\\s*","g"),h=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+g(e.tags[1])+")","g");let u;for(;u=c.exec(t);){const l=t.slice(o,u.index);o=u[0].length+u.index;const g=u[1],y=u[2]||"";let v;a(l,g),h.lastIndex=o;let b=!1;for(;v=h.exec(t);){if(v[1]){const e=t.slice(o,v.index);c.lastIndex=o=h.lastIndex,i=v[2];b={t:y===s.exec?"e":y===s.raw?"r":y===s.interpolate?"i":"",val:e};break}{const e=v[0];if("/*"===e){const e=t.indexOf("*/",h.lastIndex);-1===e&&n("unclosed comment",t,v.index),h.lastIndex=e}else if("'"===e){f.lastIndex=v.index;f.exec(t)?h.lastIndex=f.lastIndex:n("unclosed string",t,v.index)}else if('"'===e){p.lastIndex=v.index;p.exec(t)?h.lastIndex=p.lastIndex:n("unclosed string",t,v.index)}else if("`"===e){d.lastIndex=v.index;d.exec(t)?h.lastIndex=d.lastIndex:n("unclosed string",t,v.index)}}}b?(e.debug&&(b.lineNo=m(t,u.index)),r.push(b)):n("unclosed tag",t,u.index)}if(a(t.slice(o,t.length),!1),e.plugins)for(let t=0;t<e.plugins.length;t++){const n=e.plugins[t];n.processAST&&(r=n.processAST(r,e))}return r}function v(t,e){const n=e&&e.async?this.templatesAsync:this.templatesSync;if(this.resolvePath&&this.readFile&&!t.startsWith("@")){const t=e.filepath,r=n.get(t);if(this.config.cache&&r)return r;{const r=this.readFile(t),i=this.compile(r,e);return this.config.cache&&n.define(t,i),i}}{const e=n.get(t);if(e)return e;throw new r("Failed to get template '"+t+"'")}}function b(t,e,r){let n;const i={...r,async:!1};"string"==typeof t?(this.resolvePath&&this.readFile&&!t.startsWith("@")&&(i.filepath=this.resolvePath(t,i)),n=v.call(this,t,i)):n=t;return n.call(this,e,i)}function _(t,e,r){let n;const i={...r,async:!0};"string"==typeof t?(this.resolvePath&&this.readFile&&!t.startsWith("@")&&(i.filepath=this.resolvePath(t,i)),n=v.call(this,t,i)):n=t;const o=n.call(this,e,i);return Promise.resolve(o)}function w(t,e){const r=this.compile(t,{async:!1});return b.call(this,r,e)}function E(t,e){const r=this.compile(t,{async:!0});return _.call(this,r,e)}class A extends class{constructor(t){this.config=void 0,this.RuntimeErr=i,this.compile=s,this.compileToString=a,this.parse=y,this.render=b,this.renderAsync=_,this.renderString=w,this.renderStringAsync=E,this.filepathCache={},this.templatesSync=new e({}),this.templatesAsync=new e({}),this.resolvePath=null,this.readFile=null,this.config=t?{...u,...t}:{...u}}configure(t){this.config={...this.config,...t}}withConfig(t){return{...this,config:{...this.config,...t}}}loadTemplate(t,e,r){if("string"==typeof e){(r&&r.async?this.templatesAsync:this.templatesSync).define(t,this.compile(e,r))}else{let n=this.templatesSync;("AsyncFunction"===e.constructor.name||r&&r.async)&&(n=this.templatesAsync),n.define(t,e)}}}{}const $=new A({varName:"context",autoEscape:!1,rmWhitespace:!0});class S{constructor(){this.eta=$,this.refresh()}static get instance(){return this.self||(this.self=new S),this.self}refresh(){this.eta=new A({varName:"context",autoEscape:!1})}}const T=(t,e={},r={})=>{const n=t.ll_template;let i={...r,...t.ll_context||{}};const o=Object.assign({},t);if(n&&e[n]){if(i){const r={...e[n]};delete r.ll_key,i={...i,...(null==r?void 0:r.ll_context)||{}};let s=JSON.stringify(r);s=S.instance.eta.renderString(s,i);try{t=JSON.parse(s)}catch(r){console.error(r),t=e[n]}Object.keys(o.ll_keys||{}).forEach((e=>{const r=(o.ll_keys||{})[e];if(r){const e=i?i[r]:void 0;e&&(t[r]=e)}}));const a={};Object.keys(o.ll_keys||{}).forEach((r=>{const n=Object.assign({},i);if("object"==typeof n[r])if(Array.isArray(n[r])&&"object"==typeof n[r][0]){a[r]=[];for(let t=0;t<n[r].length;t++){const i={...n[r][t].ll_context,...n};delete i[r];const o={...{...n[r][t]}},s=T(o,e,i);a[r].push(s)}}else try{const t={...n};delete t[r];const i={...n[r]};a[r]=T(i,e,t)}catch(e){console.log(`Couldn't Update card key '${r}. Provide the following object when submitting an issue to the developer.`,t,e)}})),Object.keys(a).forEach((e=>{t[e]=a[e]})),void 0!==(t={...{ll_context:i,ll_keys:o.ll_keys,...t},ll_context:i,ll_keys:o.ll_keys}).ll_context&&0===Object.keys(t.ll_context||{}).length&&delete t.ll_context}else t=e[n];t={...{ll_template:n,ll_keys:o.ll_keys,...t},ll_template:n,ll_keys:o.ll_keys}}else{if(t.sections&&Array.isArray(t.sections))for(let r=0;r<t.sections.length;r++)if(t.sections[r].cards&&Array.isArray(t.sections[r].cards))for(let n=0;n<t.sections[r].cards.length;n++){const o=t.sections[r].cards[n];t.sections[r].cards[n]=T(o,e,i)}if(Array.isArray(t.cards)){const r=[];t.cards.forEach((t=>{r.push(Object.assign({},T(t,e,i)))})),t.cards=r}t.card&&!Array.isArray(t.card)&&(t.card=Object.assign({},T(t.card,e,i)));const r=Object.keys(t),n={};r.forEach((r=>{if("card"!==r&&null!==t[r]&&"object"==typeof t[r])try{n[r]=T(t[r],e,i)}catch(e){console.log(`Couldn't Update card key '${r}'. Provide the following object when submitting an issue to the developer.`,t,e)}})),Object.keys(n).forEach((e=>{t[e]=n[e]}))}return t.hasOwnProperty("ll_keys")&&void 0===t.ll_keys&&delete t.ll_keys,t},x=()=>document.getElementsByTagName("home-assistant")[0].hass;class R{constructor(){this.debug=!1,this.dryRun=!1}log(e,...r){this.debug&&t(e,...r)}static get instance(){return this.self||(x(),this.self=new R),this.self}}class C{constructor(e){this.getDashboards=async()=>(R.instance.debug&&t("Getting Lovelace User-Created Dashboards"),this.hass.callWS({type:"lovelace/dashboards/list"}).then((t=>[{url_path:"",id:"overview",title:"Overview",mode:"unknown",require_admin:!1,show_in_sidebar:!1},...t]))),this.getDashboardConfig=async e=>(R.instance.debug&&t(`Getting Lovelace User-Created Dashboard: ${e}`),this.hass.callWS({type:"lovelace/config",url_path:e||null}).then((t=>({...t,views:t.views||[]})))),this.toggleDashboardAsTemplate=async(t,e)=>{const r=await this.getDashboardConfig(t);return r.template=void 0===e?!Boolean(r.template):e,void 0===r.template||r.template||delete r.template,await this.setDashboardConfig(t,r),r},this.setDashboardConfig=async(e,r)=>(R.instance.debug&&t(`${R.instance.dryRun?"Not Actually ":""}Setting Lovelace User-Created Dashboard: ${e}`,r),R.instance.dryRun?null:this.hass.callWS({type:"lovelace/config/save",url_path:e,config:r})),this.hass=e}}class k{constructor(t){this.hass=t,this.api=new C(t)}static get instance(){if(this.self)return this.self;const t=x();return this.self=new k(t),this.self}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function O(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const P=window,L=P.ShadowRoot&&(void 0===P.ShadyCSS||P.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,U=Symbol(),D=new WeakMap;let N=class{constructor(t,e,r){if(this._$cssResult$=!0,r!==U)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(L&&void 0===t){const r=void 0!==e&&1===e.length;r&&(t=D.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),r&&D.set(e,t))}return t}toString(){return this.cssText}};const j=(t,...e)=>{const r=1===t.length?t[0]:e.reduce(((e,r,n)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(r)+t[n+1]),t[0]);return new N(r,t,U)},B=L?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const r of t.cssRules)e+=r.cssText;return(t=>new N("string"==typeof t?t:t+"",void 0,U))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var I;const M=window,F=M.trustedTypes,H=F?F.emptyScript:"",z=M.reactiveElementPolyfillSupport,V={toAttribute(t,e){switch(e){case Boolean:t=t?H:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=null!==t;break;case Number:r=null===t?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch(t){r=null}}return r}},Y=(t,e)=>e!==t&&(e==e||t==t),q={attribute:!0,type:String,converter:V,reflect:!1,hasChanged:Y},W="finalized";let J=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,r)=>{const n=this._$Ep(r,e);void 0!==n&&(this._$Ev.set(n,r),t.push(n))})),t}static createProperty(t,e=q){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const r="symbol"==typeof t?Symbol():"__"+t,n=this.getPropertyDescriptor(t,r,e);void 0!==n&&Object.defineProperty(this.prototype,t,n)}}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(n){const i=this[t];this[e]=n,this.requestUpdate(t,i,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||q}static finalize(){if(this.hasOwnProperty(W))return!1;this[W]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const r of e)this.createProperty(r,t[r])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const r=new Set(t.flat(1/0).reverse());for(const t of r)e.unshift(B(t))}else void 0!==t&&e.push(B(t));return e}static _$Ep(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,r;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(r=t.hostConnected)||void 0===r||r.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{L?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const r=document.createElement("style"),n=P.litNonce;void 0!==n&&r.setAttribute("nonce",n),r.textContent=e.cssText,t.appendChild(r)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,r){this._$AK(t,r)}_$EO(t,e,r=q){var n;const i=this.constructor._$Ep(t,r);if(void 0!==i&&!0===r.reflect){const o=(void 0!==(null===(n=r.converter)||void 0===n?void 0:n.toAttribute)?r.converter:V).toAttribute(e,r.type);this._$El=t,null==o?this.removeAttribute(i):this.setAttribute(i,o),this._$El=null}}_$AK(t,e){var r;const n=this.constructor,i=n._$Ev.get(t);if(void 0!==i&&this._$El!==i){const t=n.getPropertyOptions(i),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(r=t.converter)||void 0===r?void 0:r.fromAttribute)?t.converter:V;this._$El=i,this[i]=o.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,r){let n=!0;void 0!==t&&(((r=r||this.constructor.getPropertyOptions(t)).hasChanged||Y)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===r.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,r))):n=!1),!this.isUpdatePending&&n&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(r)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(r)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var K;J[W]=!0,J.elementProperties=new Map,J.elementStyles=[],J.shadowRootOptions={mode:"open"},null==z||z({ReactiveElement:J}),(null!==(I=M.reactiveElementVersions)&&void 0!==I?I:M.reactiveElementVersions=[]).push("1.6.2");const G=window,X=G.trustedTypes,Z=X?X.createPolicy("lit-html",{createHTML:t=>t}):void 0,Q=`lit$${(Math.random()+"").slice(9)}$`,tt="?"+Q,et=`<${tt}>`,rt=document,nt=()=>rt.createComment(""),it=t=>null===t||"object"!=typeof t&&"function"!=typeof t,ot=Array.isArray,st="[ \t\n\f\r]",at=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,lt=/-->/g,ct=/>/g,ht=RegExp(`>|${st}(?:([^\\s"'>=/]+)(${st}*=${st}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),ut=/'/g,dt=/"/g,ft=/^(?:script|style|textarea|title)$/i,pt=(t=>(e,...r)=>({_$litType$:t,strings:e,values:r}))(1),gt=Symbol.for("lit-noChange"),mt=Symbol.for("lit-nothing"),yt=new WeakMap,vt=rt.createTreeWalker(rt,129,null,!1),bt=(t,e)=>{const r=t.length-1,n=[];let i,o=2===e?"<svg>":"",s=at;for(let e=0;e<r;e++){const r=t[e];let a,l,c=-1,h=0;for(;h<r.length&&(s.lastIndex=h,l=s.exec(r),null!==l);)h=s.lastIndex,s===at?"!--"===l[1]?s=lt:void 0!==l[1]?s=ct:void 0!==l[2]?(ft.test(l[2])&&(i=RegExp("</"+l[2],"g")),s=ht):void 0!==l[3]&&(s=ht):s===ht?">"===l[0]?(s=null!=i?i:at,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?ht:'"'===l[3]?dt:ut):s===dt||s===ut?s=ht:s===lt||s===ct?s=at:(s=ht,i=void 0);const u=s===ht&&t[e+1].startsWith("/>")?" ":"";o+=s===at?r+et:c>=0?(n.push(a),r.slice(0,c)+"$lit$"+r.slice(c)+Q+u):r+Q+(-2===c?(n.push(void 0),e):u)}const a=o+(t[r]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==Z?Z.createHTML(a):a,n]};class _t{constructor({strings:t,_$litType$:e},r){let n;this.parts=[];let i=0,o=0;const s=t.length-1,a=this.parts,[l,c]=bt(t,e);if(this.el=_t.createElement(l,r),vt.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(n=vt.nextNode())&&a.length<s;){if(1===n.nodeType){if(n.hasAttributes()){const t=[];for(const e of n.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(Q)){const r=c[o++];if(t.push(e),void 0!==r){const t=n.getAttribute(r.toLowerCase()+"$lit$").split(Q),e=/([.?@])?(.*)/.exec(r);a.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?St:"?"===e[1]?xt:"@"===e[1]?Rt:$t})}else a.push({type:6,index:i})}for(const e of t)n.removeAttribute(e)}if(ft.test(n.tagName)){const t=n.textContent.split(Q),e=t.length-1;if(e>0){n.textContent=X?X.emptyScript:"";for(let r=0;r<e;r++)n.append(t[r],nt()),vt.nextNode(),a.push({type:2,index:++i});n.append(t[e],nt())}}}else if(8===n.nodeType)if(n.data===tt)a.push({type:2,index:i});else{let t=-1;for(;-1!==(t=n.data.indexOf(Q,t+1));)a.push({type:7,index:i}),t+=Q.length-1}i++}}static createElement(t,e){const r=rt.createElement("template");return r.innerHTML=t,r}}function wt(t,e,r=t,n){var i,o,s,a;if(e===gt)return e;let l=void 0!==n?null===(i=r._$Co)||void 0===i?void 0:i[n]:r._$Cl;const c=it(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,r,n)),void 0!==n?(null!==(s=(a=r)._$Co)&&void 0!==s?s:a._$Co=[])[n]=l:r._$Cl=l),void 0!==l&&(e=wt(t,l._$AS(t,e.values),l,n)),e}class Et{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:r},parts:n}=this._$AD,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:rt).importNode(r,!0);vt.currentNode=i;let o=vt.nextNode(),s=0,a=0,l=n[0];for(;void 0!==l;){if(s===l.index){let e;2===l.type?e=new At(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new Ct(o,this,t)),this._$AV.push(e),l=n[++a]}s!==(null==l?void 0:l.index)&&(o=vt.nextNode(),s++)}return vt.currentNode=rt,i}v(t){let e=0;for(const r of this._$AV)void 0!==r&&(void 0!==r.strings?(r._$AI(t,r,e),e+=r.strings.length-2):r._$AI(t[e])),e++}}class At{constructor(t,e,r,n){var i;this.type=2,this._$AH=mt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=r,this.options=n,this._$Cp=null===(i=null==n?void 0:n.isConnected)||void 0===i||i}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=wt(this,t,e),it(t)?t===mt||null==t||""===t?(this._$AH!==mt&&this._$AR(),this._$AH=mt):t!==this._$AH&&t!==gt&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>ot(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==mt&&it(this._$AH)?this._$AA.nextSibling.data=t:this.$(rt.createTextNode(t)),this._$AH=t}g(t){var e;const{values:r,_$litType$:n}=t,i="number"==typeof n?this._$AC(t):(void 0===n.el&&(n.el=_t.createElement(n.h,this.options)),n);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.v(r);else{const t=new Et(i,this),e=t.u(this.options);t.v(r),this.$(e),this._$AH=t}}_$AC(t){let e=yt.get(t.strings);return void 0===e&&yt.set(t.strings,e=new _t(t)),e}T(t){ot(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let r,n=0;for(const i of t)n===e.length?e.push(r=new At(this.k(nt()),this.k(nt()),this,this.options)):r=e[n],r._$AI(i),n++;n<e.length&&(this._$AR(r&&r._$AB.nextSibling,n),e.length=n)}_$AR(t=this._$AA.nextSibling,e){var r;for(null===(r=this._$AP)||void 0===r||r.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class $t{constructor(t,e,r,n,i){this.type=1,this._$AH=mt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=n,this.options=i,r.length>2||""!==r[0]||""!==r[1]?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=mt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,r,n){const i=this.strings;let o=!1;if(void 0===i)t=wt(this,t,e,0),o=!it(t)||t!==this._$AH&&t!==gt,o&&(this._$AH=t);else{const n=t;let s,a;for(t=i[0],s=0;s<i.length-1;s++)a=wt(this,n[r+s],e,s),a===gt&&(a=this._$AH[s]),o||(o=!it(a)||a!==this._$AH[s]),a===mt?t=mt:t!==mt&&(t+=(null!=a?a:"")+i[s+1]),this._$AH[s]=a}o&&!n&&this.j(t)}j(t){t===mt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class St extends $t{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===mt?void 0:t}}const Tt=X?X.emptyScript:"";class xt extends $t{constructor(){super(...arguments),this.type=4}j(t){t&&t!==mt?this.element.setAttribute(this.name,Tt):this.element.removeAttribute(this.name)}}class Rt extends $t{constructor(t,e,r,n,i){super(t,e,r,n,i),this.type=5}_$AI(t,e=this){var r;if((t=null!==(r=wt(this,t,e,0))&&void 0!==r?r:mt)===gt)return;const n=this._$AH,i=t===mt&&n!==mt||t.capture!==n.capture||t.once!==n.once||t.passive!==n.passive,o=t!==mt&&(n===mt||i);i&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,r;"function"==typeof this._$AH?this._$AH.call(null!==(r=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==r?r:this.element,t):this._$AH.handleEvent(t)}}class Ct{constructor(t,e,r){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(t){wt(this,t)}}const kt=G.litHtmlPolyfillSupport;null==kt||kt(_t,At),(null!==(K=G.litHtmlVersions)&&void 0!==K?K:G.litHtmlVersions=[]).push("2.7.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Ot,Pt;class Lt extends J{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const r=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=r.firstChild),r}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,r)=>{var n,i;const o=null!==(n=null==r?void 0:r.renderBefore)&&void 0!==n?n:e;let s=o._$litPart$;if(void 0===s){const t=null!==(i=null==r?void 0:r.renderBefore)&&void 0!==i?i:null;o._$litPart$=s=new At(e.insertBefore(nt(),t),t,void 0,null!=r?r:{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return gt}}Lt.finalized=!0,Lt._$litElement$=!0,null===(Ot=globalThis.litElementHydrateSupport)||void 0===Ot||Ot.call(globalThis,{LitElement:Lt});const Ut=globalThis.litElementPolyfillSupport;null==Ut||Ut({LitElement:Lt}),(null!==(Pt=globalThis.litElementVersions)&&void 0!==Pt?Pt:globalThis.litElementVersions=[]).push("3.3.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Dt=t=>e=>"function"==typeof e?((t,e)=>(customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:r,elements:n}=e;return{kind:r,elements:n,finisher(e){customElements.define(t,e)}}})(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Nt=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(r){r.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(r){r.createProperty(e.key,t)}};function jt(t){return(e,r)=>void 0!==r?((t,e,r)=>{e.constructor.createProperty(r,t)})(t,e,r):Nt(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function Bt(t){return jt({...t,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var It,Mt,Ft;null===(It=window.HTMLSlotElement)||void 0===It||It.prototype.assignedElements,function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(Mt||(Mt={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(Ft||(Ft={}));function Ht(t,e,r){if(e.has("config")||r)return!0;if(t.config.entity){var n=e.get("hass");return!n||n.states[t.config.entity]!==t.hass.states[t.config.entity]}return!1}var zt=function(){var t=document.querySelector("home-assistant");if(t=(t=(t=(t=(t=(t=(t=(t=t&&t.shadowRoot)&&t.querySelector("home-assistant-main"))&&t.shadowRoot)&&t.querySelector("app-drawer-layout partial-panel-resolver"))&&t.shadowRoot||t)&&t.querySelector("ha-panel-lovelace"))&&t.shadowRoot)&&t.querySelector("hui-root")){var e=t.lovelace;return e.current_view=t.___curView,e}return null},Vt={version:"Version",scroll_controls:"Scroll Controls",scroll_directions:{prefix:"Scroll to ",suffix:"",directions:{left:"Left",right:"Right",top:"Top",bottom:"Bottom"}},template_mode:{enable:"Enable Template Mode",disable:"Disable Template Mode"},view:"View",dashboard:"Dashboard",template:"Template",templates:"Templates",and:"and",in_use:"In Use",update:"Update",update_all:"Update All",condense:"Condense",expand:"Expand",reload_ui:"Update",reload:"Refresh",headers:{templates:"Templates & The Views They Are Used On",dashboards:"Dashboards"},invalid_configuration:"Invalid configuration",show_warning:"Show Warning",show_error:"Show Error"},Yt={common:Vt};const qt={en:Object.freeze({__proto__:null,common:Vt,default:Yt})};function Wt(t,e="",r=""){const n=(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_");let i;try{i=t.split(".").reduce(((t,e)=>t[e]),qt[n])}catch(e){i=t.split(".").reduce(((t,e)=>t[e]),qt.en)}return void 0===i&&(i=t.split(".").reduce(((t,e)=>t[e]),qt.en)),""!==e&&""!==r&&(i=i.replace(e,r)),i}class Jt{constructor(){this.templates={}}addTemplate(t,e,r=!0){return(r||!this.templates[t])&&(this.templates[t]=e,!0)}renderAndAddTemplate(t,e){const r={...e};delete r.ll_key,delete r.ll_priority;const n=T(r,this.templates);return this.addTemplate(t,n,!0)}renderCard(t){return T(t,this.templates)}}var Kt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Gt(t,e){return function(){return t.apply(e,arguments)}}const{toString:Xt}=Object.prototype,{getPrototypeOf:Zt}=Object,Qt=(te=Object.create(null),t=>{const e=Xt.call(t);return te[e]||(te[e]=e.slice(8,-1).toLowerCase())});var te;const ee=t=>(t=t.toLowerCase(),e=>Qt(e)===t),re=t=>e=>typeof e===t,{isArray:ne}=Array,ie=re("undefined");const oe=ee("ArrayBuffer");const se=re("string"),ae=re("function"),le=re("number"),ce=t=>null!==t&&"object"==typeof t,he=t=>{if("object"!==Qt(t))return!1;const e=Zt(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},ue=ee("Date"),de=ee("File"),fe=ee("Blob"),pe=ee("FileList"),ge=ee("URLSearchParams");function me(t,e,{allOwnKeys:r=!1}={}){if(null==t)return;let n,i;if("object"!=typeof t&&(t=[t]),ne(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let s;for(n=0;n<o;n++)s=i[n],e.call(null,t[s],s,t)}}function ye(t,e){e=e.toLowerCase();const r=Object.keys(t);let n,i=r.length;for(;i-- >0;)if(n=r[i],e===n.toLowerCase())return n;return null}const ve="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Kt,be=t=>!ie(t)&&t!==ve;const _e=(we="undefined"!=typeof Uint8Array&&Zt(Uint8Array),t=>we&&t instanceof we);var we;const Ee=ee("HTMLFormElement"),Ae=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),$e=ee("RegExp"),Se=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};me(r,((r,i)=>{!1!==e(r,i,t)&&(n[i]=r)})),Object.defineProperties(t,n)},Te="abcdefghijklmnopqrstuvwxyz",xe={DIGIT:"0123456789",ALPHA:Te,ALPHA_DIGIT:Te+Te.toUpperCase()+"0123456789"};const Re=ee("AsyncFunction");var Ce={isArray:ne,isArrayBuffer:oe,isBuffer:function(t){return null!==t&&!ie(t)&&null!==t.constructor&&!ie(t.constructor)&&ae(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||ae(t.append)&&("formdata"===(e=Qt(t))||"object"===e&&ae(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&oe(t.buffer),e},isString:se,isNumber:le,isBoolean:t=>!0===t||!1===t,isObject:ce,isPlainObject:he,isUndefined:ie,isDate:ue,isFile:de,isBlob:fe,isRegExp:$e,isFunction:ae,isStream:t=>ce(t)&&ae(t.pipe),isURLSearchParams:ge,isTypedArray:_e,isFileList:pe,forEach:me,merge:function t(){const{caseless:e}=be(this)&&this||{},r={},n=(n,i)=>{const o=e&&ye(r,i)||i;he(r[o])&&he(n)?r[o]=t(r[o],n):he(n)?r[o]=t({},n):ne(n)?r[o]=n.slice():r[o]=n};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&me(arguments[t],n);return r},extend:(t,e,r,{allOwnKeys:n}={})=>(me(e,((e,n)=>{r&&ae(e)?t[n]=Gt(e,r):t[n]=e}),{allOwnKeys:n}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},toFlatObject:(t,e,r,n)=>{let i,o,s;const a={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],n&&!n(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==r&&Zt(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:Qt,kindOfTest:ee,endsWith:(t,e,r)=>{t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return-1!==n&&n===r},toArray:t=>{if(!t)return null;if(ne(t))return t;let e=t.length;if(!le(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},forEachEntry:(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=r.next())&&!n.done;){const r=n.value;e.call(t,r[0],r[1])}},matchAll:(t,e)=>{let r;const n=[];for(;null!==(r=t.exec(e));)n.push(r);return n},isHTMLForm:Ee,hasOwnProperty:Ae,hasOwnProp:Ae,reduceDescriptors:Se,freezeMethods:t=>{Se(t,((e,r)=>{if(ae(t)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=t[r];ae(n)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(t,e)=>{const r={},n=t=>{t.forEach((t=>{r[t]=!0}))};return ne(t)?n(t):n(String(t).split(e)),r},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,r){return e.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:ye,global:ve,isContextDefined:be,ALPHABET:xe,generateString:(t=16,e=xe.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r},isSpecCompliantForm:function(t){return!!(t&&ae(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),r=(t,n)=>{if(ce(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[n]=t;const i=ne(t)?[]:{};return me(t,((t,e)=>{const o=r(t,n+1);!ie(o)&&(i[e]=o)})),e[n]=void 0,i}}return t};return r(t,0)},isAsyncFn:Re,isThenable:t=>t&&(ce(t)||ae(t))&&ae(t.then)&&ae(t.catch)},ke=[],Oe=[],Pe="undefined"!=typeof Uint8Array?Uint8Array:Array,Le=!1;function Ue(){Le=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,r=t.length;e<r;++e)ke[e]=t[e],Oe[t.charCodeAt(e)]=e;Oe["-".charCodeAt(0)]=62,Oe["_".charCodeAt(0)]=63}function De(t,e,r){for(var n,i,o=[],s=e;s<r;s+=3)n=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(ke[(i=n)>>18&63]+ke[i>>12&63]+ke[i>>6&63]+ke[63&i]);return o.join("")}function Ne(t){var e;Le||Ue();for(var r=t.length,n=r%3,i="",o=[],s=16383,a=0,l=r-n;a<l;a+=s)o.push(De(t,a,a+s>l?l:a+s));return 1===n?(e=t[r-1],i+=ke[e>>2],i+=ke[e<<4&63],i+="=="):2===n&&(e=(t[r-2]<<8)+t[r-1],i+=ke[e>>10],i+=ke[e>>4&63],i+=ke[e<<2&63],i+="="),o.push(i),o.join("")}function je(t,e,r,n,i){var o,s,a=8*i-n-1,l=(1<<a)-1,c=l>>1,h=-7,u=r?i-1:0,d=r?-1:1,f=t[e+u];for(u+=d,o=f&(1<<-h)-1,f>>=-h,h+=a;h>0;o=256*o+t[e+u],u+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=n;h>0;s=256*s+t[e+u],u+=d,h-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),o-=c}return(f?-1:1)*s*Math.pow(2,o-n)}function Be(t,e,r,n,i,o){var s,a,l,c=8*o-i-1,h=(1<<c)-1,u=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:o-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=h?(a=0,s=h):s+u>=1?(a=(e*l-1)*Math.pow(2,i),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),s=0));i>=8;t[r+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+f]=255&s,f+=p,s/=256,c-=8);t[r+f-p]|=128*g}var Ie={}.toString,Me=Array.isArray||function(t){return"[object Array]"==Ie.call(t)};function Fe(){return ze.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function He(t,e){if(Fe()<e)throw new RangeError("Invalid typed array length");return ze.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=ze.prototype:(null===t&&(t=new ze(e)),t.length=e),t}function ze(t,e,r){if(!(ze.TYPED_ARRAY_SUPPORT||this instanceof ze))return new ze(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return qe(this,t)}return Ve(this,t,e,r)}function Ve(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);ze.TYPED_ARRAY_SUPPORT?(t=e).__proto__=ze.prototype:t=We(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!ze.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|Ge(e,r),i=(t=He(t,n)).write(e,r);i!==n&&(t=t.slice(0,i));return t}(t,e,r):function(t,e){if(Ke(e)){var r=0|Je(e.length);return 0===(t=He(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?He(t,0):We(t,e);if("Buffer"===e.type&&Me(e.data))return We(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function Ye(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function qe(t,e){if(Ye(e),t=He(t,e<0?0:0|Je(e)),!ze.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function We(t,e){var r=e.length<0?0:0|Je(e.length);t=He(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function Je(t){if(t>=Fe())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Fe().toString(16)+" bytes");return 0|t}function Ke(t){return!(null==t||!t._isBuffer)}function Ge(t,e){if(Ke(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return Er(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Ar(t).length;default:if(n)return Er(t).length;e=(""+e).toLowerCase(),n=!0}}function Xe(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return ur(this,e,r);case"utf8":case"utf-8":return lr(this,e,r);case"ascii":return cr(this,e,r);case"latin1":case"binary":return hr(this,e,r);case"base64":return ar(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return dr(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function Ze(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function Qe(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=ze.from(e,n)),Ke(e))return 0===e.length?-1:tr(t,e,r,n,i);if("number"==typeof e)return e&=255,ze.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):tr(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function tr(t,e,r,n,i){var o,s=1,a=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=r;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===l)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(r+l>a&&(r=a-l),o=r;o>=0;o--){for(var u=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){u=!1;break}if(u)return o}return-1}function er(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function rr(t,e,r,n){return $r(Er(e,t.length-r),t,r,n)}function nr(t,e,r,n){return $r(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function ir(t,e,r,n){return nr(t,e,r,n)}function or(t,e,r,n){return $r(Ar(e),t,r,n)}function sr(t,e,r,n){return $r(function(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)n=(r=t.charCodeAt(s))>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function ar(t,e,r){return 0===e&&r===t.length?Ne(t):Ne(t.slice(e,r))}function lr(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,s,a,l,c=t[i],h=null,u=c>239?4:c>223?3:c>191?2:1;if(i+u<=r)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)>127&&(h=l);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(h-=65536,n.push(h>>>10&1023|55296),h=56320|1023&h),n.push(h),i+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}ze.TYPED_ARRAY_SUPPORT=void 0===Kt.TYPED_ARRAY_SUPPORT||Kt.TYPED_ARRAY_SUPPORT,Fe(),ze.poolSize=8192,ze._augment=function(t){return t.__proto__=ze.prototype,t},ze.from=function(t,e,r){return Ve(null,t,e,r)},ze.TYPED_ARRAY_SUPPORT&&(ze.prototype.__proto__=Uint8Array.prototype,ze.__proto__=Uint8Array),ze.alloc=function(t,e,r){return function(t,e,r,n){return Ye(e),e<=0?He(t,e):void 0!==r?"string"==typeof n?He(t,e).fill(r,n):He(t,e).fill(r):He(t,e)}(null,t,e,r)},ze.allocUnsafe=function(t){return qe(null,t)},ze.allocUnsafeSlow=function(t){return qe(null,t)},ze.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Sr(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Sr(t.slice(0,0))}(t))},ze.compare=function(t,e){if(!Ke(t)||!Ke(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},ze.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},ze.concat=function(t,e){if(!Me(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return ze.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=ze.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(!Ke(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,i),i+=o.length}return n},ze.byteLength=Ge,ze.prototype._isBuffer=!0,ze.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)Ze(this,e,e+1);return this},ze.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)Ze(this,e,e+3),Ze(this,e+1,e+2);return this},ze.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)Ze(this,e,e+7),Ze(this,e+1,e+6),Ze(this,e+2,e+5),Ze(this,e+3,e+4);return this},ze.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?lr(this,0,t):Xe.apply(this,arguments)},ze.prototype.equals=function(t){if(!Ke(t))throw new TypeError("Argument must be a Buffer");return this===t||0===ze.compare(this,t)},ze.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},ze.prototype.compare=function(t,e,r,n,i){if(!Ke(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(n,i),c=t.slice(e,r),h=0;h<a;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},ze.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},ze.prototype.indexOf=function(t,e,r){return Qe(this,t,e,r,!0)},ze.prototype.lastIndexOf=function(t,e,r){return Qe(this,t,e,r,!1)},ze.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return er(this,t,e,r);case"utf8":case"utf-8":return rr(this,t,e,r);case"ascii":return nr(this,t,e,r);case"latin1":case"binary":return ir(this,t,e,r);case"base64":return or(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return sr(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},ze.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function cr(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function hr(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function ur(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=wr(t[o]);return i}function dr(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function fr(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function pr(t,e,r,n,i,o){if(!Ke(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function gr(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function mr(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function yr(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function vr(t,e,r,n,i){return i||yr(t,0,r,4),Be(t,e,r,n,23,4),r+4}function br(t,e,r,n,i){return i||yr(t,0,r,8),Be(t,e,r,n,52,8),r+8}ze.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),ze.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=ze.prototype;else{var i=e-t;r=new ze(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},ze.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||fr(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},ze.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||fr(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},ze.prototype.readUInt8=function(t,e){return e||fr(t,1,this.length),this[t]},ze.prototype.readUInt16LE=function(t,e){return e||fr(t,2,this.length),this[t]|this[t+1]<<8},ze.prototype.readUInt16BE=function(t,e){return e||fr(t,2,this.length),this[t]<<8|this[t+1]},ze.prototype.readUInt32LE=function(t,e){return e||fr(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},ze.prototype.readUInt32BE=function(t,e){return e||fr(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},ze.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||fr(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},ze.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||fr(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},ze.prototype.readInt8=function(t,e){return e||fr(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},ze.prototype.readInt16LE=function(t,e){e||fr(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},ze.prototype.readInt16BE=function(t,e){e||fr(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},ze.prototype.readInt32LE=function(t,e){return e||fr(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},ze.prototype.readInt32BE=function(t,e){return e||fr(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},ze.prototype.readFloatLE=function(t,e){return e||fr(t,4,this.length),je(this,t,!0,23,4)},ze.prototype.readFloatBE=function(t,e){return e||fr(t,4,this.length),je(this,t,!1,23,4)},ze.prototype.readDoubleLE=function(t,e){return e||fr(t,8,this.length),je(this,t,!0,52,8)},ze.prototype.readDoubleBE=function(t,e){return e||fr(t,8,this.length),je(this,t,!1,52,8)},ze.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||pr(this,t,e,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},ze.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||pr(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},ze.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,1,255,0),ze.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},ze.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,2,65535,0),ze.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):gr(this,t,e,!0),e+2},ze.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,2,65535,0),ze.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):gr(this,t,e,!1),e+2},ze.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,4,4294967295,0),ze.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):mr(this,t,e,!0),e+4},ze.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,4,4294967295,0),ze.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):mr(this,t,e,!1),e+4},ze.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);pr(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},ze.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);pr(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},ze.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,1,127,-128),ze.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},ze.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,2,32767,-32768),ze.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):gr(this,t,e,!0),e+2},ze.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,2,32767,-32768),ze.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):gr(this,t,e,!1),e+2},ze.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,4,2147483647,-2147483648),ze.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):mr(this,t,e,!0),e+4},ze.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||pr(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),ze.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):mr(this,t,e,!1),e+4},ze.prototype.writeFloatLE=function(t,e,r){return vr(this,t,e,!0,r)},ze.prototype.writeFloatBE=function(t,e,r){return vr(this,t,e,!1,r)},ze.prototype.writeDoubleLE=function(t,e,r){return br(this,t,e,!0,r)},ze.prototype.writeDoubleBE=function(t,e,r){return br(this,t,e,!1,r)},ze.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!ze.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},ze.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!ze.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var o;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=Ke(t)?t:Er(new ze(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var _r=/[^+\/0-9A-Za-z-_]/g;function wr(t){return t<16?"0"+t.toString(16):t.toString(16)}function Er(t,e){var r;e=e||1/0;for(var n=t.length,i=null,o=[],s=0;s<n;++s){if((r=t.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Ar(t){return function(t){var e,r,n,i,o,s;Le||Ue();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[a-2]?2:"="===t[a-1]?1:0,s=new Pe(3*a/4-o),n=o>0?a-4:a;var l=0;for(e=0,r=0;e<n;e+=4,r+=3)i=Oe[t.charCodeAt(e)]<<18|Oe[t.charCodeAt(e+1)]<<12|Oe[t.charCodeAt(e+2)]<<6|Oe[t.charCodeAt(e+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=Oe[t.charCodeAt(e)]<<2|Oe[t.charCodeAt(e+1)]>>4,s[l++]=255&i):1===o&&(i=Oe[t.charCodeAt(e)]<<10|Oe[t.charCodeAt(e+1)]<<4|Oe[t.charCodeAt(e+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(_r,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function $r(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function Sr(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function Tr(t,e,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i)}Ce.inherits(Tr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ce.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const xr=Tr.prototype,Rr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{Rr[t]={value:t}})),Object.defineProperties(Tr,Rr),Object.defineProperty(xr,"isAxiosError",{value:!0}),Tr.from=(t,e,r,n,i,o)=>{const s=Object.create(xr);return Ce.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),Tr.call(s,t.message,e,r,n,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};function Cr(t){return Ce.isPlainObject(t)||Ce.isArray(t)}function kr(t){return Ce.endsWith(t,"[]")?t.slice(0,-2):t}function Or(t,e,r){return t?t.concat(e).map((function(t,e){return t=kr(t),!r&&e?"["+t+"]":t})).join(r?".":""):e}const Pr=Ce.toFlatObject(Ce,{},null,(function(t){return/^is[A-Z]/.test(t)}));function Lr(t,e,r){if(!Ce.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const n=(r=Ce.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!Ce.isUndefined(e[t])}))).metaTokens,i=r.visitor||c,o=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&Ce.isSpecCompliantForm(e);if(!Ce.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(Ce.isDate(t))return t.toISOString();if(!a&&Ce.isBlob(t))throw new Tr("Blob is not supported. Use a Buffer instead.");return Ce.isArrayBuffer(t)||Ce.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):ze.from(t):t}function c(t,r,i){let a=t;if(t&&!i&&"object"==typeof t)if(Ce.endsWith(r,"{}"))r=n?r:r.slice(0,-2),t=JSON.stringify(t);else if(Ce.isArray(t)&&function(t){return Ce.isArray(t)&&!t.some(Cr)}(t)||(Ce.isFileList(t)||Ce.endsWith(r,"[]"))&&(a=Ce.toArray(t)))return r=kr(r),a.forEach((function(t,n){!Ce.isUndefined(t)&&null!==t&&e.append(!0===s?Or([r],n,o):null===s?r:r+"[]",l(t))})),!1;return!!Cr(t)||(e.append(Or(i,r,o),l(t)),!1)}const h=[],u=Object.assign(Pr,{defaultVisitor:c,convertValue:l,isVisitable:Cr});if(!Ce.isObject(t))throw new TypeError("data must be an object");return function t(r,n){if(!Ce.isUndefined(r)){if(-1!==h.indexOf(r))throw Error("Circular reference detected in "+n.join("."));h.push(r),Ce.forEach(r,(function(r,o){!0===(!(Ce.isUndefined(r)||null===r)&&i.call(e,r,Ce.isString(o)?o.trim():o,n,u))&&t(r,n?n.concat(o):[o])})),h.pop()}}(t),e}function Ur(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Dr(t,e){this._pairs=[],t&&Lr(t,this,e)}const Nr=Dr.prototype;function jr(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Br(t,e,r){if(!e)return t;const n=r&&r.encode||jr,i=r&&r.serialize;let o;if(o=i?i(e,r):Ce.isURLSearchParams(e)?e.toString():new Dr(e,r).toString(n),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}Nr.append=function(t,e){this._pairs.push([t,e])},Nr.toString=function(t){const e=t?function(e){return t.call(this,e,Ur)}:Ur;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var Ir=class{constructor(){this.handlers=[]}use(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ce.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},Mr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var Fr={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Dr,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Hr(t){function e(t,r,n,i){let o=t[i++];const s=Number.isFinite(+o),a=i>=t.length;if(o=!o&&Ce.isArray(n)?n.length:o,a)return Ce.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!s;n[o]&&Ce.isObject(n[o])||(n[o]=[]);return e(t,r,n[o],i)&&Ce.isArray(n[o])&&(n[o]=function(t){const e={},r=Object.keys(t);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],e[o]=t[o];return e}(n[o])),!s}if(Ce.isFormData(t)&&Ce.isFunction(t.entries)){const r={};return Ce.forEachEntry(t,((t,n)=>{e(function(t){return Ce.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),n,r,0)})),r}return null}const zr={"Content-Type":void 0};const Vr={transitional:Mr,adapter:["xhr","http"],transformRequest:[function(t,e){const r=e.getContentType()||"",n=r.indexOf("application/json")>-1,i=Ce.isObject(t);i&&Ce.isHTMLForm(t)&&(t=new FormData(t));if(Ce.isFormData(t))return n&&n?JSON.stringify(Hr(t)):t;if(Ce.isArrayBuffer(t)||Ce.isBuffer(t)||Ce.isStream(t)||Ce.isFile(t)||Ce.isBlob(t))return t;if(Ce.isArrayBufferView(t))return t.buffer;if(Ce.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Lr(t,new Fr.classes.URLSearchParams,Object.assign({visitor:function(t,e,r,n){return Fr.isNode&&Ce.isBuffer(t)?(this.append(e,t.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=Ce.isFileList(t))||r.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Lr(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||n?(e.setContentType("application/json",!1),function(t,e,r){if(Ce.isString(t))try{return(e||JSON.parse)(t),Ce.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Vr.transitional,r=e&&e.forcedJSONParsing,n="json"===this.responseType;if(t&&Ce.isString(t)&&(r&&!this.responseType||n)){const r=!(e&&e.silentJSONParsing)&&n;try{return JSON.parse(t)}catch(t){if(r){if("SyntaxError"===t.name)throw Tr.from(t,Tr.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Fr.classes.FormData,Blob:Fr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ce.forEach(["delete","get","head"],(function(t){Vr.headers[t]={}})),Ce.forEach(["post","put","patch"],(function(t){Vr.headers[t]=Ce.merge(zr)}));var Yr=Vr;const qr=Ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Wr=Symbol("internals");function Jr(t){return t&&String(t).trim().toLowerCase()}function Kr(t){return!1===t||null==t?t:Ce.isArray(t)?t.map(Kr):String(t)}function Gr(t,e,r,n,i){return Ce.isFunction(n)?n.call(this,e,r):(i&&(e=r),Ce.isString(e)?Ce.isString(n)?-1!==e.indexOf(n):Ce.isRegExp(n)?n.test(e):void 0:void 0)}class Xr{constructor(t){t&&this.set(t)}set(t,e,r){const n=this;function i(t,e,r){const i=Jr(e);if(!i)throw new Error("header name must be a non-empty string");const o=Ce.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||e]=Kr(t))}const o=(t,e)=>Ce.forEach(t,((t,r)=>i(t,r,e)));return Ce.isPlainObject(t)||t instanceof this.constructor?o(t,e):Ce.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?o((t=>{const e={};let r,n,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),r=t.substring(0,i).trim().toLowerCase(),n=t.substring(i+1).trim(),!r||e[r]&&qr[r]||("set-cookie"===r?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)})),e})(t),e):null!=t&&i(e,t,r),this}get(t,e){if(t=Jr(t)){const r=Ce.findKey(this,t);if(r){const t=this[r];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}(t);if(Ce.isFunction(e))return e.call(this,t,r);if(Ce.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Jr(t)){const r=Ce.findKey(this,t);return!(!r||void 0===this[r]||e&&!Gr(0,this[r],r,e))}return!1}delete(t,e){const r=this;let n=!1;function i(t){if(t=Jr(t)){const i=Ce.findKey(r,t);!i||e&&!Gr(0,r[i],i,e)||(delete r[i],n=!0)}}return Ce.isArray(t)?t.forEach(i):i(t),n}clear(t){const e=Object.keys(this);let r=e.length,n=!1;for(;r--;){const i=e[r];t&&!Gr(0,this[i],i,t,!0)||(delete this[i],n=!0)}return n}normalize(t){const e=this,r={};return Ce.forEach(this,((n,i)=>{const o=Ce.findKey(r,i);if(o)return e[o]=Kr(n),void delete e[i];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,r)=>e.toUpperCase()+r))}(i):String(i).trim();s!==i&&delete e[i],e[s]=Kr(n),r[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Ce.forEach(this,((r,n)=>{null!=r&&!1!==r&&(e[n]=t&&Ce.isArray(r)?r.join(", "):r)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const r=new this(t);return e.forEach((t=>r.set(t))),r}static accessor(t){const e=(this[Wr]=this[Wr]={accessors:{}}).accessors,r=this.prototype;function n(t){const n=Jr(t);e[n]||(!function(t,e){const r=Ce.toCamelCase(" "+e);["get","set","has"].forEach((n=>{Object.defineProperty(t,n+r,{value:function(t,r,i){return this[n].call(this,e,t,r,i)},configurable:!0})}))}(r,t),e[n]=!0)}return Ce.isArray(t)?t.forEach(n):n(t),this}}Xr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ce.freezeMethods(Xr.prototype),Ce.freezeMethods(Xr);var Zr=Xr;function Qr(t,e){const r=this||Yr,n=e||r,i=Zr.from(n.headers);let o=n.data;return Ce.forEach(t,(function(t){o=t.call(r,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function tn(t){return!(!t||!t.__CANCEL__)}function en(t,e,r){Tr.call(this,null==t?"canceled":t,Tr.ERR_CANCELED,e,r),this.name="CanceledError"}Ce.inherits(en,Tr,{__CANCEL__:!0});var rn=Fr.isStandardBrowserEnv?{write:function(t,e,r,n,i,o){const s=[];s.push(t+"="+encodeURIComponent(e)),Ce.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),Ce.isString(n)&&s.push("path="+n),Ce.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function nn(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var on=Fr.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let r;function n(r){let n=r;return t&&(e.setAttribute("href",n),n=e.href),e.setAttribute("href",n),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return r=n(window.location.href),function(t){const e=Ce.isString(t)?n(t):t;return e.protocol===r.protocol&&e.host===r.host}}():function(){return!0};function sn(t,e){let r=0;const n=function(t,e){t=t||10;const r=new Array(t),n=new Array(t);let i,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),c=n[s];i||(i=l),r[o]=a,n[o]=l;let h=s,u=0;for(;h!==o;)u+=r[h++],h%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),l-i<e)return;const d=c&&l-c;return d?Math.round(1e3*u/d):void 0}}(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-r,l=n(a);r=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const an={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,r){let n=t.data;const i=Zr.from(t.headers).normalize(),o=t.responseType;let s;function a(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}Ce.isFormData(n)&&(Fr.isStandardBrowserEnv||Fr.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",r=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+r))}const c=nn(t.baseURL,t.url);function h(){if(!l)return;const n=Zr.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(t,e,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(new Tr("Request failed with status code "+r.status,[Tr.ERR_BAD_REQUEST,Tr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):t(r)}((function(t){e(t),a()}),(function(t){r(t),a()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:n,config:t,request:l}),l=null}if(l.open(t.method.toUpperCase(),Br(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(h)},l.onabort=function(){l&&(r(new Tr("Request aborted",Tr.ECONNABORTED,t,l)),l=null)},l.onerror=function(){r(new Tr("Network Error",Tr.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const n=t.transitional||Mr;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(new Tr(e,n.clarifyTimeoutError?Tr.ETIMEDOUT:Tr.ECONNABORTED,t,l)),l=null},Fr.isStandardBrowserEnv){const e=(t.withCredentials||on(c))&&t.xsrfCookieName&&rn.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===n&&i.setContentType(null),"setRequestHeader"in l&&Ce.forEach(i.toJSON(),(function(t,e){l.setRequestHeader(e,t)})),Ce.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),o&&"json"!==o&&(l.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",sn(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",sn(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{l&&(r(!e||e.type?new en(null,t,l):e),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const u=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(c);u&&-1===Fr.protocols.indexOf(u)?r(new Tr("Unsupported protocol "+u+":",Tr.ERR_BAD_REQUEST,t)):l.send(n||null)}))}};Ce.forEach(an,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));var ln=t=>{t=Ce.isArray(t)?t:[t];const{length:e}=t;let r,n;for(let i=0;i<e&&(r=t[i],!(n=Ce.isString(r)?an[r.toLowerCase()]:r));i++);if(!n){if(!1===n)throw new Tr(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(Ce.hasOwnProp(an,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`)}if(!Ce.isFunction(n))throw new TypeError("adapter is not a function");return n};function cn(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new en(null,t)}function hn(t){cn(t),t.headers=Zr.from(t.headers),t.data=Qr.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return ln(t.adapter||Yr.adapter)(t).then((function(e){return cn(t),e.data=Qr.call(t,t.transformResponse,e),e.headers=Zr.from(e.headers),e}),(function(e){return tn(e)||(cn(t),e&&e.response&&(e.response.data=Qr.call(t,t.transformResponse,e.response),e.response.headers=Zr.from(e.response.headers))),Promise.reject(e)}))}const un=t=>t instanceof Zr?t.toJSON():t;function dn(t,e){e=e||{};const r={};function n(t,e,r){return Ce.isPlainObject(t)&&Ce.isPlainObject(e)?Ce.merge.call({caseless:r},t,e):Ce.isPlainObject(e)?Ce.merge({},e):Ce.isArray(e)?e.slice():e}function i(t,e,r){return Ce.isUndefined(e)?Ce.isUndefined(t)?void 0:n(void 0,t,r):n(t,e,r)}function o(t,e){if(!Ce.isUndefined(e))return n(void 0,e)}function s(t,e){return Ce.isUndefined(e)?Ce.isUndefined(t)?void 0:n(void 0,t):n(void 0,e)}function a(r,i,o){return o in e?n(r,i):o in t?n(void 0,r):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>i(un(t),un(e),!0)};return Ce.forEach(Object.keys(Object.assign({},t,e)),(function(n){const o=l[n]||i,s=o(t[n],e[n],n);Ce.isUndefined(s)&&o!==a||(r[n]=s)})),r}const fn={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{fn[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));const pn={};fn.transitional=function(t,e,r){function n(t,e){return"[Axios v1.4.0] Transitional option '"+t+"'"+e+(r?". "+r:"")}return(r,i,o)=>{if(!1===t)throw new Tr(n(i," has been removed"+(e?" in "+e:"")),Tr.ERR_DEPRECATED);return e&&!pn[i]&&(pn[i]=!0,console.warn(n(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,i,o)}};var gn={assertOptions:function(t,e,r){if("object"!=typeof t)throw new Tr("options must be an object",Tr.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const o=n[i],s=e[o];if(s){const e=t[o],r=void 0===e||s(e,o,t);if(!0!==r)throw new Tr("option "+o+" must be "+r,Tr.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Tr("Unknown option "+o,Tr.ERR_BAD_OPTION)}},validators:fn};const mn=gn.validators;class yn{constructor(t){this.defaults=t,this.interceptors={request:new Ir,response:new Ir}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=dn(this.defaults,e);const{transitional:r,paramsSerializer:n,headers:i}=e;let o;void 0!==r&&gn.assertOptions(r,{silentJSONParsing:mn.transitional(mn.boolean),forcedJSONParsing:mn.transitional(mn.boolean),clarifyTimeoutError:mn.transitional(mn.boolean)},!1),null!=n&&(Ce.isFunction(n)?e.paramsSerializer={serialize:n}:gn.assertOptions(n,{encode:mn.function,serialize:mn.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase(),o=i&&Ce.merge(i.common,i[e.method]),o&&Ce.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=Zr.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let h,u=0;if(!a){const t=[hn.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,l),h=t.length,c=Promise.resolve(e);u<h;)c=c.then(t[u++],t[u++]);return c}h=s.length;let d=e;for(u=0;u<h;){const t=s[u++],e=s[u++];try{d=t(d)}catch(t){e.call(this,t);break}}try{c=hn.call(this,d)}catch(t){return Promise.reject(t)}for(u=0,h=l.length;u<h;)c=c.then(l[u++],l[u++]);return c}getUri(t){return Br(nn((t=dn(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}Ce.forEach(["delete","get","head","options"],(function(t){yn.prototype[t]=function(e,r){return this.request(dn(r||{},{method:t,url:e,data:(r||{}).data}))}})),Ce.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,i){return this.request(dn(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}yn.prototype[t]=e(),yn.prototype[t+"Form"]=e(!0)}));var vn=yn;class bn{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const r=this;this.promise.then((t=>{if(!r._listeners)return;let e=r._listeners.length;for(;e-- >0;)r._listeners[e](t);r._listeners=null})),this.promise.then=t=>{let e;const n=new Promise((t=>{r.subscribe(t),e=t})).then(t);return n.cancel=function(){r.unsubscribe(e)},n},t((function(t,n,i){r.reason||(r.reason=new en(t,n,i),e(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;const e=new bn((function(e){t=e}));return{token:e,cancel:t}}}var _n=bn;const wn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(wn).forEach((([t,e])=>{wn[e]=t}));var En=wn;const An=function t(e){const r=new vn(e),n=Gt(vn.prototype.request,r);return Ce.extend(n,vn.prototype,r,{allOwnKeys:!0}),Ce.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return t(dn(e,r))},n}(Yr);An.Axios=vn,An.CanceledError=en,An.CancelToken=_n,An.isCancel=tn,An.VERSION="1.4.0",An.toFormData=Lr,An.AxiosError=Tr,An.Cancel=An.CanceledError,An.all=function(t){return Promise.all(t)},An.spread=function(t){return function(e){return t.apply(null,e)}},An.isAxiosError=function(t){return Ce.isObject(t)&&!0===t.isAxiosError},An.mergeConfig=dn,An.AxiosHeaders=Zr,An.formToJSON=t=>Hr(Ce.isHTMLForm(t)?new FormData(t):t),An.HttpStatusCode=En,An.default=An;var $n=An;const Sn=async t=>{if(t.url)try{const e=await $n.get(t.url,{responseType:"text"});if("string"==typeof e.data)return e.data}catch(e){console.error("Could not fetch data from url",e,t)}else if(t.template)return t.template;return""};class Tn{constructor(){this.loadPartials=()=>{const t=[];var e;return(e=this.partials,Object.keys(e).sort(((t,r)=>(e[t].priority||0)-(e[r].priority||0)))).forEach((e=>{const r=this.partials[e];if(r.template){try{this.engine.eta.loadTemplate(e,r.template)}catch(t){console.error(t)}t.push(e)}})),t},this.addPartialsFromCard=async t=>{const e=await(async t=>{var e;const r={};if("custom:linked-lovelace-partials"===t.type){const n=null===(e=t.partials)||void 0===e?void 0:e.map((async t=>{t.key&&(r[t.key]={...t,template:await Sn(t)})}));await Promise.all(n||[])}return r})(t);return this.partials={...this.partials,...e},e},this.refresh()}refresh(){this.engine=new S,this.partials={}}}class xn{constructor(){this.templateController=new Jt,this.etaController=new Tn,this.registerTemplates=t=>{(t=>Object.keys(t).sort(((e,r)=>(t[e].ll_priority||0)-(t[r].ll_priority||0))))(t).forEach((e=>{const r=t[e];this.templateController.renderAndAddTemplate(e,r)}))},this.registerPartials=async t=>await this.etaController.addPartialsFromCard(t),this.getUpdatedDashboardConfig=async t=>{const e=await k.instance.api.getDashboardConfig(t);if(!e.views)return e;const r=e.views;return Object.keys(r).forEach((t=>{const e=r[t],n=[];if(e.cards&&(e.cards.forEach((t=>{const e=this.templateController.renderCard(t);n.push(e)})),r[t].cards=n),e.sections&&Array.isArray(e.sections))for(let t=0;t<e.sections.length;t++){const r=e.sections[t].cards;r&&Array.isArray(r)&&r.forEach(((r,n)=>{const i=this.templateController.renderCard(r);e.sections[t].cards[n]=i})),e.sections[t].cards=r}})),e.views=r,e},this.getUpdatedDashboardConfigs=async()=>{const t={},e=await k.instance.api.getDashboards();return await Promise.all(e.map((async e=>{const r=await this.getUpdatedDashboardConfig(e.url_path);t[e.url_path||"null"]=r}))),t}}get eta(){return this.etaController.engine.eta}}const Rn=t=>1!==(null==t?void 0:t.length)?"s":"";class Cn{constructor(){this.linkedLovelaceController=new xn,this.dashboardsToViews={},this.logs=[],this.forwardLogs=!1,this.addToLogs=({msg:t,level:e="INFO"},...r)=>{const n=(new Date).toISOString(),i=`[${e}]:${t}`;this.logs.push(i),this.forwardLogs&&((t,e,...r)=>{console[t](`%c  LINKED-LOVELACE-UI \n%c  ${e}   `,"color: orange; font-weight: bold; background: black","",...r)})(e.toLowerCase(),t,{timestamp:n},...r)},this.refresh=async()=>{this.addToLogs({msg:"Beginning Refresh"}),this.linkedLovelaceController=new xn,this.dashboardsToViews={},this.addToLogs({msg:"Discovering Dashboards"});const t=await k.instance.api.getDashboards();this.addToLogs({msg:`Discovered ${t.length} Dashboard${Rn(t)}`},t),this.addToLogs({msg:"Retrieving Dashboard Configs"});const e=await Promise.all(t.map((async t=>{var e;try{this.addToLogs({msg:`[url:"${window.location.origin}/${t.url_path}"] Retrieving details for dashboard`},t);const r=await k.instance.api.getDashboardConfig(t.url_path);return this.addToLogs({msg:`[url:"${window.location.origin}/${t.url_path}"] Retrieved ${null===(e=r.views)||void 0===e?void 0:e.length} View${Rn(r.views)} for dashboard`},t,r),[r,t]}catch(e){this.addToLogs({msg:`[url:"${window.location.origin}/${t.url_path}"] Failed to retrieve details for dashboard`,level:"ERROR"},t,e)}return[void 0,void 0]})));this.addToLogs({msg:`Retrieved ${e.length}/${t.length} Dashboard Config${Rn(t)}`},t,e),this.addToLogs({msg:"Discovering Templates and Partials within Dashboard Configs"});const r={};await Promise.all(e.map((async t=>{const e=t[0],n=t[1];if(null==e?void 0:e.views){const t=n.url_path?n.url_path:"";return this.dashboardsToViews[t]||(this.dashboardsToViews[t]={}),await Promise.all(e.views.map((async e=>{const i=e.path||"";return this.dashboardsToViews[t][i]||(this.dashboardsToViews[t][i]={id:i,templates:{},partials:{}}),this.addToLogs({msg:`[url:"${window.location.origin}/${n.url_path}"] [view:${e.title}] Discovering Templates and Partials`},n,e),await Promise.all((e.cards||[]).map((async o=>{o.ll_key&&(this.addToLogs({msg:`[url:"${window.location.origin}/${n.url_path}"] [view:${e.title}] [template:${o.ll_key}] [priority:${o.ll_priority||0}] Discovered Template`},n,e,o),r[o.ll_key]&&(r[o.ll_key].ll_priority||0)<(o.ll_priority||0)?this.addToLogs({msg:`[url:"${window.location.origin}/${n.url_path}"] [view:${e.title}] Template already exists with tag ${o.ll_key}`,level:"WARN"},n,e,o):r[o.ll_key]=o,this.dashboardsToViews[t][i].templates={...this.dashboardsToViews[t][i].templates,[o.ll_key]:o});const s=await this.linkedLovelaceController.registerPartials(o),a=Object.keys(s);a.length&&this.addToLogs({msg:`[url:"${window.location.origin}/${n.url_path}"] [view:${e.title}] Discovered ${a.length} Partial${Rn(a)}`},n,e,s),this.dashboardsToViews[t][i].partials=s})))})))}}))),this.addToLogs({msg:"Registering Partials"}),this.linkedLovelaceController.etaController.loadPartials(),S.instance.eta=this.linkedLovelaceController.eta,this.addToLogs({msg:"Registering Templates"}),this.linkedLovelaceController.registerTemplates(r)},this.update=async(t,e=!1)=>{const r=""===t?null:t,n=`[url:${t||""}]`,i=`[dryRun:${e?"enabled":"disabled"}]`;this.addToLogs({msg:`${i} ${n} Starting Update`},{dryRun:e,urlPath:t});try{this.addToLogs({msg:`${i} ${n} Rendering latest dashboard with templates and partials`},{dryRun:e,urlPath:t});const o=await this.linkedLovelaceController.getUpdatedDashboardConfig(r);if(e)this.addToLogs({msg:`${i} ${n} Would save latest rendered dashboard`},{dryRun:e,urlPath:t,config:o});else try{this.addToLogs({msg:`${i} ${n} Saving latest rendered dashboard`},{dryRun:e,urlPath:t,config:o}),await k.instance.api.setDashboardConfig(r,o)}catch(s){this.addToLogs({msg:`${i} ${n} Failed to update ${s}`,level:"ERROR"},{dryRun:e,urlPath:t,config:o}),console.error("Failed to update DB",r,o,s)}return this.addToLogs({msg:`${i} ${n} Finished Update`},{dryRun:e,urlPath:t}),o}catch(r){return this.addToLogs({msg:`${i} ${n} Failed to render latest dashboard with templates and partials`},{dryRun:e,urlPath:t}),null}},this.updateAll=async(t=!1)=>{const e=`[dryRun:${t?"enabled":"disabled"}]`;this.addToLogs({msg:`${e} Starting Update All`},{dryRun:t});const r=await k.instance.api.getDashboards(),n={};return await Promise.all(r.map((async e=>{const r=await this.update(e.url_path,t);n[e.url_path?e.url_path:""]=r}))),n}}}window.customCards=window.customCards||[],window.customCards.push({type:"linked-lovelace-template",name:"Linked Lovelace Template Card",description:"Help select an existing template for a card"});let kn=class extends Lt{constructor(){super(),this.handleClick=async()=>{const t=new Cn;await t.refresh(),await t.updateAll(),this._repaint()},this.loaded=!1}log(e,...r){this.config.debug&&t(e,...r)}_repaint(){this.loaded=!this.loaded}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._repaint()}static async getConfigElement(){return await Promise.resolve().then((function(){return qn})),document.createElement("linked-lovelace-template-editor")}static getStubConfig(){return{}}setConfig(t){if(!t)throw new Error(Wt("common.invalid_configuration"));t.test_gui&&zt().setEditMode(!0);this.config={...t,name:"Linked Lovelace Template"}}shouldUpdate(t){return!!this.config&&(void 0!==t.get("loaded")||Ht(this,t,!1))}render(){return pt`
      <ha-card .header=${this.config.name} tabindex="0" .label=${"Linked Lovelace Template"}
        class="linked-lovelace-container">
        <div class="card-content">
        <p>This card no longer runs updates for Linked Lovelace. Please create a new card with the new type <code>linked-lovelace-status</code>.</p>
        <p>Please use this card to place pre-created templates on your dashboards, and run an update with the new card.
        </div>
      </ha-card>
    `}static get styles(){return j`
      .linked-lovelace-container {
        background-color: rgba(0, 0, 0, 0);
        border: 1px solid;
      }
    `}};O([jt({attribute:!1})],kn.prototype,"hass",void 0),O([Bt()],kn.prototype,"loaded",void 0),O([Bt()],kn.prototype,"config",void 0),kn=O([Dt("linked-lovelace-template")],kn);var On="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Pn(t){t=t||{};this.Timeout=t.timeout||1,this.EditCost=t.editCost||4}Pn.Diff,Pn.prototype.main=function(t,e,r,n){void 0===n&&(n=this.Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Timeout);var i=n;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===r&&(r=!0);var o=r,s=this.commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.commonSuffix(t,e);var l=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var c=this.compute_(t,e,o,i);return a&&c.unshift([0,a]),l&&c.push([0,l]),this.cleanupMerge(c),c},Pn.prototype.compute_=function(t,e,r,n){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,s=t.length>e.length?e:t,a=o.indexOf(s);if(-1!=a)return i=[[1,o.substring(0,a)],[0,s],[1,o.substring(a+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==s.length)return[[-1,t],[1,e]];var l=this.halfMatch_(t,e);if(l){var c=l[0],h=l[1],u=l[2],d=l[3],f=l[4],p=this.main(c,u,r,n),g=this.main(h,d,r,n);return p.concat([[0,f]],g)}return r&&t.length>100&&e.length>100?this.lineMode_(t,e,n):this.bisect_(t,e,n)},Pn.prototype.lineMode_=function(t,e,r){t=(h=this.linesToChars_(t,e)).chars1,e=h.chars2;var n=h.lineArray,i=this.main(t,e,!1,r);this.charsToLines_(i,n),this.cleanupSemantic(i),i.push([0,""]);for(var o=0,s=0,a=0,l="",c="";o<i.length;){switch(i[o][0]){case 1:a++,c+=i[o][1];break;case-1:s++,l+=i[o][1];break;case 0:if(s>=1&&a>=1){i.splice(o-s-a,s+a),o=o-s-a;for(var h,u=(h=this.main(l,c,!1,r)).length-1;u>=0;u--)i.splice(o,0,h[u]);o+=h.length}a=0,s=0,l="",c=""}o++}return i.pop(),i},Pn.prototype.bisect_=function(t,e,r){for(var n=t.length,i=e.length,o=Math.ceil((n+i)/2),s=o,a=2*o,l=new Array(a),c=new Array(a),h=0;h<a;h++)l[h]=-1,c[h]=-1;l[s+1]=0,c[s+1]=0;for(var u=n-i,d=u%2!=0,f=0,p=0,g=0,m=0,y=0;y<o&&!((new Date).getTime()>r);y++){for(var v=-y+f;v<=y-p;v+=2){for(var b=s+v,_=(S=v==-y||v!=y&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1)-v;S<n&&_<i&&t.charAt(S)==e.charAt(_);)S++,_++;if(l[b]=S,S>n)p+=2;else if(_>i)f+=2;else if(d){if((A=s+u-v)>=0&&A<a&&-1!=c[A])if(S>=(E=n-c[A]))return this.bisectSplit_(t,e,S,_,r)}}for(var w=-y+g;w<=y-m;w+=2){for(var E,A=s+w,$=(E=w==-y||w!=y&&c[A-1]<c[A+1]?c[A+1]:c[A-1]+1)-w;E<n&&$<i&&t.charAt(n-E-1)==e.charAt(i-$-1);)E++,$++;if(c[A]=E,E>n)m+=2;else if($>i)g+=2;else if(!d){if((b=s+u-w)>=0&&b<a&&-1!=l[b]){var S;_=s+(S=l[b])-b;if(S>=(E=n-E))return this.bisectSplit_(t,e,S,_,r)}}}}return[[-1,t],[1,e]]},Pn.prototype.bisectSplit_=function(t,e,r,n,i){var o=t.substring(0,r),s=e.substring(0,n),a=t.substring(r),l=e.substring(n),c=this.main(o,s,!1,i),h=this.main(a,l,!1,i);return c.concat(h)},Pn.prototype.linesToChars_=function(t,e){var r=[],n={};function i(t){for(var e="",i=0,o=-1,s=r.length;o<t.length-1;){-1==(o=t.indexOf("\n",i))&&(o=t.length-1);var a=t.substring(i,o+1);i=o+1,(n.hasOwnProperty?n.hasOwnProperty(a):void 0!==n[a])?e+=String.fromCharCode(n[a]):(e+=String.fromCharCode(s),n[a]=s,r[s++]=a)}return e}return r[0]="",{chars1:i(t),chars2:i(e),lineArray:r}},Pn.prototype.charsToLines_=function(t,e){for(var r=0;r<t.length;r++){for(var n=t[r][1],i=[],o=0;o<n.length;o++)i[o]=e[n.charCodeAt(o)];t[r][1]=i.join("")}},Pn.prototype.commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,o=0;r<i;)t.substring(o,i)==e.substring(o,i)?o=r=i:n=i,i=Math.floor((n-r)/2+r);return i},Pn.prototype.commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var r=0,n=Math.min(t.length,e.length),i=n,o=0;r<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=r=i:n=i,i=Math.floor((n-r)/2+r);return i},Pn.prototype.commonOverlap_=function(t,e){var r=t.length,n=e.length;if(0==r||0==n)return 0;r>n?t=t.substring(r-n):r<n&&(e=e.substring(0,r));var i=Math.min(r,n);if(t==e)return i;for(var o=0,s=1;;){var a=t.substring(i-s),l=e.indexOf(a);if(-1==l)return o;s+=l,0!=l&&t.substring(i-s)!=e.substring(0,s)||(o=s,s++)}},Pn.prototype.halfMatch_=function(t,e){if(this.Timeout<=0)return null;var r=t.length>e.length?t:e,n=t.length>e.length?e:t;if(r.length<4||2*n.length<r.length)return null;var i=this;function o(t,e,r){for(var n,o,s,a,l=t.substring(r,r+Math.floor(t.length/4)),c=-1,h="";-1!=(c=e.indexOf(l,c+1));){var u=i.commonPrefix(t.substring(r),e.substring(c)),d=i.commonSuffix(t.substring(0,r),e.substring(0,c));h.length<d+u&&(h=e.substring(c-d,c)+e.substring(c,c+u),n=t.substring(0,r-d),o=t.substring(r+u),s=e.substring(0,c-d),a=e.substring(c+u))}return 2*h.length>=t.length?[n,o,s,a,h]:null}var s,a,l,c,h,u=o(r,n,Math.ceil(r.length/4)),d=o(r,n,Math.ceil(r.length/2));return u||d?(s=d?u&&u[4].length>d[4].length?u:d:u,t.length>e.length?(a=s[0],l=s[1],c=s[2],h=s[3]):(c=s[0],h=s[1],a=s[2],l=s[3]),[a,l,c,h,s[4]]):null},Pn.prototype.cleanupSemantic=function(t){for(var e=!1,r=[],n=0,i=null,o=0,s=0,a=0,l=0,c=0;o<t.length;)0==t[o][0]?(r[n++]=o,s=l,a=c,l=0,c=0,i=t[o][1]):(1==t[o][0]?l+=t[o][1].length:c+=t[o][1].length,i&&i.length<=Math.max(s,a)&&i.length<=Math.max(l,c)&&(t.splice(r[n-1],0,[-1,i]),t[r[n-1]+1][0]=1,n--,o=--n>0?r[n-1]:-1,s=0,a=0,l=0,c=0,i=null,e=!0)),o++;for(e&&this.cleanupMerge(t),this.cleanupSemanticLossless(t),o=1;o<t.length;){if(-1==t[o-1][0]&&1==t[o][0]){var h=t[o-1][1],u=t[o][1],d=this.commonOverlap_(h,u),f=this.commonOverlap_(u,h);d>=f?(d>=h.length/2||d>=u.length/2)&&(t.splice(o,0,[0,u.substring(0,d)]),t[o-1][1]=h.substring(0,h.length-d),t[o+1][1]=u.substring(d),o++):(f>=h.length/2||f>=u.length/2)&&(t.splice(o,0,[0,h.substring(0,f)]),t[o-1][0]=1,t[o-1][1]=u.substring(0,u.length-f),t[o+1][0]=-1,t[o+1][1]=h.substring(f),o++),o++}o++}},Pn.prototype.cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var r=t.charAt(t.length-1),n=e.charAt(0),i=r.match(Pn.nonAlphaNumericRegex_),o=n.match(Pn.nonAlphaNumericRegex_),s=i&&r.match(Pn.whitespaceRegex_),a=o&&n.match(Pn.whitespaceRegex_),l=s&&r.match(Pn.linebreakRegex_),c=a&&n.match(Pn.linebreakRegex_),h=l&&t.match(Pn.blanklineEndRegex_),u=c&&e.match(Pn.blanklineStartRegex_);return h||u?5:l||c?4:i&&!s&&a?3:s||a?2:i||o?1:0}for(var r=1;r<t.length-1;){if(0==t[r-1][0]&&0==t[r+1][0]){var n=t[r-1][1],i=t[r][1],o=t[r+1][1],s=this.commonSuffix(n,i);if(s){var a=i.substring(i.length-s);n=n.substring(0,n.length-s),i=a+i.substring(0,i.length-s),o=a+o}for(var l=n,c=i,h=o,u=e(n,i)+e(i,o);i.charAt(0)===o.charAt(0);){n+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var d=e(n,i)+e(i,o);d>=u&&(u=d,l=n,c=i,h=o)}t[r-1][1]!=l&&(l?t[r-1][1]=l:(t.splice(r-1,1),r--),t[r][1]=c,h?t[r+1][1]=h:(t.splice(r+1,1),r--))}r++}},Pn.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,Pn.whitespaceRegex_=/\s/,Pn.linebreakRegex_=/[\r\n]/,Pn.blanklineEndRegex_=/\n\r?\n$/,Pn.blanklineStartRegex_=/^\r?\n\r?\n/,Pn.prototype.cleanupEfficiency=function(t){for(var e=!1,r=[],n=0,i=null,o=0,s=!1,a=!1,l=!1,c=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.EditCost&&(l||c)?(r[n++]=o,s=l,a=c,i=t[o][1]):(n=0,i=null),l=c=!1):(-1==t[o][0]?c=!0:l=!0,i&&(s&&a&&l&&c||i.length<this.EditCost/2&&s+a+l+c==3)&&(t.splice(r[n-1],0,[-1,i]),t[r[n-1]+1][0]=1,n--,i=null,s&&a?(l=c=!0,n=0):(o=--n>0?r[n-1]:-1,l=c=!1),e=!0)),o++;e&&this.cleanupMerge(t)},Pn.prototype.cleanupMerge=function(t){t.push([0,""]);for(var e,r=0,n=0,i=0,o="",s="";r<t.length;)switch(t[r][0]){case 1:i++,s+=t[r][1],r++;break;case-1:n++,o+=t[r][1],r++;break;case 0:n+i>1?(0!==n&&0!==i&&(0!==(e=this.commonPrefix(s,o))&&(r-n-i>0&&0==t[r-n-i-1][0]?t[r-n-i-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),r++),s=s.substring(e),o=o.substring(e)),0!==(e=this.commonSuffix(s,o))&&(t[r][1]=s.substring(s.length-e)+t[r][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===n?t.splice(r-i,n+i,[1,s]):0===i?t.splice(r-n,n+i,[-1,o]):t.splice(r-n-i,n+i,[-1,o],[1,s]),r=r-n-i+(n?1:0)+(i?1:0)+1):0!==r&&0==t[r-1][0]?(t[r-1][1]+=t[r][1],t.splice(r,1)):r++,i=0,n=0,o="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(r=1;r<t.length-1;)0==t[r-1][0]&&0==t[r+1][0]&&(t[r][1].substring(t[r][1].length-t[r-1][1].length)==t[r-1][1]?(t[r][1]=t[r-1][1]+t[r][1].substring(0,t[r][1].length-t[r-1][1].length),t[r+1][1]=t[r-1][1]+t[r+1][1],t.splice(r-1,1),a=!0):t[r][1].substring(0,t[r+1][1].length)==t[r+1][1]&&(t[r-1][1]+=t[r+1][1],t[r][1]=t[r][1].substring(t[r+1][1].length)+t[r+1][1],t.splice(r+1,1),a=!0)),r++;a&&this.cleanupMerge(t)},Pn.prototype.xIndex=function(t,e){var r,n=0,i=0,o=0,s=0;for(r=0;r<t.length&&(1!==t[r][0]&&(n+=t[r][1].length),-1!==t[r][0]&&(i+=t[r][1].length),!(n>e));r++)o=n,s=i;return t.length!=r&&-1===t[r][0]?s:s+(e-o)},Pn.prototype.prettyHtml=function(t){for(var e=[],r=/&/g,n=/</g,i=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],l=t[s][1].replace(r,"&amp;").replace(n,"&lt;").replace(i,"&gt;").replace(o,"<br/>");switch(a){case 1:e[s]="<ins>"+l+"</ins>";break;case-1:e[s]="<del>"+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},Pn.prototype.text1=function(t){for(var e=[],r=0;r<t.length;r++)1!==t[r][0]&&(e[r]=t[r][1]);return e.join("")},Pn.prototype.text2=function(t){for(var e=[],r=0;r<t.length;r++)-1!==t[r][0]&&(e[r]=t[r][1]);return e.join("")},Pn.prototype.levenshtein=function(t){for(var e=0,r=0,n=0,i=0;i<t.length;i++){var o=t[i][0],s=t[i][1];switch(o){case 1:r+=s.length;break;case-1:n+=s.length;break;case 0:e+=Math.max(r,n),r=0,n=0}}return e+=Math.max(r,n)},Pn.prototype.toDelta=function(t){for(var e=[],r=0;r<t.length;r++)switch(t[r][0]){case 1:e[r]="+"+encodeURI(t[r][1]);break;case-1:e[r]="-"+t[r][1].length;break;case 0:e[r]="="+t[r][1].length}return e.join("\t").replace(/%20/g," ")},Pn.prototype.fromDelta=function(t,e){for(var r=[],n=0,i=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{r[n++]=[1,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+a);var c=t.substring(i,i+=l);"="==o[s].charAt(0)?r[n++]=[0,c]:r[n++]=[-1,c];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return r},On.diff=Pn,On.DIFF_DELETE=-1,On.DIFF_INSERT=1,On.DIFF_EQUAL=0;var Ln=Pn;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Un=2;let Dn=class extends class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,r){this._$Ct=t,this._$AM=e,this._$Ci=r}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}{constructor(t){if(super(t),this.et=mt,t.type!==Un)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===mt||null==t)return this.ft=void 0,this.et=t;if(t===gt)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.et)return this.ft;this.et=t;const e=[t];return e.raw=e,this.ft={_$litType$:this.constructor.resultType,strings:e,values:[]}}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */Dn.directiveName="unsafeHTML",Dn.resultType=1;const Nn=(t=>(...e)=>({_$litDirective$:t,values:e}))(Dn),jn=t=>JSON.stringify(t,null,2),Bn=(t={},e={})=>{try{const r=new Ln;return r.main(jn(t),jn(e),!1,0)}catch(t){return console.error(t),[]}},In=(t={},e={})=>{try{const r=new Ln,n=Bn(t,e);return r.prettyHtml(n)}catch(t){return console.error(t),"Could not create diff. Check browser logs for details."}};window.customCards=window.customCards||[],window.customCards.push({type:"linked-lovelace-status",name:"Linked Lovelace Status Card",description:"An overview card for Linked Lovelace"});let Mn=class extends Lt{constructor(){super(),this._partials={},this._templates={},this._dashboards={},this._diffedDashboards={},this._backedUpDashboardConfigs={},this._backupString="",this._loaded=!1,this._show_difference=!1,this._show_logs=!1,this._show_partials=!1,this._show_templates=!1,this._difference="",this._tabs={dashboards:{name:"Dashboards"},templates:{name:"Templates"},partials:{name:"Partials"},logs:{name:"Logs"}},this._tab=Object.keys(this._tabs)[0]||"",this._controller=new Cn,this.handleDryRun=async()=>{const t=await this._controller.updateAll(!0);this._difference=In(this._backedUpDashboardConfigs,t),this._diffedDashboards={},Object.keys(t).forEach((e=>{const r=t[e],n=this._backedUpDashboardConfigs[e];try{n&&r&&((t={},e={})=>Bn(t,e).length>1)(n,r)&&(this._diffedDashboards[e]=In(n,r))}catch(t){console.error(`Failed to make Diff of dashboard '${e}'`,n,r,e)}})),this._repaint()},this.handleClick=async()=>{var t;this._difference="";const e=(null===(t=this._controller)||void 0===t?void 0:t.forwardLogs)||!1;this._controller=new Cn,this._controller.forwardLogs=e,this._controller.addToLogs({msg:"Backing up current dashboard data. Ignore 'Update' Messages. Dry-Run is enabled."});const r={};await k.instance.api.getDashboards().then((async t=>Promise.all(t.map((async t=>await k.instance.api.getDashboardConfig(t.url_path).then((e=>{r[t.url_path?t.url_path:""]=e})).catch((e=>{console.error(`Failed to get dashboard at url ${t.url_path}`,t,e)}))))))).catch((t=>{console.error("Failed getting all existing dashboards. Contact developer via Github Issues.",t)})),this._backedUpDashboardConfigs=r,this._backupString="text/json;charset=utf-8,"+encodeURIComponent(jn(r)),this._controller.addToLogs({msg:"Backed up current dashboard data. Download as JSON via button."}),await this._controller.refresh(),this._partials=this._controller.linkedLovelaceController.etaController.partials,this._templates=this._controller.linkedLovelaceController.templateController.templates;(await k.instance.api.getDashboards()).forEach((t=>{this._dashboards[t.url_path?t.url_path:""]=t})),this._controller.addToLogs({msg:"Determining Changes. Ignore 'Update' Messages. Dry-Run is enabled."}),await this.handleDryRun(),this._controller.addToLogs({msg:"Determined Changes. Ignore 'Update' Messages. Dry-Run is enabled."}),this._controller.addToLogs({msg:"Ready for user input."}),this._loaded=!0,this._repaint()},this.toggleShowDryRun=async()=>{this._show_difference=!this._show_difference,this._repaint()},this.toggleShowLogs=async()=>{this._show_logs=!this._show_logs,this._repaint()},this.toggleShowPartials=async()=>{this._show_partials=!this._show_partials,this._repaint()},this.toggleShowTemplates=async()=>{this._show_templates=!this._show_templates,this._repaint()},this.toggleLogs=async()=>{this._controller&&(this._controller.forwardLogs=!this._controller.forwardLogs),this._repaint()},this.overwriteDashboard=async(t,e=!1)=>{(e||confirm(`This will overwrite the contents of the dashboard located at the url '${window.location.origin}/${t}'. Proceed at your own risk. Be sure to back up your system before making changes you are not sure about.`))&&(await this._controller.update(t),this._repaint())},this.handleRun=async()=>{if(confirm("This will overwrite the contents of all modified dashboards. Proceed at your own risk. Be sure to back up your system before making changes you are not sure about.")){const t=Object.keys(this._diffedDashboards);for(let e=0;e<t.length;e++)await this.overwriteDashboard(t[e],!0);this._repaint()}},this.loaded=!1}log(e,...r){this.config.debug&&t(e,...r)}_repaint(){this.loaded=!this.loaded}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._repaint()}static async getConfigElement(){return await Promise.resolve().then((function(){return Jn})),document.createElement("linked-lovelace-status-editor")}static getStubConfig(){return{}}setConfig(t){if(!t)throw new Error(Wt("common.invalid_configuration"));t.test_gui&&zt().setEditMode(!0);this.config={...t,name:"Linked Lovelace Status"}}shouldUpdate(t){return!!this.config&&(void 0!==t.get("loaded")||Ht(this,t,!1))}render(){var t,e,r,n,i;const o=Object.keys(this._diffedDashboards);return pt`
      <ha-card .header=${this.config.name} tabindex="0" .label=${"Linked Lovelace Template"}
        class="linked-lovelace-container">
        <div class="card-content">
        <div class="content">
        ${this._loaded?pt`
        <div class="tabs">
        ${Object.keys(this._tabs).map((t=>{const e=this._tabs[t];return pt`
            <div class="tab ${this._tab===t?"active":""}" @click="${()=>{this._tab=t,this._repaint()}}">${e.name}</div>
          `}))}
        </div>
        <div>
        <div class="tab-content ${"dashboards"===this._tab?"active":""}">
        </div>
        <div class="tab-content ${"templates"===this._tab?"active":""}">
          <div class="unsafe-html">
          <div class="accordion expanded">
          <span class="accordion-bar" @click=${this.toggleShowTemplates}><span class="icon">${this._show_templates?pt`&#9660;`:pt`&#9658;`} </span><span class="title">Templates</span></span>
          </div>
          ${Object.keys((null===(t=this._controller)||void 0===t?void 0:t.dashboardsToViews)||{}).map((t=>{var e;const r=null===(e=this._controller)||void 0===e?void 0:e.dashboardsToViews[t];return Object.keys(r||{}).map((e=>{const n=r[e],i=n.templates;return Object.keys(i||{}).map((e=>{const r=i[e];return pt`
              <a href="/${t||"lovelace"}/${n.id}">${e}</a>
              <pre class="${this._show_templates?"":"hidden"}">
              <code>
              ${Nn(In(r,r))}
              </code>
              </pre>
                `}))}))}))}
          </div>
        </div>
        <div class="tab-content ${"partials"===this._tab?"active":""}">
          <div class="unsafe-html">
          <div class="accordion expanded">
          <span class="accordion-bar" @click=${this.toggleShowPartials}><span class="icon">${this._show_partials?pt`&#9660;`:pt`&#9658;`} </span><span class="title">Partials</span></span>
          </div>
          ${Object.keys((null===(e=this._controller)||void 0===e?void 0:e.dashboardsToViews)||{}).map((t=>{var e;const r=null===(e=this._controller)||void 0===e?void 0:e.dashboardsToViews[t];return Object.keys(r||{}).map((e=>{const n=r[e],i=n.partials;return Object.keys(i||{}).map((e=>{const r=i[e];return pt`
            <a href="/${t||"lovelace"}/${n.id}">${e}</a>
            <pre class="${this._show_partials?"":"hidden"}">
            <code>
            ${Nn(In(r,r))}
            </code>
            </pre>
              `}))}))}))}
          </div>
        </div>
        <div class="tab-content ${"logs"===this._tab?"active":""}">
          <div class="unsafe-html">
          <div class="accordion expanded">
          <span class="accordion-bar" @click=${this.toggleShowLogs}><span class="icon">${this._show_logs?pt`&#9660;`:pt`&#9658;`} </span><span class="title">Logs</span></span>
          </div>
          <pre class="${this._show_logs?"":"hidden"}">
          <code>
          ${null===(r=this._controller)||void 0===r?void 0:r.logs.map((t=>pt`<p>${t}</p>`))}
          </code>
          </pre>
          </div>
        </div>
        </div>
        `:""}
        </div>
        ${o.length&&this._difference?pt`
        <div class="tab-content ${"dashboards"===this._tab?"active":""}">
        <div class="unsafe-html">
        <div class="accordion expanded">
        <span class="accordion-bar" @click=${this.toggleShowDryRun}><span class="icon">${this._show_difference?pt`&#9660;`:pt`&#9658;`} </span><span class="title">Preview Changes</span></span>
        </div>
        ${this._difference&&pt`
        ${this._show_difference?pt`<div>
        ${o.map((t=>{const e=this._dashboards[t],r=this._diffedDashboards[t];return pt`
          <div class="header">
            <p>Dashboard: ${e.title}</p>
            <ha-progress-button @click=${()=>{this.overwriteDashboard(t)}}>
                 Update
            </ha-progress-button>
          </div>
          <pre class="${this._show_difference?"":"hidden"}">
          <code>
          ${Nn(r)}
          </code>
          </pre>
          `}))}
        </div>`:""}
        `}
        </div>
        </div>
        `:""}
        <div class="card-actions">
          ${this._loaded?pt`
          <ha-progress-button @click=${this.toggleLogs}>
            ${(null===(i=this._controller)||void 0===i?void 0:i.forwardLogs)?"Silence Console Logging":"Activate Console Logging"}
          </ha-progress-button>
          <ha-progress-button @click=${this.handleClick}>
            Refresh
          </ha-progress-button>
          
          ${o.length?pt`<ha-progress-button @click=${this.handleRun}>
            Update All
          </ha-progress-button>`:""}
          `:pt`
          <ha-progress-button @click=${this.toggleLogs}>
            ${(null===(n=this._controller)||void 0===n?void 0:n.forwardLogs)?"Silence Console Logging":"Activate Console Logging"}
          </ha-progress-button>
          <ha-progress-button @click=${this.handleClick}>
            Load Data
          </ha-progress-button>
          `}
        </div>
      </ha-card>
    `}static get styles(){return j`
      .linked-lovelace-container {
        background-color: rgba(0, 0, 0, 0);
        border: 1px solid;
      }
      .content {
        padding: 0;
      }
      .tab-content {
        display: none;
        &.active {
          display: block;
          padding: 16px 0;
        }
      }
      .tabs {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        .tab {
          padding: 4px 8px;
          cursor: pointer;
          border-left: 0.5px solid var(--text-primary-color);
          border-right: 0.5px solid var(--text-primary-color);
          border-bottom: 1px solid var(--text-primary-color);
          &:not(.active):hover {
            background-color: var(--secondary-background-color);
          }
          &.active {
            background-color: var(--secondary-background-color);
          }
          &.active:hover {
            background-color: var(--fc-button-hover-bg-color);
            cursor: not-allowed;
          }
          &:not(.active):active {
            background-color: var(--fc-button-hover-bg-color);
          }
        }
      }
      .accordion.expanded {
        & .accordion-bar {
          cursor: pointer;
          font-size: 18px;          
        }
        & .icon {
          transform: rotate(-90deg);
        }
      }
      .header {
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        align-items: center;
      }
      .download {
        text-decoration: none;
      }
      .unsafe-html {
        pre {
          overflow: auto;
          max-height: 400px;
          background-color: var(--text-primary-color);
          &.hidden {
            display: none;
          }
        }
        code {
          max-width: 100%;
          background-color: var(--text-primary-color);
          color: var(--card-background-color);
          display: flex;
          flex-direction: column;
          justify-content: flex-start;
          align-items: flex-start;
          p {
            margin: 0;
          }
        }
        del {
          background-color: var(--error-color);
        }
        ins {
          background-color: var(--success-color);
        }
      }
    `}};O([Bt()],Mn.prototype,"_partials",void 0),O([Bt()],Mn.prototype,"_templates",void 0),O([Bt()],Mn.prototype,"_dashboards",void 0),O([Bt()],Mn.prototype,"_diffedDashboards",void 0),O([Bt()],Mn.prototype,"_backedUpDashboardConfigs",void 0),O([Bt()],Mn.prototype,"_backupString",void 0),O([Bt()],Mn.prototype,"_loaded",void 0),O([Bt()],Mn.prototype,"_show_difference",void 0),O([Bt()],Mn.prototype,"_show_logs",void 0),O([Bt()],Mn.prototype,"_show_partials",void 0),O([Bt()],Mn.prototype,"_show_templates",void 0),O([Bt()],Mn.prototype,"_difference",void 0),O([Bt()],Mn.prototype,"_tabs",void 0),O([Bt()],Mn.prototype,"_tab",void 0),O([jt({attribute:!1})],Mn.prototype,"hass",void 0),O([Bt()],Mn.prototype,"loaded",void 0),O([Bt()],Mn.prototype,"config",void 0),Mn=O([Dt("linked-lovelace-status")],Mn),window.customCards=window.customCards||[],window.customCards.push({type:"linked-lovelace-partials",name:"Linked Lovelace Partials Card",description:"Use this card to add ETA partials"});let Fn=class extends Lt{constructor(){super(),this.loaded=!1}log(e,...r){this.config.debug&&t(e,...r)}_repaint(){this.loaded=!this.loaded}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._repaint()}static getStubConfig(){return{}}setConfig(t){if(!t)throw new Error(Wt("common.invalid_configuration"));t.test_gui&&zt().setEditMode(!0);this.config={...t,name:"Linked Lovelace Eta JS Partials"}}shouldUpdate(t){return!!this.config&&(void 0!==t.get("loaded")||Ht(this,t,!1))}render(){return pt`
      <ha-card .header=${this.config.name} tabindex="0" .label=${"Linked Lovelace Eta JS Partials"}
        class="linked-lovelace-container">
        <div class="card-content">${Object.values(this.config.partials||{}).map((t=>t.key)).join(" ")}</div>
        <div class="card-actions">
        </div>
      </ha-card>
    `}static get styles(){return j`
      .linked-lovelace-container {
        background-color: rgba(0, 0, 0, 0);
        border: 1px solid;
      }
    `}};var Hn;O([jt({attribute:!1})],Fn.prototype,"hass",void 0),O([Bt()],Fn.prototype,"loaded",void 0),O([Bt()],Fn.prototype,"config",void 0),Fn=O([Dt("linked-lovelace-partials")],Fn),Hn=()=>{t("Version: 2.2.5")},(async()=>{for(;void 0===customElements.get("home-assistant");)await new Promise((t=>window.setTimeout(t,100)));R.instance.log("initalized"),Hn&&Hn()})();
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const zn=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function Vn(t){return class extends t{createRenderRoot(){const t=this.constructor,{registry:e,elementDefinitions:r,shadowRootOptions:n}=t;r&&!e&&(t.registry=new CustomElementRegistry,Object.entries(r).forEach((([e,r])=>t.registry.define(e,r))));const i=this.renderOptions.creationScope=this.attachShadow({...n,customElements:t.registry});return((t,e)=>{zn?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const r=document.createElement("style"),n=window.litNonce;void 0!==n&&r.setAttribute("nonce",n),r.textContent=e.cssText,t.appendChild(r)}))})(i,this.constructor.elementStyles),i}}}let Yn=class extends(Vn(Lt)){constructor(){super(...arguments),this._loaded=!1,this._controller=new Cn,this._initialized=!1}setConfig(t){this._config=t,this.loadCardHelpers()}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),await this._controller.refresh(),this._loaded=!0}shouldUpdate(){return this._initialized||this._initialize(),!0}get _template(){var t;return(null===(t=this._config)||void 0===t?void 0:t.ll_template)||""}renderTemplates(){if(!this._loaded)return pt`<p>loading</p>`;const t=Object.keys(this._controller.linkedLovelaceController.templateController.templates);return t.length?pt`
      <p>Discovered Templates</p>
      <div class="linked-lovelace-chips">
        ${t.map((t=>pt`<button .value=${t}
          .configValue=${"ll_template"}
          @click=${this._valueChanged}>${t}</button>`))}
      </div>
    `:pt`
      <p>Discovered Templates:</p>
      <div class="linked-lovelace-chips">
        No templates found/created.
      </div>
    `}render(){return this.hass&&this._helpers?pt`
      <div class="linked-lovelace-config">
        <span>Read the following carefully. After clicking an option, all of this text will disappear.</span>
        <ol>
        <li>Click a template below to swap the contents of this card with the contents of the template.</li>
        <li>Variables can be provided in a dictionary under the top-level key <code>ll_context</code>.<ul><li>Examples may be provided automatically.</li><li>All other content in the card below the linked lovelace keys will be replaced.</li><li>Templating provided by <a href="https://eta.js.org/" target="_blank">ETA JS</a></li></ul></li>
        <li>The card may be broken when first saved. This is normal.</li>
        <li>It will be updated the next time a user performs an update from the Linked Lovelace Status card<ul><li>You may want to do this after placing all the template cards you need.</li></li>
        </ol>
        <p></p>
        ${this.renderTemplates()}
      </div>
    `:pt``}_initialize(){void 0!==this.hass&&void 0!==this._config&&void 0!==this._helpers&&this._loaded&&(this._initialized=!0)}async loadCardHelpers(){this._helpers=await window.loadCardHelpers()}_valueChanged(t){var e;if(!this._config||!this.hass)return;const r=t.target;if(this[`_${r.configValue}`]!==r.value){if(r.configValue)if(""===r.value){const t={...this._config};delete t[r.configValue],"ll_template"===r.configValue&&(t.ll_context=void 0),this._config=t}else if("ll_template"===r.configValue){const t=null===(e=this._controller)||void 0===e?void 0:e.linkedLovelaceController.templateController.templates[r.value];this._config={[r.configValue]:void 0!==r.checked?r.checked:r.value,...t,[r.configValue]:void 0!==r.checked?r.checked:r.value}}else this._config={...this._config,[r.configValue]:void 0!==r.checked?r.checked:r.value};!function(t,e,r,n){n=n||{},r=null==r?{}:r;var i=new Event(e,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});i.detail=r,t.dispatchEvent(i)}(this,"config-changed",{config:this._config})}}};Yn.elementDefinitions={},Yn.styles=j`
    .linked-lovelace-config {
      display: flex;
      flex-direction: column;
    }
    .linked-lovelace-config > * {
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .linked-lovelace-chips {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      flex-wrap: wrap;
    }
    mwc-select,
    mwc-textfield {
      margin-bottom: 16px;
      display: block;
    }
    mwc-formfield {
      padding-bottom: 8px;
    }
    mwc-switch {
      --mdc-theme-secondary: var(--switch-checked-color);
    }
    ul {
      max-height: 500px;
      overflow-y: scroll;
    }
  `,O([jt({attribute:!1})],Yn.prototype,"hass",void 0),O([Bt()],Yn.prototype,"_config",void 0),O([Bt()],Yn.prototype,"_helpers",void 0),O([Bt()],Yn.prototype,"_loaded",void 0),Yn=O([Dt("linked-lovelace-template-editor")],Yn);var qn=Object.freeze({__proto__:null,get LinkedLovelaceTemplateCardEditor(){return Yn}});let Wn=class extends(Vn(Lt)){constructor(){super(...arguments),this._loaded=!1,this._initialized=!1}setConfig(t){this._config=t,this.loadCardHelpers()}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._loaded=!0}shouldUpdate(){return this._initialized||this._initialize(),!0}get _template(){var t;return(null===(t=this._config)||void 0===t?void 0:t.template)||""}renderTemplates(){return this._loaded?pt`
      <p>Loaded</p>
    `:pt`<p>loading</p>`}render(){return this.hass&&this._helpers?pt`
      <div class="linked-lovelace-config">
        </div>
    `:pt``}_initialize(){void 0!==this.hass&&void 0!==this._config&&void 0!==this._helpers&&this._loaded&&(this._initialized=!0)}async loadCardHelpers(){this._helpers=await window.loadCardHelpers()}};Wn.elementDefinitions={},Wn.styles=j`
    .linked-lovelace-config {
      display: flex;
      flex-direction: column;
    }
    .linked-lovelace-config > * {
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .linked-lovelace-chips {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      flex-wrap: wrap;
    }
    mwc-select,
    mwc-textfield {
      margin-bottom: 16px;
      display: block;
    }
    mwc-formfield {
      padding-bottom: 8px;
    }
    mwc-switch {
      --mdc-theme-secondary: var(--switch-checked-color);
    }
    ul {
      max-height: 500px;
      overflow-y: scroll;
    }
  `,O([jt({attribute:!1})],Wn.prototype,"hass",void 0),O([Bt()],Wn.prototype,"_config",void 0),O([Bt()],Wn.prototype,"_helpers",void 0),O([Bt()],Wn.prototype,"_loaded",void 0),Wn=O([Dt("linked-lovelace-status-editor")],Wn);var Jn=Object.freeze({__proto__:null,get LinkedLovelaceStatusCardEditor(){return Wn}});
