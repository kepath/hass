const t=(t,...e)=>{console.info(`%c  LINKED-LOVELACE-UI \n%c  ${t}   `,"color: orange; font-weight: bold; background: black","font-weight: bold;",...e)};class e{constructor(t){this.cache=void 0,this.cache=t}define(t,e){this.cache[t]=e}get(t){return this.cache[t]}remove(t){delete this.cache[t]}reset(){this.cache={}}load(t){this.cache={...this.cache,...t}}}class n extends Error{constructor(t){super(t),this.name="Eta Error"}}function r(t,e,r){const i=e.slice(0,r).split(/\n/),o=i.length,s=i[o-1].length+1;throw t+=" at line "+o+" col "+s+":\n\n  "+e.split(/\n/)[o-1]+"\n  "+Array(s).join(" ")+"^",new n(t)}function i(t,e,r,i){const o=e.split("\n"),s=Math.max(r-3,0),a=Math.min(o.length,r+3),l=i,c=o.slice(s,a).map((function(t,e){const n=e+s+1;return(n==r?" >> ":"    ")+n+"| "+t})).join("\n"),h=new n((l?l+":"+r+"\n":"line "+r+"\n")+c+"\n\n"+t.message);throw h.name=t.name,h}const o=async function(){}.constructor;function s(t,e){const r=this.config,i=e&&e.async?o:Function;try{return new i(r.varName,"options",this.compileToString.call(this,t,e))}catch(r){throw r instanceof SyntaxError?new n("Bad template syntax\n\n"+r.message+"\n"+Array(r.message.length+1).join("=")+"\n"+this.compileToString.call(this,t,e)+"\n"):r}}function a(t,e){const n=this.config,r=e&&e.async,i=this.parse.call(this,t);let o=`${n.functionHeader}\nlet include = (template, data) => this.render(template, data, options);\nlet includeAsync = (template, data) => this.renderAsync(template, data, options);\n\nlet __eta = {res: "", e: this.config.escapeFunction, f: this.config.filterFunction${n.debug?', line: 1, templateStr: "'+t.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n")+'"':""}};\n\nfunction layout(path, data) {\n  __eta.layout = path;\n  __eta.layoutData = data;\n}${n.debug?"try {":""}${n.useWith?"with("+n.varName+"||{}){":""}\n\n${l.call(this,i)}\nif (__eta.layout) {\n  __eta.res = ${r?"await includeAsync":"include"} (__eta.layout, {...${n.varName}, body: __eta.res, ...__eta.layoutData});\n}\n${n.useWith?"}":""}${n.debug?"} catch (e) { this.RuntimeErr(e, __eta.templateStr, __eta.line, options.filepath) }":""}\nreturn __eta.res;\n`;if(n.plugins)for(let t=0;t<n.plugins.length;t++){const e=n.plugins[t];e.processFnString&&(o=e.processFnString(o,n))}return o}function l(t){const e=this.config;let n=0;const r=t.length;let i="";for(;n<r;n++){const r=t[n];if("string"==typeof r){i+="__eta.res+='"+r+"'\n"}else{const t=r.t;let n=r.val||"";e.debug&&(i+="__eta.line="+r.lineNo+"\n"),"r"===t?(e.autoFilter&&(n="__eta.f("+n+")"),i+="__eta.res+="+n+"\n"):"i"===t?(e.autoFilter&&(n="__eta.f("+n+")"),e.autoEscape&&(n="__eta.e("+n+")"),i+="__eta.res+="+n+"\n"):"e"===t&&(i+=n+"\n")}}return i}const c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(t){return c[t]}const u={autoEscape:!0,autoFilter:!1,autoTrim:[!1,"nl"],cache:!1,cacheFilepaths:!0,debug:!1,escapeFunction:function(t){const e=String(t);return/[&<>"']/.test(e)?e.replace(/[&<>"']/g,h):e},filterFunction:t=>String(t),functionHeader:"",parse:{exec:"",interpolate:"=",raw:"~"},plugins:[],rmWhitespace:!1,tags:["<%","%>"],useWith:!1,varName:"it"},d=/`(?:\\[\s\S]|\${(?:[^{}]|{(?:[^{}]|{[^}]*})*})*}|(?!\${)[^\\`])*`/g,f=/'(?:\\[\s\w"'\\`]|[^\n\r'\\])*?'/g,p=/"(?:\\[\s\w"'\\`]|[^\n\r"\\])*?"/g;function g(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function m(t,e){return t.slice(0,e).split("\n").length}function y(t){const e=this.config;let n=[],i=!1,o=0;const s=e.parse;if(e.plugins)for(let n=0;n<e.plugins.length;n++){const r=e.plugins[n];r.processTemplate&&(t=r.processTemplate(t,e))}function a(t,r){t&&(t=function(t,e,n,r){let i,o;return Array.isArray(e.autoTrim)?(i=e.autoTrim[1],o=e.autoTrim[0]):i=o=e.autoTrim,(n||!1===n)&&(i=n),(r||!1===r)&&(o=r),o||i?"slurp"===i&&"slurp"===o?t.trim():("_"===i||"slurp"===i?t=t.trimStart():"-"!==i&&"nl"!==i||(t=t.replace(/^(?:\r\n|\n|\r)/,"")),"_"===o||"slurp"===o?t=t.trimEnd():"-"!==o&&"nl"!==o||(t=t.replace(/(?:\r\n|\n|\r)$/,"")),t):t}(t,e,i,r),t&&(t=t.replace(/\\|'/g,"\\$&").replace(/\r\n|\n|\r/g,"\\n"),n.push(t)))}e.rmWhitespace&&(t=t.replace(/[\r\n]+/g,"\n").replace(/^\s+|\s+$/gm,"")),d.lastIndex=0,f.lastIndex=0,p.lastIndex=0;const l=[s.exec,s.interpolate,s.raw].reduce((function(t,e){return t&&e?t+"|"+g(e):e?g(e):t}),""),c=new RegExp(g(e.tags[0])+"(-|_)?\\s*("+l+")?\\s*","g"),h=new RegExp("'|\"|`|\\/\\*|(\\s*(-|_)?"+g(e.tags[1])+")","g");let u;for(;u=c.exec(t);){const l=t.slice(o,u.index);o=u[0].length+u.index;const g=u[1],y=u[2]||"";let v;a(l,g),h.lastIndex=o;let _=!1;for(;v=h.exec(t);){if(v[1]){const e=t.slice(o,v.index);c.lastIndex=o=h.lastIndex,i=v[2];_={t:y===s.exec?"e":y===s.raw?"r":y===s.interpolate?"i":"",val:e};break}{const e=v[0];if("/*"===e){const e=t.indexOf("*/",h.lastIndex);-1===e&&r("unclosed comment",t,v.index),h.lastIndex=e}else if("'"===e){f.lastIndex=v.index;f.exec(t)?h.lastIndex=f.lastIndex:r("unclosed string",t,v.index)}else if('"'===e){p.lastIndex=v.index;p.exec(t)?h.lastIndex=p.lastIndex:r("unclosed string",t,v.index)}else if("`"===e){d.lastIndex=v.index;d.exec(t)?h.lastIndex=d.lastIndex:r("unclosed string",t,v.index)}}}_?(e.debug&&(_.lineNo=m(t,u.index)),n.push(_)):r("unclosed tag",t,u.index)}if(a(t.slice(o,t.length),!1),e.plugins)for(let t=0;t<e.plugins.length;t++){const r=e.plugins[t];r.processAST&&(n=r.processAST(n,e))}return n}function v(t,e){const r=e&&e.async?this.templatesAsync:this.templatesSync;if(this.resolvePath&&this.readFile&&!t.startsWith("@")){const t=e.filepath,n=r.get(t);if(this.config.cache&&n)return n;{const n=this.readFile(t),i=this.compile(n,e);return this.config.cache&&r.define(t,i),i}}{const e=r.get(t);if(e)return e;throw new n("Failed to get template '"+t+"'")}}function _(t,e,n){let r;const i={...n,async:!1};"string"==typeof t?(this.resolvePath&&this.readFile&&!t.startsWith("@")&&(i.filepath=this.resolvePath(t,i)),r=v.call(this,t,i)):r=t;return r.call(this,e,i)}function b(t,e,n){let r;const i={...n,async:!0};"string"==typeof t?(this.resolvePath&&this.readFile&&!t.startsWith("@")&&(i.filepath=this.resolvePath(t,i)),r=v.call(this,t,i)):r=t;const o=r.call(this,e,i);return Promise.resolve(o)}function w(t,e){const n=this.compile(t,{async:!1});return _.call(this,n,e)}function A(t,e){const n=this.compile(t,{async:!0});return b.call(this,n,e)}class E extends class{constructor(t){this.config=void 0,this.RuntimeErr=i,this.compile=s,this.compileToString=a,this.parse=y,this.render=_,this.renderAsync=b,this.renderString=w,this.renderStringAsync=A,this.filepathCache={},this.templatesSync=new e({}),this.templatesAsync=new e({}),this.resolvePath=null,this.readFile=null,this.config=t?{...u,...t}:{...u}}configure(t){this.config={...this.config,...t}}withConfig(t){return{...this,config:{...this.config,...t}}}loadTemplate(t,e,n){if("string"==typeof e){(n&&n.async?this.templatesAsync:this.templatesSync).define(t,this.compile(e,n))}else{let r=this.templatesSync;("AsyncFunction"===e.constructor.name||n&&n.async)&&(r=this.templatesAsync),r.define(t,e)}}}{}const $=new E({varName:"context",autoEscape:!1,rmWhitespace:!0});class S{constructor(){this.eta=$,this.refresh()}static get instance(){return this.self||(this.self=new S),this.self}refresh(){this.eta=new E({varName:"context",autoEscape:!1})}}const x=/(?<!\\)\$([a-z|A-Z|0-9|\_]+)(?!\\)\$/gm,T=t=>{const e=t.ll_context||{};return JSON.stringify(t).replaceAll(x,((t,n)=>(void 0===e[n]&&(e[n]=""),e[n]||t))),t.ll_context={...t.ll_context,...e},0==Object.keys(t.ll_context||{}).length&&delete t.ll_context,t},R=(t,e={})=>{const n=t.ll_template,r=t.ll_context,i=Object.assign({},t);if(n&&e[n]){if(r){const o={...e[n]};delete o.ll_key;let s=JSON.stringify(o);s=S.instance.eta.renderString(s,r);try{t=JSON.parse(s)}catch(r){console.error(r),t=e[n]}Object.keys(i.ll_keys||{}).forEach((e=>{const n=(i.ll_keys||{})[e];if(n){const e=r?r[n]:void 0;e&&(t[n]=e)}}));const a={};Object.keys(i.ll_keys||{}).forEach((n=>{const i=Object.assign({},r);if("object"==typeof i[n])if(Array.isArray(i[n])&&"object"==typeof i[n][0]){a[n]=[];for(let t=0;t<i[n].length;t++){const r={...i[n][t].ll_context,...i};delete r[n];const o={ll_context:r,...{...i[n][t]},ll_data:r};void 0!==typeof o.ll_context&&0==Object.keys(o.ll_context).length&&delete o.ll_context;const s=R(o,e);a[n].push(s)}}else try{const t={...i};delete t[n];const r={...i[n],ll_context:t};a[n]=R(r,e)}catch(e){console.log(`Couldn't Update card key '${n}. Provide the following object when submitting an issue to the developer.`,t,e)}})),Object.keys(a).forEach((e=>{t[e]=a[e]})),t={...{ll_context:r,ll_keys:i.ll_keys,...t},ll_context:r,ll_keys:i.ll_keys}}else t=e[n];t={...{ll_template:n,ll_keys:i.ll_keys,...t},ll_template:n,ll_keys:i.ll_keys}}else{if(t.sections&&Array.isArray(t.sections))for(let n=0;n<t.sections.length;n++)if(t.sections[n].cards&&Array.isArray(t.sections[n].cards))for(let i=0;i<t.sections[n].cards.length;i++){const o=t.sections[n].cards[i];r&&(o.ll_context={...o.ll_context||{},...r}),t.sections[n].cards[i]=R(o,e)}if(Array.isArray(t.cards)){const n=[];t.cards.forEach((t=>{r&&(t.ll_context={...t.ll_context||{},...r}),n.push(Object.assign({},R(t,e)))})),t.cards=n}t.card&&!Array.isArray(t.card)&&(r&&(t.card.ll_context={...t.card.ll_context||{},...r}),t.card=Object.assign({},R(t.card,e)));const n=Object.keys(t),i={};n.forEach((n=>{if("card"!==n&&null!==t[n]&&"object"==typeof t[n])try{i[n]=R(t[n],e)}catch(e){console.log(`Couldn't Update card key '${n}'. Provide the following object when submitting an issue to the developer.`,t,e)}})),Object.keys(i).forEach((e=>{t[e]=i[e]}))}return t.hasOwnProperty("ll_keys")&&void 0===t.ll_keys&&delete t.ll_keys,t},C=()=>document.getElementsByTagName("home-assistant")[0].hass;class k{constructor(){this.debug=!1,this.dryRun=!1}log(e,...n){this.debug&&t(e,...n)}static get instance(){return this.self||(C(),this.self=new k),this.self}}class O{constructor(e){this.getDashboards=async()=>(k.instance.debug&&t("Getting Lovelace User-Created Dashboards"),this.hass.callWS({type:"lovelace/dashboards/list"}).then((t=>[{url_path:"",id:"overview",title:"Overview",mode:"unknown",require_admin:!1,show_in_sidebar:!1},...t]))),this.getDashboardConfig=async e=>(k.instance.debug&&t(`Getting Lovelace User-Created Dashboard: ${e}`),this.hass.callWS({type:"lovelace/config",url_path:e||null}).then((t=>({...t,views:t.views||[]})))),this.toggleDashboardAsTemplate=async(t,e)=>{const n=await this.getDashboardConfig(t);return n.template=void 0===e?!Boolean(n.template):e,void 0===n.template||n.template||delete n.template,await this.setDashboardConfig(t,n),n},this.setDashboardConfig=async(e,n)=>(k.instance.debug&&t(`${k.instance.dryRun?"Not Actually ":""}Setting Lovelace User-Created Dashboard: ${e}`,n),k.instance.dryRun?null:this.hass.callWS({type:"lovelace/config/save",url_path:e,config:n})),this.hass=e}}class P{constructor(t){this.hass=t,this.api=new O(t)}static get instance(){if(this.self)return this.self;const t=C();return this.self=new P(t),this.self}}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
function L(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}const U=window,D=U.ShadowRoot&&(void 0===U.ShadyCSS||U.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,N=Symbol(),j=new WeakMap;let B=class{constructor(t,e,n){if(this._$cssResult$=!0,n!==N)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(D&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=j.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&j.set(e,t))}return t}toString(){return this.cssText}};const I=(t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,r)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[r+1]),t[0]);return new B(n,t,N)},M=D?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return(t=>new B("string"==typeof t?t:t+"",void 0,N))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var F;const H=window,z=H.trustedTypes,V=z?z.emptyScript:"",Y=H.reactiveElementPolyfillSupport,q={toAttribute(t,e){switch(e){case Boolean:t=t?V:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},W=(t,e)=>e!==t&&(e==e||t==t),J={attribute:!0,type:String,converter:q,reflect:!1,hasChanged:W},K="finalized";let G=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,n)=>{const r=this._$Ep(n,e);void 0!==r&&(this._$Ev.set(r,n),t.push(r))})),t}static createProperty(t,e=J){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const n="symbol"==typeof t?Symbol():"__"+t,r=this.getPropertyDescriptor(t,n,e);void 0!==r&&Object.defineProperty(this.prototype,t,r)}}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(r){const i=this[t];this[e]=r,this.requestUpdate(t,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||J}static finalize(){if(this.hasOwnProperty(K))return!1;this[K]=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of e)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(M(t))}else void 0!==t&&e.push(M(t));return e}static _$Ep(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,n;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(n=t.hostConnected)||void 0===n||n.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{D?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const n=document.createElement("style"),r=U.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=e.cssText,t.appendChild(n)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EO(t,e,n=J){var r;const i=this.constructor._$Ep(t,n);if(void 0!==i&&!0===n.reflect){const o=(void 0!==(null===(r=n.converter)||void 0===r?void 0:r.toAttribute)?n.converter:q).toAttribute(e,n.type);this._$El=t,null==o?this.removeAttribute(i):this.setAttribute(i,o),this._$El=null}}_$AK(t,e){var n;const r=this.constructor,i=r._$Ev.get(t);if(void 0!==i&&this._$El!==i){const t=r.getPropertyOptions(i),o="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(n=t.converter)||void 0===n?void 0:n.fromAttribute)?t.converter:q;this._$El=i,this[i]=o.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,n){let r=!0;void 0!==t&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||W)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,n))):r=!1),!this.isUpdatePending&&r&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(n)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(n)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Z;G[K]=!0,G.elementProperties=new Map,G.elementStyles=[],G.shadowRootOptions={mode:"open"},null==Y||Y({ReactiveElement:G}),(null!==(F=H.reactiveElementVersions)&&void 0!==F?F:H.reactiveElementVersions=[]).push("1.6.2");const X=window,Q=X.trustedTypes,tt=Q?Q.createPolicy("lit-html",{createHTML:t=>t}):void 0,et=`lit$${(Math.random()+"").slice(9)}$`,nt="?"+et,rt=`<${nt}>`,it=document,ot=()=>it.createComment(""),st=t=>null===t||"object"!=typeof t&&"function"!=typeof t,at=Array.isArray,lt="[ \t\n\f\r]",ct=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ht=/-->/g,ut=/>/g,dt=RegExp(`>|${lt}(?:([^\\s"'>=/]+)(${lt}*=${lt}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),ft=/'/g,pt=/"/g,gt=/^(?:script|style|textarea|title)$/i,mt=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),yt=Symbol.for("lit-noChange"),vt=Symbol.for("lit-nothing"),_t=new WeakMap,bt=it.createTreeWalker(it,129,null,!1),wt=(t,e)=>{const n=t.length-1,r=[];let i,o=2===e?"<svg>":"",s=ct;for(let e=0;e<n;e++){const n=t[e];let a,l,c=-1,h=0;for(;h<n.length&&(s.lastIndex=h,l=s.exec(n),null!==l);)h=s.lastIndex,s===ct?"!--"===l[1]?s=ht:void 0!==l[1]?s=ut:void 0!==l[2]?(gt.test(l[2])&&(i=RegExp("</"+l[2],"g")),s=dt):void 0!==l[3]&&(s=dt):s===dt?">"===l[0]?(s=null!=i?i:ct,c=-1):void 0===l[1]?c=-2:(c=s.lastIndex-l[2].length,a=l[1],s=void 0===l[3]?dt:'"'===l[3]?pt:ft):s===pt||s===ft?s=dt:s===ht||s===ut?s=ct:(s=dt,i=void 0);const u=s===dt&&t[e+1].startsWith("/>")?" ":"";o+=s===ct?n+rt:c>=0?(r.push(a),n.slice(0,c)+"$lit$"+n.slice(c)+et+u):n+et+(-2===c?(r.push(void 0),e):u)}const a=o+(t[n]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==tt?tt.createHTML(a):a,r]};class At{constructor({strings:t,_$litType$:e},n){let r;this.parts=[];let i=0,o=0;const s=t.length-1,a=this.parts,[l,c]=wt(t,e);if(this.el=At.createElement(l,n),bt.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(r=bt.nextNode())&&a.length<s;){if(1===r.nodeType){if(r.hasAttributes()){const t=[];for(const e of r.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(et)){const n=c[o++];if(t.push(e),void 0!==n){const t=r.getAttribute(n.toLowerCase()+"$lit$").split(et),e=/([.?@])?(.*)/.exec(n);a.push({type:1,index:i,name:e[2],strings:t,ctor:"."===e[1]?Tt:"?"===e[1]?Ct:"@"===e[1]?kt:xt})}else a.push({type:6,index:i})}for(const e of t)r.removeAttribute(e)}if(gt.test(r.tagName)){const t=r.textContent.split(et),e=t.length-1;if(e>0){r.textContent=Q?Q.emptyScript:"";for(let n=0;n<e;n++)r.append(t[n],ot()),bt.nextNode(),a.push({type:2,index:++i});r.append(t[e],ot())}}}else if(8===r.nodeType)if(r.data===nt)a.push({type:2,index:i});else{let t=-1;for(;-1!==(t=r.data.indexOf(et,t+1));)a.push({type:7,index:i}),t+=et.length-1}i++}}static createElement(t,e){const n=it.createElement("template");return n.innerHTML=t,n}}function Et(t,e,n=t,r){var i,o,s,a;if(e===yt)return e;let l=void 0!==r?null===(i=n._$Co)||void 0===i?void 0:i[r]:n._$Cl;const c=st(e)?void 0:e._$litDirective$;return(null==l?void 0:l.constructor)!==c&&(null===(o=null==l?void 0:l._$AO)||void 0===o||o.call(l,!1),void 0===c?l=void 0:(l=new c(t),l._$AT(t,n,r)),void 0!==r?(null!==(s=(a=n)._$Co)&&void 0!==s?s:a._$Co=[])[r]=l:n._$Cl=l),void 0!==l&&(e=Et(t,l._$AS(t,e.values),l,r)),e}class $t{constructor(t,e){this._$AV=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(t){var e;const{el:{content:n},parts:r}=this._$AD,i=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:it).importNode(n,!0);bt.currentNode=i;let o=bt.nextNode(),s=0,a=0,l=r[0];for(;void 0!==l;){if(s===l.index){let e;2===l.type?e=new St(o,o.nextSibling,this,t):1===l.type?e=new l.ctor(o,l.name,l.strings,this,t):6===l.type&&(e=new Ot(o,this,t)),this._$AV.push(e),l=r[++a]}s!==(null==l?void 0:l.index)&&(o=bt.nextNode(),s++)}return bt.currentNode=it,i}v(t){let e=0;for(const n of this._$AV)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class St{constructor(t,e,n,r){var i;this.type=2,this._$AH=vt,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=r,this._$Cp=null===(i=null==r?void 0:r.isConnected)||void 0===i||i}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cp}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===(null==t?void 0:t.nodeType)&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=Et(this,t,e),st(t)?t===vt||null==t||""===t?(this._$AH!==vt&&this._$AR(),this._$AH=vt):t!==this._$AH&&t!==yt&&this._(t):void 0!==t._$litType$?this.g(t):void 0!==t.nodeType?this.$(t):(t=>at(t)||"function"==typeof(null==t?void 0:t[Symbol.iterator]))(t)?this.T(t):this._(t)}k(t){return this._$AA.parentNode.insertBefore(t,this._$AB)}$(t){this._$AH!==t&&(this._$AR(),this._$AH=this.k(t))}_(t){this._$AH!==vt&&st(this._$AH)?this._$AA.nextSibling.data=t:this.$(it.createTextNode(t)),this._$AH=t}g(t){var e;const{values:n,_$litType$:r}=t,i="number"==typeof r?this._$AC(t):(void 0===r.el&&(r.el=At.createElement(r.h,this.options)),r);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===i)this._$AH.v(n);else{const t=new $t(i,this),e=t.u(this.options);t.v(n),this.$(e),this._$AH=t}}_$AC(t){let e=_t.get(t.strings);return void 0===e&&_t.set(t.strings,e=new At(t)),e}T(t){at(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,r=0;for(const i of t)r===e.length?e.push(n=new St(this.k(ot()),this.k(ot()),this,this.options)):n=e[r],n._$AI(i),r++;r<e.length&&(this._$AR(n&&n._$AB.nextSibling,r),e.length=r)}_$AR(t=this._$AA.nextSibling,e){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cp=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class xt{constructor(t,e,n,r,i){this.type=1,this._$AH=vt,this._$AN=void 0,this.element=t,this.name=e,this._$AM=r,this.options=i,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=vt}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,r){const i=this.strings;let o=!1;if(void 0===i)t=Et(this,t,e,0),o=!st(t)||t!==this._$AH&&t!==yt,o&&(this._$AH=t);else{const r=t;let s,a;for(t=i[0],s=0;s<i.length-1;s++)a=Et(this,r[n+s],e,s),a===yt&&(a=this._$AH[s]),o||(o=!st(a)||a!==this._$AH[s]),a===vt?t=vt:t!==vt&&(t+=(null!=a?a:"")+i[s+1]),this._$AH[s]=a}o&&!r&&this.j(t)}j(t){t===vt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class Tt extends xt{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===vt?void 0:t}}const Rt=Q?Q.emptyScript:"";class Ct extends xt{constructor(){super(...arguments),this.type=4}j(t){t&&t!==vt?this.element.setAttribute(this.name,Rt):this.element.removeAttribute(this.name)}}class kt extends xt{constructor(t,e,n,r,i){super(t,e,n,r,i),this.type=5}_$AI(t,e=this){var n;if((t=null!==(n=Et(this,t,e,0))&&void 0!==n?n:vt)===yt)return;const r=this._$AH,i=t===vt&&r!==vt||t.capture!==r.capture||t.once!==r.once||t.passive!==r.passive,o=t!==vt&&(r===vt||i);i&&this.element.removeEventListener(this.name,this,r),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this._$AH.handleEvent(t)}}class Ot{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){Et(this,t)}}const Pt=X.litHtmlPolyfillSupport;null==Pt||Pt(At,St),(null!==(Z=X.litHtmlVersions)&&void 0!==Z?Z:X.litHtmlVersions=[]).push("2.7.4");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Lt,Ut;class Dt extends G{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const n=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=n.firstChild),n}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{var r,i;const o=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:e;let s=o._$litPart$;if(void 0===s){const t=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:null;o._$litPart$=s=new St(e.insertBefore(ot(),t),t,void 0,null!=n?n:{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return yt}}Dt.finalized=!0,Dt._$litElement$=!0,null===(Lt=globalThis.litElementHydrateSupport)||void 0===Lt||Lt.call(globalThis,{LitElement:Dt});const Nt=globalThis.litElementPolyfillSupport;null==Nt||Nt({LitElement:Dt}),(null!==(Ut=globalThis.litElementVersions)&&void 0!==Ut?Ut:globalThis.litElementVersions=[]).push("3.3.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const jt=t=>e=>"function"==typeof e?((t,e)=>(customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:n,elements:r}=e;return{kind:n,elements:r,finisher(e){customElements.define(t,e)}}})(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,Bt=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};function It(t){return(e,n)=>void 0!==n?((t,e,n)=>{e.constructor.createProperty(n,t)})(t,e,n):Bt(t,e)
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */}function Mt(t){return It({...t,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ft,Ht,zt;null===(Ft=window.HTMLSlotElement)||void 0===Ft||Ft.prototype.assignedElements,function(t){t.language="language",t.system="system",t.comma_decimal="comma_decimal",t.decimal_comma="decimal_comma",t.space_comma="space_comma",t.none="none"}(Ht||(Ht={})),function(t){t.language="language",t.system="system",t.am_pm="12",t.twenty_four="24"}(zt||(zt={}));function Vt(t,e,n){if(e.has("config")||n)return!0;if(t.config.entity){var r=e.get("hass");return!r||r.states[t.config.entity]!==t.hass.states[t.config.entity]}return!1}var Yt=function(){var t=document.querySelector("home-assistant");if(t=(t=(t=(t=(t=(t=(t=(t=t&&t.shadowRoot)&&t.querySelector("home-assistant-main"))&&t.shadowRoot)&&t.querySelector("app-drawer-layout partial-panel-resolver"))&&t.shadowRoot||t)&&t.querySelector("ha-panel-lovelace"))&&t.shadowRoot)&&t.querySelector("hui-root")){var e=t.lovelace;return e.current_view=t.___curView,e}return null},qt={version:"Version",scroll_controls:"Scroll Controls",scroll_directions:{prefix:"Scroll to ",suffix:"",directions:{left:"Left",right:"Right",top:"Top",bottom:"Bottom"}},template_mode:{enable:"Enable Template Mode",disable:"Disable Template Mode"},view:"View",dashboard:"Dashboard",template:"Template",templates:"Templates",and:"and",in_use:"In Use",update:"Update",update_all:"Update All",condense:"Condense",expand:"Expand",reload_ui:"Update",reload:"Refresh",headers:{templates:"Templates & The Views They Are Used On",dashboards:"Dashboards"},invalid_configuration:"Invalid configuration",show_warning:"Show Warning",show_error:"Show Error"},Wt={common:qt};const Jt={en:Object.freeze({__proto__:null,common:qt,default:Wt})};function Kt(t,e="",n=""){const r=(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_");let i;try{i=t.split(".").reduce(((t,e)=>t[e]),Jt[r])}catch(e){i=t.split(".").reduce(((t,e)=>t[e]),Jt.en)}return void 0===i&&(i=t.split(".").reduce(((t,e)=>t[e]),Jt.en)),""!==e&&""!==n&&(i=i.replace(e,n)),i}class Gt{constructor(){this.templates={}}addTemplate(t,e,n=!0){return(n||!this.templates[t])&&(this.templates[t]=e,!0)}renderAndAddTemplate(t,e){const n={...e};delete n.ll_key,delete n.ll_priority;const r=R(n,this.templates);return this.addTemplate(t,r,!0)}renderCard(t){const e=R(t,this.templates);return e.template?T(e):e}}var Zt="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};function Xt(t,e){return function(){return t.apply(e,arguments)}}const{toString:Qt}=Object.prototype,{getPrototypeOf:te}=Object,ee=(ne=Object.create(null),t=>{const e=Qt.call(t);return ne[e]||(ne[e]=e.slice(8,-1).toLowerCase())});var ne;const re=t=>(t=t.toLowerCase(),e=>ee(e)===t),ie=t=>e=>typeof e===t,{isArray:oe}=Array,se=ie("undefined");const ae=re("ArrayBuffer");const le=ie("string"),ce=ie("function"),he=ie("number"),ue=t=>null!==t&&"object"==typeof t,de=t=>{if("object"!==ee(t))return!1;const e=te(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},fe=re("Date"),pe=re("File"),ge=re("Blob"),me=re("FileList"),ye=re("URLSearchParams");function ve(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let r,i;if("object"!=typeof t&&(t=[t]),oe(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let s;for(r=0;r<o;r++)s=i[r],e.call(null,t[s],s,t)}}function _e(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,i=n.length;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const be="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:Zt,we=t=>!se(t)&&t!==be;const Ae=(Ee="undefined"!=typeof Uint8Array&&te(Uint8Array),t=>Ee&&t instanceof Ee);var Ee;const $e=re("HTMLFormElement"),Se=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),xe=re("RegExp"),Te=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};ve(n,((n,i)=>{!1!==e(n,i,t)&&(r[i]=n)})),Object.defineProperties(t,r)},Re="abcdefghijklmnopqrstuvwxyz",Ce={DIGIT:"0123456789",ALPHA:Re,ALPHA_DIGIT:Re+Re.toUpperCase()+"0123456789"};const ke=re("AsyncFunction");var Oe={isArray:oe,isArrayBuffer:ae,isBuffer:function(t){return null!==t&&!se(t)&&null!==t.constructor&&!se(t.constructor)&&ce(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||ce(t.append)&&("formdata"===(e=ee(t))||"object"===e&&ce(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&ae(t.buffer),e},isString:le,isNumber:he,isBoolean:t=>!0===t||!1===t,isObject:ue,isPlainObject:de,isUndefined:se,isDate:fe,isFile:pe,isBlob:ge,isRegExp:xe,isFunction:ce,isStream:t=>ue(t)&&ce(t.pipe),isURLSearchParams:ye,isTypedArray:Ae,isFileList:me,forEach:ve,merge:function t(){const{caseless:e}=we(this)&&this||{},n={},r=(r,i)=>{const o=e&&_e(n,i)||i;de(n[o])&&de(r)?n[o]=t(n[o],r):de(r)?n[o]=t({},r):oe(r)?n[o]=r.slice():n[o]=r};for(let t=0,e=arguments.length;t<e;t++)arguments[t]&&ve(arguments[t],r);return n},extend:(t,e,n,{allOwnKeys:r}={})=>(ve(e,((e,r)=>{n&&ce(e)?t[r]=Xt(e,n):t[r]=e}),{allOwnKeys:r}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let i,o,s;const a={};if(e=e||{},null==t)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],r&&!r(s,t,e)||a[s]||(e[s]=t[s],a[s]=!0);t=!1!==n&&te(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:ee,kindOfTest:re,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(oe(t))return t;let e=t.length;if(!he(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:$e,hasOwnProperty:Se,hasOwnProp:Se,reduceDescriptors:Te,freezeMethods:t=>{Te(t,((e,n)=>{if(ce(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];ce(r)&&(e.enumerable=!1,"writable"in e?e.writable=!1:e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return oe(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:_e,global:be,isContextDefined:we,ALPHABET:Ce,generateString:(t=16,e=Ce.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&ce(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(ue(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const i=oe(t)?[]:{};return ve(t,((t,e)=>{const o=n(t,r+1);!se(o)&&(i[e]=o)})),e[r]=void 0,i}}return t};return n(t,0)},isAsyncFn:ke,isThenable:t=>t&&(ue(t)||ce(t))&&ce(t.then)&&ce(t.catch)},Pe=[],Le=[],Ue="undefined"!=typeof Uint8Array?Uint8Array:Array,De=!1;function Ne(){De=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)Pe[e]=t[e],Le[t.charCodeAt(e)]=e;Le["-".charCodeAt(0)]=62,Le["_".charCodeAt(0)]=63}function je(t,e,n){for(var r,i,o=[],s=e;s<n;s+=3)r=(t[s]<<16)+(t[s+1]<<8)+t[s+2],o.push(Pe[(i=r)>>18&63]+Pe[i>>12&63]+Pe[i>>6&63]+Pe[63&i]);return o.join("")}function Be(t){var e;De||Ne();for(var n=t.length,r=n%3,i="",o=[],s=16383,a=0,l=n-r;a<l;a+=s)o.push(je(t,a,a+s>l?l:a+s));return 1===r?(e=t[n-1],i+=Pe[e>>2],i+=Pe[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=Pe[e>>10],i+=Pe[e>>4&63],i+=Pe[e<<2&63],i+="="),o.push(i),o.join("")}function Ie(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,c=l>>1,h=-7,u=n?i-1:0,d=n?-1:1,f=t[e+u];for(u+=d,o=f&(1<<-h)-1,f>>=-h,h+=a;h>0;o=256*o+t[e+u],u+=d,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+u],u+=d,h-=8);if(0===o)o=1-c;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=c}return(f?-1:1)*s*Math.pow(2,o-r)}function Me(t,e,n,r,i,o){var s,a,l,c=8*o-i-1,h=(1<<c)-1,u=h>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(s++,l/=2),s+u>=h?(a=0,s=h):s+u>=1?(a=(e*l-1)*Math.pow(2,i),s+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=255&s,f+=p,s/=256,c-=8);t[n+f-p]|=128*g}var Fe={}.toString,He=Array.isArray||function(t){return"[object Array]"==Fe.call(t)};function ze(){return Ye.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Ve(t,e){if(ze()<e)throw new RangeError("Invalid typed array length");return Ye.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=Ye.prototype:(null===t&&(t=new Ye(e)),t.length=e),t}function Ye(t,e,n){if(!(Ye.TYPED_ARRAY_SUPPORT||this instanceof Ye))return new Ye(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return Je(this,t)}return qe(this,t,e,n)}function qe(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);Ye.TYPED_ARRAY_SUPPORT?(t=e).__proto__=Ye.prototype:t=Ke(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!Ye.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|Xe(e,n),i=(t=Ve(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(Ze(e)){var n=0|Ge(e.length);return 0===(t=Ve(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?Ve(t,0):Ke(t,e);if("Buffer"===e.type&&He(e.data))return Ke(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function We(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function Je(t,e){if(We(e),t=Ve(t,e<0?0:0|Ge(e)),!Ye.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function Ke(t,e){var n=e.length<0?0:0|Ge(e.length);t=Ve(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function Ge(t){if(t>=ze())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+ze().toString(16)+" bytes");return 0|t}function Ze(t){return!(null==t||!t._isBuffer)}function Xe(t,e){if(Ze(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Sn(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return xn(t).length;default:if(r)return Sn(t).length;e=(""+e).toLowerCase(),r=!0}}function Qe(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return pn(this,e,n);case"utf8":case"utf-8":return un(this,e,n);case"ascii":return dn(this,e,n);case"latin1":case"binary":return fn(this,e,n);case"base64":return hn(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gn(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function tn(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function en(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=Ye.from(e,r)),Ze(e))return 0===e.length?-1:nn(t,e,n,r,i);if("number"==typeof e)return e&=255,Ye.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):nn(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function nn(t,e,n,r,i){var o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===l)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var u=!0,d=0;d<l;d++)if(c(t,o+d)!==c(e,d)){u=!1;break}if(u)return o}return-1}function rn(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function on(t,e,n,r){return Tn(Sn(e,t.length-n),t,n,r)}function sn(t,e,n,r){return Tn(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function an(t,e,n,r){return sn(t,e,n,r)}function ln(t,e,n,r){return Tn(xn(e),t,n,r)}function cn(t,e,n,r){return Tn(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function hn(t,e,n){return 0===e&&n===t.length?Be(t):Be(t.slice(e,n))}function un(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,l,c=t[i],h=null,u=c>239?4:c>223?3:c>191?2:1;if(i+u<=n)switch(u){case 1:c<128&&(h=c);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&c)<<6|63&o)>127&&(h=l);break;case 3:o=t[i+1],s=t[i+2],128==(192&o)&&128==(192&s)&&(l=(15&c)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,u=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=u}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=4096));return n}(r)}Ye.TYPED_ARRAY_SUPPORT=void 0===Zt.TYPED_ARRAY_SUPPORT||Zt.TYPED_ARRAY_SUPPORT,ze(),Ye.poolSize=8192,Ye._augment=function(t){return t.__proto__=Ye.prototype,t},Ye.from=function(t,e,n){return qe(null,t,e,n)},Ye.TYPED_ARRAY_SUPPORT&&(Ye.prototype.__proto__=Uint8Array.prototype,Ye.__proto__=Uint8Array),Ye.alloc=function(t,e,n){return function(t,e,n,r){return We(e),e<=0?Ve(t,e):void 0!==n?"string"==typeof r?Ve(t,e).fill(n,r):Ve(t,e).fill(n):Ve(t,e)}(null,t,e,n)},Ye.allocUnsafe=function(t){return Je(null,t)},Ye.allocUnsafeSlow=function(t){return Je(null,t)},Ye.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Rn(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Rn(t.slice(0,0))}(t))},Ye.compare=function(t,e){if(!Ze(t)||!Ze(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},Ye.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Ye.concat=function(t,e){if(!He(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Ye.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=Ye.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!Ze(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},Ye.byteLength=Xe,Ye.prototype._isBuffer=!0,Ye.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)tn(this,e,e+1);return this},Ye.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)tn(this,e,e+3),tn(this,e+1,e+2);return this},Ye.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)tn(this,e,e+7),tn(this,e+1,e+6),tn(this,e+2,e+5),tn(this,e+3,e+4);return this},Ye.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?un(this,0,t):Qe.apply(this,arguments)},Ye.prototype.equals=function(t){if(!Ze(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Ye.compare(this,t)},Ye.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},Ye.prototype.compare=function(t,e,n,r,i){if(!Ze(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(r,i),c=t.slice(e,n),h=0;h<a;++h)if(l[h]!==c[h]){o=l[h],s=c[h];break}return o<s?-1:s<o?1:0},Ye.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},Ye.prototype.indexOf=function(t,e,n){return en(this,t,e,n,!0)},Ye.prototype.lastIndexOf=function(t,e,n){return en(this,t,e,n,!1)},Ye.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return rn(this,t,e,n);case"utf8":case"utf-8":return on(this,t,e,n);case"ascii":return sn(this,t,e,n);case"latin1":case"binary":return an(this,t,e,n);case"base64":return ln(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cn(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},Ye.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function dn(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function fn(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function pn(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=$n(t[o]);return i}function gn(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function mn(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function yn(t,e,n,r,i,o){if(!Ze(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function vn(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function _n(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function bn(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function wn(t,e,n,r,i){return i||bn(t,0,n,4),Me(t,e,n,r,23,4),n+4}function An(t,e,n,r,i){return i||bn(t,0,n,8),Me(t,e,n,r,52,8),n+8}Ye.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),Ye.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=Ye.prototype;else{var i=e-t;n=new Ye(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},Ye.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||mn(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},Ye.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||mn(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},Ye.prototype.readUInt8=function(t,e){return e||mn(t,1,this.length),this[t]},Ye.prototype.readUInt16LE=function(t,e){return e||mn(t,2,this.length),this[t]|this[t+1]<<8},Ye.prototype.readUInt16BE=function(t,e){return e||mn(t,2,this.length),this[t]<<8|this[t+1]},Ye.prototype.readUInt32LE=function(t,e){return e||mn(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Ye.prototype.readUInt32BE=function(t,e){return e||mn(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Ye.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||mn(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},Ye.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||mn(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},Ye.prototype.readInt8=function(t,e){return e||mn(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Ye.prototype.readInt16LE=function(t,e){e||mn(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},Ye.prototype.readInt16BE=function(t,e){e||mn(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},Ye.prototype.readInt32LE=function(t,e){return e||mn(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Ye.prototype.readInt32BE=function(t,e){return e||mn(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Ye.prototype.readFloatLE=function(t,e){return e||mn(t,4,this.length),Ie(this,t,!0,23,4)},Ye.prototype.readFloatBE=function(t,e){return e||mn(t,4,this.length),Ie(this,t,!1,23,4)},Ye.prototype.readDoubleLE=function(t,e){return e||mn(t,8,this.length),Ie(this,t,!0,52,8)},Ye.prototype.readDoubleBE=function(t,e){return e||mn(t,8,this.length),Ie(this,t,!1,52,8)},Ye.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||yn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},Ye.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||yn(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},Ye.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,1,255,0),Ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Ye.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,2,65535,0),Ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):vn(this,t,e,!0),e+2},Ye.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,2,65535,0),Ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):vn(this,t,e,!1),e+2},Ye.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,4,4294967295,0),Ye.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):_n(this,t,e,!0),e+4},Ye.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,4,4294967295,0),Ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):_n(this,t,e,!1),e+4},Ye.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);yn(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},Ye.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);yn(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},Ye.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,1,127,-128),Ye.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Ye.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,2,32767,-32768),Ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):vn(this,t,e,!0),e+2},Ye.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,2,32767,-32768),Ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):vn(this,t,e,!1),e+2},Ye.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,4,2147483647,-2147483648),Ye.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):_n(this,t,e,!0),e+4},Ye.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||yn(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Ye.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):_n(this,t,e,!1),e+4},Ye.prototype.writeFloatLE=function(t,e,n){return wn(this,t,e,!0,n)},Ye.prototype.writeFloatBE=function(t,e,n){return wn(this,t,e,!1,n)},Ye.prototype.writeDoubleLE=function(t,e,n){return An(this,t,e,!0,n)},Ye.prototype.writeDoubleBE=function(t,e,n){return An(this,t,e,!1,n)},Ye.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!Ye.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},Ye.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!Ye.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=Ze(t)?t:Sn(new Ye(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var En=/[^+\/0-9A-Za-z-_]/g;function $n(t){return t<16?"0"+t.toString(16):t.toString(16)}function Sn(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function xn(t){return function(t){var e,n,r,i,o,s;De||Ne();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o="="===t[a-2]?2:"="===t[a-1]?1:0,s=new Ue(3*a/4-o),r=o>0?a-4:a;var l=0;for(e=0,n=0;e<r;e+=4,n+=3)i=Le[t.charCodeAt(e)]<<18|Le[t.charCodeAt(e+1)]<<12|Le[t.charCodeAt(e+2)]<<6|Le[t.charCodeAt(e+3)],s[l++]=i>>16&255,s[l++]=i>>8&255,s[l++]=255&i;return 2===o?(i=Le[t.charCodeAt(e)]<<2|Le[t.charCodeAt(e+1)]>>4,s[l++]=255&i):1===o&&(i=Le[t.charCodeAt(e)]<<10|Le[t.charCodeAt(e+1)]<<4|Le[t.charCodeAt(e+2)]>>2,s[l++]=i>>8&255,s[l++]=255&i),s}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(En,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Tn(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Rn(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function Cn(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}Oe.inherits(Cn,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oe.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const kn=Cn.prototype,On={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{On[t]={value:t}})),Object.defineProperties(Cn,On),Object.defineProperty(kn,"isAxiosError",{value:!0}),Cn.from=(t,e,n,r,i,o)=>{const s=Object.create(kn);return Oe.toFlatObject(t,s,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),Cn.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};function Pn(t){return Oe.isPlainObject(t)||Oe.isArray(t)}function Ln(t){return Oe.endsWith(t,"[]")?t.slice(0,-2):t}function Un(t,e,n){return t?t.concat(e).map((function(t,e){return t=Ln(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const Dn=Oe.toFlatObject(Oe,{},null,(function(t){return/^is[A-Z]/.test(t)}));function Nn(t,e,n){if(!Oe.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=Oe.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!Oe.isUndefined(e[t])}))).metaTokens,i=n.visitor||c,o=n.dots,s=n.indexes,a=(n.Blob||"undefined"!=typeof Blob&&Blob)&&Oe.isSpecCompliantForm(e);if(!Oe.isFunction(i))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(Oe.isDate(t))return t.toISOString();if(!a&&Oe.isBlob(t))throw new Cn("Blob is not supported. Use a Buffer instead.");return Oe.isArrayBuffer(t)||Oe.isTypedArray(t)?a&&"function"==typeof Blob?new Blob([t]):Ye.from(t):t}function c(t,n,i){let a=t;if(t&&!i&&"object"==typeof t)if(Oe.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(Oe.isArray(t)&&function(t){return Oe.isArray(t)&&!t.some(Pn)}(t)||(Oe.isFileList(t)||Oe.endsWith(n,"[]"))&&(a=Oe.toArray(t)))return n=Ln(n),a.forEach((function(t,r){!Oe.isUndefined(t)&&null!==t&&e.append(!0===s?Un([n],r,o):null===s?n:n+"[]",l(t))})),!1;return!!Pn(t)||(e.append(Un(i,n,o),l(t)),!1)}const h=[],u=Object.assign(Dn,{defaultVisitor:c,convertValue:l,isVisitable:Pn});if(!Oe.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!Oe.isUndefined(n)){if(-1!==h.indexOf(n))throw Error("Circular reference detected in "+r.join("."));h.push(n),Oe.forEach(n,(function(n,o){!0===(!(Oe.isUndefined(n)||null===n)&&i.call(e,n,Oe.isString(o)?o.trim():o,r,u))&&t(n,r?r.concat(o):[o])})),h.pop()}}(t),e}function jn(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function Bn(t,e){this._pairs=[],t&&Nn(t,this,e)}const In=Bn.prototype;function Mn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Fn(t,e,n){if(!e)return t;const r=n&&n.encode||Mn,i=n&&n.serialize;let o;if(o=i?i(e,n):Oe.isURLSearchParams(e)?e.toString():new Bn(e,n).toString(r),o){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}In.append=function(t,e){this._pairs.push([t,e])},In.toString=function(t){const e=t?function(e){return t.call(this,e,jn)}:jn;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var Hn=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Oe.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},zn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var Vn={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Bn,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},isStandardBrowserEnv:(()=>{let t;return("undefined"==typeof navigator||"ReactNative"!==(t=navigator.product)&&"NativeScript"!==t&&"NS"!==t)&&("undefined"!=typeof window&&"undefined"!=typeof document)})(),isStandardBrowserWebWorkerEnv:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,protocols:["http","https","file","blob","url","data"]};function Yn(t){function e(t,n,r,i){let o=t[i++];const s=Number.isFinite(+o),a=i>=t.length;if(o=!o&&Oe.isArray(r)?r.length:o,a)return Oe.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&Oe.isObject(r[o])||(r[o]=[]);return e(t,n,r[o],i)&&Oe.isArray(r[o])&&(r[o]=function(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}(r[o])),!s}if(Oe.isFormData(t)&&Oe.isFunction(t.entries)){const n={};return Oe.forEachEntry(t,((t,r)=>{e(function(t){return Oe.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null}const qn={"Content-Type":void 0};const Wn={transitional:zn,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,i=Oe.isObject(t);i&&Oe.isHTMLForm(t)&&(t=new FormData(t));if(Oe.isFormData(t))return r&&r?JSON.stringify(Yn(t)):t;if(Oe.isArrayBuffer(t)||Oe.isBuffer(t)||Oe.isStream(t)||Oe.isFile(t)||Oe.isBlob(t))return t;if(Oe.isArrayBufferView(t))return t.buffer;if(Oe.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return Nn(t,new Vn.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return Vn.isNode&&Oe.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((o=Oe.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return Nn(o?{"files[]":t}:t,e&&new e,this.formSerializer)}}return i||r?(e.setContentType("application/json",!1),function(t,e,n){if(Oe.isString(t))try{return(e||JSON.parse)(t),Oe.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(n||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||Wn.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&Oe.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(t){if(n){if("SyntaxError"===t.name)throw Cn.from(t,Cn.ERR_BAD_RESPONSE,this,null,this.response);throw t}}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vn.classes.FormData,Blob:Vn.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Oe.forEach(["delete","get","head"],(function(t){Wn.headers[t]={}})),Oe.forEach(["post","put","patch"],(function(t){Wn.headers[t]=Oe.merge(qn)}));var Jn=Wn;const Kn=Oe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const Gn=Symbol("internals");function Zn(t){return t&&String(t).trim().toLowerCase()}function Xn(t){return!1===t||null==t?t:Oe.isArray(t)?t.map(Xn):String(t)}function Qn(t,e,n,r,i){return Oe.isFunction(r)?r.call(this,e,n):(i&&(e=n),Oe.isString(e)?Oe.isString(r)?-1!==e.indexOf(r):Oe.isRegExp(r)?r.test(e):void 0:void 0)}class tr{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function i(t,e,n){const i=Zn(e);if(!i)throw new Error("header name must be a non-empty string");const o=Oe.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||e]=Xn(t))}const o=(t,e)=>Oe.forEach(t,((t,n)=>i(t,n,e)));return Oe.isPlainObject(t)||t instanceof this.constructor?o(t,e):Oe.isString(t)&&(t=t.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim())?o((t=>{const e={};let n,r,i;return t&&t.split("\n").forEach((function(t){i=t.indexOf(":"),n=t.substring(0,i).trim().toLowerCase(),r=t.substring(i+1).trim(),!n||e[n]&&Kn[n]||("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&i(e,t,n),this}get(t,e){if(t=Zn(t)){const n=Oe.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(Oe.isFunction(e))return e.call(this,t,n);if(Oe.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=Zn(t)){const n=Oe.findKey(this,t);return!(!n||void 0===this[n]||e&&!Qn(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function i(t){if(t=Zn(t)){const i=Oe.findKey(n,t);!i||e&&!Qn(0,n[i],i,e)||(delete n[i],r=!0)}}return Oe.isArray(t)?t.forEach(i):i(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const i=e[n];t&&!Qn(0,this[i],i,t,!0)||(delete this[i],r=!0)}return r}normalize(t){const e=this,n={};return Oe.forEach(this,((r,i)=>{const o=Oe.findKey(n,i);if(o)return e[o]=Xn(r),void delete e[i];const s=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(i):String(i).trim();s!==i&&delete e[i],e[s]=Xn(r),n[s]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return Oe.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&Oe.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=(this[Gn]=this[Gn]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=Zn(t);e[r]||(!function(t,e){const n=Oe.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,i){return this[r].call(this,e,t,n,i)},configurable:!0})}))}(n,t),e[r]=!0)}return Oe.isArray(t)?t.forEach(r):r(t),this}}tr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Oe.freezeMethods(tr.prototype),Oe.freezeMethods(tr);var er=tr;function nr(t,e){const n=this||Jn,r=e||n,i=er.from(r.headers);let o=r.data;return Oe.forEach(t,(function(t){o=t.call(n,o,i.normalize(),e?e.status:void 0)})),i.normalize(),o}function rr(t){return!(!t||!t.__CANCEL__)}function ir(t,e,n){Cn.call(this,null==t?"canceled":t,Cn.ERR_CANCELED,e,n),this.name="CanceledError"}Oe.inherits(ir,Cn,{__CANCEL__:!0});var or=Vn.isStandardBrowserEnv?{write:function(t,e,n,r,i,o){const s=[];s.push(t+"="+encodeURIComponent(e)),Oe.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),Oe.isString(r)&&s.push("path="+r),Oe.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function sr(t,e){return t&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var ar=Vn.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=Oe.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};function lr(t,e){let n=0;const r=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i,o=0,s=0;return e=void 0!==e?e:1e3,function(a){const l=Date.now(),c=r[s];i||(i=l),n[o]=a,r[o]=l;let h=s,u=0;for(;h!==o;)u+=n[h++],h%=t;if(o=(o+1)%t,o===s&&(s=(s+1)%t),l-i<e)return;const d=c&&l-c;return d?Math.round(1e3*u/d):void 0}}(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,a=o-n,l=r(a);n=o;const c={loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:i};c[e?"download":"upload"]=!0,t(c)}}const cr={http:null,xhr:"undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const i=er.from(t.headers).normalize(),o=t.responseType;let s;function a(){t.cancelToken&&t.cancelToken.unsubscribe(s),t.signal&&t.signal.removeEventListener("abort",s)}Oe.isFormData(r)&&(Vn.isStandardBrowserEnv||Vn.isStandardBrowserWebWorkerEnv?i.setContentType(!1):i.setContentType("multipart/form-data;",!1));let l=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(e+":"+n))}const c=sr(t.baseURL,t.url);function h(){if(!l)return;const r=er.from("getAllResponseHeaders"in l&&l.getAllResponseHeaders());!function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new Cn("Request failed with status code "+n.status,[Cn.ERR_BAD_REQUEST,Cn.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)}((function(t){e(t),a()}),(function(t){n(t),a()}),{data:o&&"text"!==o&&"json"!==o?l.response:l.responseText,status:l.status,statusText:l.statusText,headers:r,config:t,request:l}),l=null}if(l.open(t.method.toUpperCase(),Fn(c,t.params,t.paramsSerializer),!0),l.timeout=t.timeout,"onloadend"in l?l.onloadend=h:l.onreadystatechange=function(){l&&4===l.readyState&&(0!==l.status||l.responseURL&&0===l.responseURL.indexOf("file:"))&&setTimeout(h)},l.onabort=function(){l&&(n(new Cn("Request aborted",Cn.ECONNABORTED,t,l)),l=null)},l.onerror=function(){n(new Cn("Network Error",Cn.ERR_NETWORK,t,l)),l=null},l.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||zn;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new Cn(e,r.clarifyTimeoutError?Cn.ETIMEDOUT:Cn.ECONNABORTED,t,l)),l=null},Vn.isStandardBrowserEnv){const e=(t.withCredentials||ar(c))&&t.xsrfCookieName&&or.read(t.xsrfCookieName);e&&i.set(t.xsrfHeaderName,e)}void 0===r&&i.setContentType(null),"setRequestHeader"in l&&Oe.forEach(i.toJSON(),(function(t,e){l.setRequestHeader(e,t)})),Oe.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),o&&"json"!==o&&(l.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&l.addEventListener("progress",lr(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&l.upload&&l.upload.addEventListener("progress",lr(t.onUploadProgress)),(t.cancelToken||t.signal)&&(s=e=>{l&&(n(!e||e.type?new ir(null,t,l):e),l.abort(),l=null)},t.cancelToken&&t.cancelToken.subscribe(s),t.signal&&(t.signal.aborted?s():t.signal.addEventListener("abort",s)));const u=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(c);u&&-1===Vn.protocols.indexOf(u)?n(new Cn("Unsupported protocol "+u+":",Cn.ERR_BAD_REQUEST,t)):l.send(r||null)}))}};Oe.forEach(cr,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch(t){}Object.defineProperty(t,"adapterName",{value:e})}}));var hr=t=>{t=Oe.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=Oe.isString(n)?cr[n.toLowerCase()]:n));i++);if(!r){if(!1===r)throw new Cn(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT");throw new Error(Oe.hasOwnProp(cr,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`)}if(!Oe.isFunction(r))throw new TypeError("adapter is not a function");return r};function ur(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ir(null,t)}function dr(t){ur(t),t.headers=er.from(t.headers),t.data=nr.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1);return hr(t.adapter||Jn.adapter)(t).then((function(e){return ur(t),e.data=nr.call(t,t.transformResponse,e),e.headers=er.from(e.headers),e}),(function(e){return rr(e)||(ur(t),e&&e.response&&(e.response.data=nr.call(t,t.transformResponse,e.response),e.response.headers=er.from(e.response.headers))),Promise.reject(e)}))}const fr=t=>t instanceof er?t.toJSON():t;function pr(t,e){e=e||{};const n={};function r(t,e,n){return Oe.isPlainObject(t)&&Oe.isPlainObject(e)?Oe.merge.call({caseless:n},t,e):Oe.isPlainObject(e)?Oe.merge({},e):Oe.isArray(e)?e.slice():e}function i(t,e,n){return Oe.isUndefined(e)?Oe.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function o(t,e){if(!Oe.isUndefined(e))return r(void 0,e)}function s(t,e){return Oe.isUndefined(e)?Oe.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function a(n,i,o){return o in e?r(n,i):o in t?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(t,e)=>i(fr(t),fr(e),!0)};return Oe.forEach(Object.keys(Object.assign({},t,e)),(function(r){const o=l[r]||i,s=o(t[r],e[r],r);Oe.isUndefined(s)&&o!==a||(n[r]=s)})),n}const gr={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{gr[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const mr={};gr.transitional=function(t,e,n){function r(t,e){return"[Axios v1.4.0] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,i,o)=>{if(!1===t)throw new Cn(r(i," has been removed"+(e?" in "+e:"")),Cn.ERR_DEPRECATED);return e&&!mr[i]&&(mr[i]=!0,console.warn(r(i," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,i,o)}};var yr={assertOptions:function(t,e,n){if("object"!=typeof t)throw new Cn("options must be an object",Cn.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],s=e[o];if(s){const e=t[o],n=void 0===e||s(e,o,t);if(!0!==n)throw new Cn("option "+o+" must be "+n,Cn.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Cn("Unknown option "+o,Cn.ERR_BAD_OPTION)}},validators:gr};const vr=yr.validators;class _r{constructor(t){this.defaults=t,this.interceptors={request:new Hn,response:new Hn}}request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=pr(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:i}=e;let o;void 0!==n&&yr.assertOptions(n,{silentJSONParsing:vr.transitional(vr.boolean),forcedJSONParsing:vr.transitional(vr.boolean),clarifyTimeoutError:vr.transitional(vr.boolean)},!1),null!=r&&(Oe.isFunction(r)?e.paramsSerializer={serialize:r}:yr.assertOptions(r,{encode:vr.function,serialize:vr.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase(),o=i&&Oe.merge(i.common,i[e.method]),o&&Oe.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete i[t]})),e.headers=er.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(a=a&&t.synchronous,s.unshift(t.fulfilled,t.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let h,u=0;if(!a){const t=[dr.bind(this),void 0];for(t.unshift.apply(t,s),t.push.apply(t,l),h=t.length,c=Promise.resolve(e);u<h;)c=c.then(t[u++],t[u++]);return c}h=s.length;let d=e;for(u=0;u<h;){const t=s[u++],e=s[u++];try{d=t(d)}catch(t){e.call(this,t);break}}try{c=dr.call(this,d)}catch(t){return Promise.reject(t)}for(u=0,h=l.length;u<h;)c=c.then(l[u++],l[u++]);return c}getUri(t){return Fn(sr((t=pr(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}Oe.forEach(["delete","get","head","options"],(function(t){_r.prototype[t]=function(e,n){return this.request(pr(n||{},{method:t,url:e,data:(n||{}).data}))}})),Oe.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,i){return this.request(pr(i||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}_r.prototype[t]=e(),_r.prototype[t+"Form"]=e(!0)}));var br=_r;class wr{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,i){n.reason||(n.reason=new ir(t,r,i),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;const e=new wr((function(e){t=e}));return{token:e,cancel:t}}}var Ar=wr;const Er={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Er).forEach((([t,e])=>{Er[e]=t}));var $r=Er;const Sr=function t(e){const n=new br(e),r=Xt(br.prototype.request,n);return Oe.extend(r,br.prototype,n,{allOwnKeys:!0}),Oe.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return t(pr(e,n))},r}(Jn);Sr.Axios=br,Sr.CanceledError=ir,Sr.CancelToken=Ar,Sr.isCancel=rr,Sr.VERSION="1.4.0",Sr.toFormData=Nn,Sr.AxiosError=Cn,Sr.Cancel=Sr.CanceledError,Sr.all=function(t){return Promise.all(t)},Sr.spread=function(t){return function(e){return t.apply(null,e)}},Sr.isAxiosError=function(t){return Oe.isObject(t)&&!0===t.isAxiosError},Sr.mergeConfig=pr,Sr.AxiosHeaders=er,Sr.formToJSON=t=>Yn(Oe.isHTMLForm(t)?new FormData(t):t),Sr.HttpStatusCode=$r,Sr.default=Sr;var xr=Sr;const Tr=async t=>{if(t.url)try{const e=await xr.get(t.url,{responseType:"text"});if("string"==typeof e.data)return e.data}catch(e){console.error("Could not fetch data from url",e,t)}else if(t.template)return t.template;return""};class Rr{constructor(){this.loadPartials=()=>{const t=[];var e;return(e=this.partials,Object.keys(e).sort(((t,n)=>(e[t].priority||0)-(e[n].priority||0)))).forEach((e=>{const n=this.partials[e];if(n.template){try{this.engine.eta.loadTemplate(e,n.template)}catch(t){console.error(t)}t.push(e)}})),t},this.addPartialsFromCard=async t=>{const e=await(async t=>{var e;const n={};if("custom:linked-lovelace-partials"===t.type){const r=null===(e=t.partials)||void 0===e?void 0:e.map((async t=>{t.key&&(n[t.key]={...t,template:await Tr(t)})}));await Promise.all(r||[])}return n})(t);return this.partials={...this.partials,...e},e},this.refresh()}refresh(){this.engine=new S,this.partials={}}}class Cr{constructor(){this.templateController=new Gt,this.etaController=new Rr,this.registerTemplates=t=>{(t=>Object.keys(t).sort(((e,n)=>(t[e].ll_priority||0)-(t[n].ll_priority||0))))(t).forEach((e=>{const n=t[e];this.templateController.renderAndAddTemplate(e,n)}))},this.registerPartials=async t=>await this.etaController.addPartialsFromCard(t),this.getUpdatedDashboardConfig=async t=>{const e=await P.instance.api.getDashboardConfig(t);if(!e.views)return e;const n=e.views;return Object.keys(n).forEach((t=>{const e=n[t],r=[];if(e.cards&&(e.cards.forEach((t=>{const e=this.templateController.renderCard(t);r.push(e)})),n[t].cards=r),e.sections&&Array.isArray(e.sections))for(let t=0;t<e.sections.length;t++){const n=e.sections[t].cards;n&&Array.isArray(n)&&n.forEach(((n,r)=>{const i=this.templateController.renderCard(n);e.sections[t].cards[r]=i})),e.sections[t].cards=n}})),e.views=n,e},this.getUpdatedDashboardConfigs=async()=>{const t={},e=await P.instance.api.getDashboards();return await Promise.all(e.map((async e=>{const n=await this.getUpdatedDashboardConfig(e.url_path);t[e.url_path||"null"]=n}))),t}}get eta(){return this.etaController.engine.eta}}const kr=t=>1!==(null==t?void 0:t.length)?"s":"";class Or{constructor(){this.linkedLovelaceController=new Cr,this.dashboardsToViews={},this.logs=[],this.forwardLogs=!1,this.addToLogs=({msg:t,level:e="INFO"},...n)=>{const r=(new Date).toISOString(),i=`[${e}]:${t}`;this.logs.push(i),this.forwardLogs&&((t,e,...n)=>{console[t](`%c  LINKED-LOVELACE-UI \n%c  ${e}   `,"color: orange; font-weight: bold; background: black","",...n)})(e.toLowerCase(),t,{timestamp:r},...n)},this.refresh=async()=>{this.addToLogs({msg:"Beginning Refresh"}),this.linkedLovelaceController=new Cr,this.dashboardsToViews={},this.addToLogs({msg:"Discovering Dashboards"});const t=await P.instance.api.getDashboards();this.addToLogs({msg:`Discovered ${t.length} Dashboard${kr(t)}`},t),this.addToLogs({msg:"Retrieving Dashboard Configs"});const e=await Promise.all(t.map((async t=>{var e;try{this.addToLogs({msg:`[url:"${window.location.origin}/${t.url_path}"] Retrieving details for dashboard`},t);const n=await P.instance.api.getDashboardConfig(t.url_path);return this.addToLogs({msg:`[url:"${window.location.origin}/${t.url_path}"] Retrieved ${null===(e=n.views)||void 0===e?void 0:e.length} View${kr(n.views)} for dashboard`},t,n),[n,t]}catch(e){this.addToLogs({msg:`[url:"${window.location.origin}/${t.url_path}"] Failed to retrieve details for dashboard`,level:"ERROR"},t,e)}return[void 0,void 0]})));this.addToLogs({msg:`Retrieved ${e.length}/${t.length} Dashboard Config${kr(t)}`},t,e),this.addToLogs({msg:"Discovering Templates and Partials within Dashboard Configs"});const n={};await Promise.all(e.map((async t=>{const e=t[0],r=t[1];if(null==e?void 0:e.views){const t=r.url_path?r.url_path:"";return this.dashboardsToViews[t]||(this.dashboardsToViews[t]={}),await Promise.all(e.views.map((async e=>{const i=e.path||"";return this.dashboardsToViews[t][i]||(this.dashboardsToViews[t][i]={id:i,templates:{},partials:{}}),this.addToLogs({msg:`[url:"${window.location.origin}/${r.url_path}"] [view:${e.title}] Discovering Templates and Partials`},r,e),await Promise.all((e.cards||[]).map((async o=>{o.ll_key&&(this.addToLogs({msg:`[url:"${window.location.origin}/${r.url_path}"] [view:${e.title}] [template:${o.ll_key}] [priority:${o.ll_priority||0}] Discovered Template`},r,e,o),n[o.ll_key]&&(n[o.ll_key].ll_priority||0)<(o.ll_priority||0)?this.addToLogs({msg:`[url:"${window.location.origin}/${r.url_path}"] [view:${e.title}] Template already exists with tag ${o.ll_key}`,level:"WARN"},r,e,o):n[o.ll_key]=o,this.dashboardsToViews[t][i].templates={...this.dashboardsToViews[t][i].templates,[o.ll_key]:o});const s=await this.linkedLovelaceController.registerPartials(o),a=Object.keys(s);a.length&&this.addToLogs({msg:`[url:"${window.location.origin}/${r.url_path}"] [view:${e.title}] Discovered ${a.length} Partial${kr(a)}`},r,e,s),this.dashboardsToViews[t][i].partials=s})))})))}}))),this.addToLogs({msg:"Registering Partials"}),this.linkedLovelaceController.etaController.loadPartials(),S.instance.eta=this.linkedLovelaceController.eta,this.addToLogs({msg:"Registering Templates"}),this.linkedLovelaceController.registerTemplates(n)},this.update=async(t,e=!1)=>{const n=""===t?null:t,r=`[url:${t||""}]`,i=`[dryRun:${e?"enabled":"disabled"}]`;this.addToLogs({msg:`${i} ${r} Starting Update`},{dryRun:e,urlPath:t});try{this.addToLogs({msg:`${i} ${r} Rendering latest dashboard with templates and partials`},{dryRun:e,urlPath:t});const o=await this.linkedLovelaceController.getUpdatedDashboardConfig(n);if(e)this.addToLogs({msg:`${i} ${r} Would save latest rendered dashboard`},{dryRun:e,urlPath:t,config:o});else try{this.addToLogs({msg:`${i} ${r} Saving latest rendered dashboard`},{dryRun:e,urlPath:t,config:o}),await P.instance.api.setDashboardConfig(n,o)}catch(s){this.addToLogs({msg:`${i} ${r} Failed to update ${s}`,level:"ERROR"},{dryRun:e,urlPath:t,config:o}),console.error("Failed to update DB",n,o,s)}return this.addToLogs({msg:`${i} ${r} Finished Update`},{dryRun:e,urlPath:t}),o}catch(n){return this.addToLogs({msg:`${i} ${r} Failed to render latest dashboard with templates and partials`},{dryRun:e,urlPath:t}),null}},this.updateAll=async(t=!1)=>{const e=`[dryRun:${t?"enabled":"disabled"}]`;this.addToLogs({msg:`${e} Starting Update All`},{dryRun:t});const n=await P.instance.api.getDashboards(),r={};return await Promise.all(n.map((async e=>{const n=await this.update(e.url_path,t);r[e.url_path?e.url_path:""]=n}))),r}}}window.customCards=window.customCards||[],window.customCards.push({type:"linked-lovelace-template",name:"Linked Lovelace Template Card",description:"Help select an existing template for a card"});let Pr=class extends Dt{constructor(){super(),this.handleClick=async()=>{const t=new Or;await t.refresh(),await t.updateAll(),this._repaint()},this.loaded=!1}log(e,...n){this.config.debug&&t(e,...n)}_repaint(){this.loaded=!this.loaded}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._repaint()}static async getConfigElement(){return await Promise.resolve().then((function(){return Jr})),document.createElement("linked-lovelace-template-editor")}static getStubConfig(){return{}}setConfig(t){if(!t)throw new Error(Kt("common.invalid_configuration"));t.test_gui&&Yt().setEditMode(!0);this.config={...t,name:"Linked Lovelace Template"}}shouldUpdate(t){return!!this.config&&(void 0!==t.get("loaded")||Vt(this,t,!1))}render(){return mt`
      <ha-card .header=${this.config.name} tabindex="0" .label=${"Linked Lovelace Template"}
        class="linked-lovelace-container">
        <div class="card-content">
        <p>This card no longer runs updates for Linked Lovelace. Please create a new card with the new type <code>linked-lovelace-status</code>.</p>
        <p>Please use this card to place pre-created templates on your dashboards, and run an update with the new card.
        </div>
      </ha-card>
    `}static get styles(){return I`
      .linked-lovelace-container {
        background-color: rgba(0, 0, 0, 0);
        border: 1px solid;
      }
    `}};L([It({attribute:!1})],Pr.prototype,"hass",void 0),L([Mt()],Pr.prototype,"loaded",void 0),L([Mt()],Pr.prototype,"config",void 0),Pr=L([jt("linked-lovelace-template")],Pr);var Lr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Ur(t){t=t||{};this.Timeout=t.timeout||1,this.EditCost=t.editCost||4}Ur.Diff,Ur.prototype.main=function(t,e,n,r){void 0===r&&(r=this.Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Timeout);var i=r;if(null==t||null==e)throw new Error("Null input. (diff_main)");if(t==e)return t?[[0,t]]:[];void 0===n&&(n=!0);var o=n,s=this.commonPrefix(t,e),a=t.substring(0,s);t=t.substring(s),e=e.substring(s),s=this.commonSuffix(t,e);var l=t.substring(t.length-s);t=t.substring(0,t.length-s),e=e.substring(0,e.length-s);var c=this.compute_(t,e,o,i);return a&&c.unshift([0,a]),l&&c.push([0,l]),this.cleanupMerge(c),c},Ur.prototype.compute_=function(t,e,n,r){var i;if(!t)return[[1,e]];if(!e)return[[-1,t]];var o=t.length>e.length?t:e,s=t.length>e.length?e:t,a=o.indexOf(s);if(-1!=a)return i=[[1,o.substring(0,a)],[0,s],[1,o.substring(a+s.length)]],t.length>e.length&&(i[0][0]=i[2][0]=-1),i;if(1==s.length)return[[-1,t],[1,e]];var l=this.halfMatch_(t,e);if(l){var c=l[0],h=l[1],u=l[2],d=l[3],f=l[4],p=this.main(c,u,n,r),g=this.main(h,d,n,r);return p.concat([[0,f]],g)}return n&&t.length>100&&e.length>100?this.lineMode_(t,e,r):this.bisect_(t,e,r)},Ur.prototype.lineMode_=function(t,e,n){t=(h=this.linesToChars_(t,e)).chars1,e=h.chars2;var r=h.lineArray,i=this.main(t,e,!1,n);this.charsToLines_(i,r),this.cleanupSemantic(i),i.push([0,""]);for(var o=0,s=0,a=0,l="",c="";o<i.length;){switch(i[o][0]){case 1:a++,c+=i[o][1];break;case-1:s++,l+=i[o][1];break;case 0:if(s>=1&&a>=1){i.splice(o-s-a,s+a),o=o-s-a;for(var h,u=(h=this.main(l,c,!1,n)).length-1;u>=0;u--)i.splice(o,0,h[u]);o+=h.length}a=0,s=0,l="",c=""}o++}return i.pop(),i},Ur.prototype.bisect_=function(t,e,n){for(var r=t.length,i=e.length,o=Math.ceil((r+i)/2),s=o,a=2*o,l=new Array(a),c=new Array(a),h=0;h<a;h++)l[h]=-1,c[h]=-1;l[s+1]=0,c[s+1]=0;for(var u=r-i,d=u%2!=0,f=0,p=0,g=0,m=0,y=0;y<o&&!((new Date).getTime()>n);y++){for(var v=-y+f;v<=y-p;v+=2){for(var _=s+v,b=(S=v==-y||v!=y&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-v;S<r&&b<i&&t.charAt(S)==e.charAt(b);)S++,b++;if(l[_]=S,S>r)p+=2;else if(b>i)f+=2;else if(d){if((E=s+u-v)>=0&&E<a&&-1!=c[E])if(S>=(A=r-c[E]))return this.bisectSplit_(t,e,S,b,n)}}for(var w=-y+g;w<=y-m;w+=2){for(var A,E=s+w,$=(A=w==-y||w!=y&&c[E-1]<c[E+1]?c[E+1]:c[E-1]+1)-w;A<r&&$<i&&t.charAt(r-A-1)==e.charAt(i-$-1);)A++,$++;if(c[E]=A,A>r)m+=2;else if($>i)g+=2;else if(!d){if((_=s+u-w)>=0&&_<a&&-1!=l[_]){var S;b=s+(S=l[_])-_;if(S>=(A=r-A))return this.bisectSplit_(t,e,S,b,n)}}}}return[[-1,t],[1,e]]},Ur.prototype.bisectSplit_=function(t,e,n,r,i){var o=t.substring(0,n),s=e.substring(0,r),a=t.substring(n),l=e.substring(r),c=this.main(o,s,!1,i),h=this.main(a,l,!1,i);return c.concat(h)},Ur.prototype.linesToChars_=function(t,e){var n=[],r={};function i(t){for(var e="",i=0,o=-1,s=n.length;o<t.length-1;){-1==(o=t.indexOf("\n",i))&&(o=t.length-1);var a=t.substring(i,o+1);i=o+1,(r.hasOwnProperty?r.hasOwnProperty(a):void 0!==r[a])?e+=String.fromCharCode(r[a]):(e+=String.fromCharCode(s),r[a]=s,n[s++]=a)}return e}return n[0]="",{chars1:i(t),chars2:i(e),lineArray:n}},Ur.prototype.charsToLines_=function(t,e){for(var n=0;n<t.length;n++){for(var r=t[n][1],i=[],o=0;o<r.length;o++)i[o]=e[r.charCodeAt(o)];t[n][1]=i.join("")}},Ur.prototype.commonPrefix=function(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},Ur.prototype.commonSuffix=function(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return i},Ur.prototype.commonOverlap_=function(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,s=1;;){var a=t.substring(i-s),l=e.indexOf(a);if(-1==l)return o;s+=l,0!=l&&t.substring(i-s)!=e.substring(0,s)||(o=s,s++)}},Ur.prototype.halfMatch_=function(t,e){if(this.Timeout<=0)return null;var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;var i=this;function o(t,e,n){for(var r,o,s,a,l=t.substring(n,n+Math.floor(t.length/4)),c=-1,h="";-1!=(c=e.indexOf(l,c+1));){var u=i.commonPrefix(t.substring(n),e.substring(c)),d=i.commonSuffix(t.substring(0,n),e.substring(0,c));h.length<d+u&&(h=e.substring(c-d,c)+e.substring(c,c+u),r=t.substring(0,n-d),o=t.substring(n+u),s=e.substring(0,c-d),a=e.substring(c+u))}return 2*h.length>=t.length?[r,o,s,a,h]:null}var s,a,l,c,h,u=o(n,r,Math.ceil(n.length/4)),d=o(n,r,Math.ceil(n.length/2));return u||d?(s=d?u&&u[4].length>d[4].length?u:d:u,t.length>e.length?(a=s[0],l=s[1],c=s[2],h=s[3]):(c=s[0],h=s[1],a=s[2],l=s[3]),[a,l,c,h,s[4]]):null},Ur.prototype.cleanupSemantic=function(t){for(var e=!1,n=[],r=0,i=null,o=0,s=0,a=0,l=0,c=0;o<t.length;)0==t[o][0]?(n[r++]=o,s=l,a=c,l=0,c=0,i=t[o][1]):(1==t[o][0]?l+=t[o][1].length:c+=t[o][1].length,i&&i.length<=Math.max(s,a)&&i.length<=Math.max(l,c)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,o=--r>0?n[r-1]:-1,s=0,a=0,l=0,c=0,i=null,e=!0)),o++;for(e&&this.cleanupMerge(t),this.cleanupSemanticLossless(t),o=1;o<t.length;){if(-1==t[o-1][0]&&1==t[o][0]){var h=t[o-1][1],u=t[o][1],d=this.commonOverlap_(h,u),f=this.commonOverlap_(u,h);d>=f?(d>=h.length/2||d>=u.length/2)&&(t.splice(o,0,[0,u.substring(0,d)]),t[o-1][1]=h.substring(0,h.length-d),t[o+1][1]=u.substring(d),o++):(f>=h.length/2||f>=u.length/2)&&(t.splice(o,0,[0,h.substring(0,f)]),t[o-1][0]=1,t[o-1][1]=u.substring(0,u.length-f),t[o+1][0]=-1,t[o+1][1]=h.substring(f),o++),o++}o++}},Ur.prototype.cleanupSemanticLossless=function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),i=n.match(Ur.nonAlphaNumericRegex_),o=r.match(Ur.nonAlphaNumericRegex_),s=i&&n.match(Ur.whitespaceRegex_),a=o&&r.match(Ur.whitespaceRegex_),l=s&&n.match(Ur.linebreakRegex_),c=a&&r.match(Ur.linebreakRegex_),h=l&&t.match(Ur.blanklineEndRegex_),u=c&&e.match(Ur.blanklineStartRegex_);return h||u?5:l||c?4:i&&!s&&a?3:s||a?2:i||o?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],i=t[n][1],o=t[n+1][1],s=this.commonSuffix(r,i);if(s){var a=i.substring(i.length-s);r=r.substring(0,r.length-s),i=a+i.substring(0,i.length-s),o=a+o}for(var l=r,c=i,h=o,u=e(r,i)+e(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var d=e(r,i)+e(i,o);d>=u&&(u=d,l=r,c=i,h=o)}t[n-1][1]!=l&&(l?t[n-1][1]=l:(t.splice(n-1,1),n--),t[n][1]=c,h?t[n+1][1]=h:(t.splice(n+1,1),n--))}n++}},Ur.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,Ur.whitespaceRegex_=/\s/,Ur.linebreakRegex_=/[\r\n]/,Ur.blanklineEndRegex_=/\n\r?\n$/,Ur.blanklineStartRegex_=/^\r?\n\r?\n/,Ur.prototype.cleanupEfficiency=function(t){for(var e=!1,n=[],r=0,i=null,o=0,s=!1,a=!1,l=!1,c=!1;o<t.length;)0==t[o][0]?(t[o][1].length<this.EditCost&&(l||c)?(n[r++]=o,s=l,a=c,i=t[o][1]):(r=0,i=null),l=c=!1):(-1==t[o][0]?c=!0:l=!0,i&&(s&&a&&l&&c||i.length<this.EditCost/2&&s+a+l+c==3)&&(t.splice(n[r-1],0,[-1,i]),t[n[r-1]+1][0]=1,r--,i=null,s&&a?(l=c=!0,r=0):(o=--r>0?n[r-1]:-1,l=c=!1),e=!0)),o++;e&&this.cleanupMerge(t)},Ur.prototype.cleanupMerge=function(t){t.push([0,""]);for(var e,n=0,r=0,i=0,o="",s="";n<t.length;)switch(t[n][0]){case 1:i++,s+=t[n][1],n++;break;case-1:r++,o+=t[n][1],n++;break;case 0:r+i>1?(0!==r&&0!==i&&(0!==(e=this.commonPrefix(s,o))&&(n-r-i>0&&0==t[n-r-i-1][0]?t[n-r-i-1][1]+=s.substring(0,e):(t.splice(0,0,[0,s.substring(0,e)]),n++),s=s.substring(e),o=o.substring(e)),0!==(e=this.commonSuffix(s,o))&&(t[n][1]=s.substring(s.length-e)+t[n][1],s=s.substring(0,s.length-e),o=o.substring(0,o.length-e))),0===r?t.splice(n-i,r+i,[1,s]):0===i?t.splice(n-r,r+i,[-1,o]):t.splice(n-r-i,r+i,[-1,o],[1,s]),n=n-r-i+(r?1:0)+(i?1:0)+1):0!==n&&0==t[n-1][0]?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,i=0,r=0,o="",s=""}""===t[t.length-1][1]&&t.pop();var a=!1;for(n=1;n<t.length-1;)0==t[n-1][0]&&0==t[n+1][0]&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),a=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),a=!0)),n++;a&&this.cleanupMerge(t)},Ur.prototype.xIndex=function(t,e){var n,r=0,i=0,o=0,s=0;for(n=0;n<t.length&&(1!==t[n][0]&&(r+=t[n][1].length),-1!==t[n][0]&&(i+=t[n][1].length),!(r>e));n++)o=r,s=i;return t.length!=n&&-1===t[n][0]?s:s+(e-o)},Ur.prototype.prettyHtml=function(t){for(var e=[],n=/&/g,r=/</g,i=/>/g,o=/\n/g,s=0;s<t.length;s++){var a=t[s][0],l=t[s][1].replace(n,"&amp;").replace(r,"&lt;").replace(i,"&gt;").replace(o,"<br/>");switch(a){case 1:e[s]="<ins>"+l+"</ins>";break;case-1:e[s]="<del>"+l+"</del>";break;case 0:e[s]="<span>"+l+"</span>"}}return e.join("")},Ur.prototype.text1=function(t){for(var e=[],n=0;n<t.length;n++)1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},Ur.prototype.text2=function(t){for(var e=[],n=0;n<t.length;n++)-1!==t[n][0]&&(e[n]=t[n][1]);return e.join("")},Ur.prototype.levenshtein=function(t){for(var e=0,n=0,r=0,i=0;i<t.length;i++){var o=t[i][0],s=t[i][1];switch(o){case 1:n+=s.length;break;case-1:r+=s.length;break;case 0:e+=Math.max(n,r),n=0,r=0}}return e+=Math.max(n,r)},Ur.prototype.toDelta=function(t){for(var e=[],n=0;n<t.length;n++)switch(t[n][0]){case 1:e[n]="+"+encodeURI(t[n][1]);break;case-1:e[n]="-"+t[n][1].length;break;case 0:e[n]="="+t[n][1].length}return e.join("\t").replace(/%20/g," ")},Ur.prototype.fromDelta=function(t,e){for(var n=[],r=0,i=0,o=e.split(/\t/g),s=0;s<o.length;s++){var a=o[s].substring(1);switch(o[s].charAt(0)){case"+":try{n[r++]=[1,decodeURI(a)]}catch(t){throw new Error("Illegal escape in diff_fromDelta: "+a)}break;case"-":case"=":var l=parseInt(a,10);if(isNaN(l)||l<0)throw new Error("Invalid number in diff_fromDelta: "+a);var c=t.substring(i,i+=l);"="==o[s].charAt(0)?n[r++]=[0,c]:n[r++]=[-1,c];break;default:if(o[s])throw new Error("Invalid diff operation in diff_fromDelta: "+o[s])}}if(i!=t.length)throw new Error("Delta length ("+i+") does not equal source text length ("+t.length+").");return n},Lr.diff=Ur,Lr.DIFF_DELETE=-1,Lr.DIFF_INSERT=1,Lr.DIFF_EQUAL=0;var Dr=Ur;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Nr=2;let jr=class extends class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,n){this._$Ct=t,this._$AM=e,this._$Ci=n}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}}{constructor(t){if(super(t),this.et=vt,t.type!==Nr)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===vt||null==t)return this.ft=void 0,this.et=t;if(t===yt)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.et)return this.ft;this.et=t;const e=[t];return e.raw=e,this.ft={_$litType$:this.constructor.resultType,strings:e,values:[]}}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */jr.directiveName="unsafeHTML",jr.resultType=1;const Br=(t=>(...e)=>({_$litDirective$:t,values:e}))(jr),Ir=t=>JSON.stringify(t,null,2),Mr=(t={},e={})=>{try{const n=new Dr;return n.main(Ir(t),Ir(e),!1,0)}catch(t){return console.error(t),[]}},Fr=(t={},e={})=>{try{const n=new Dr,r=Mr(t,e);return n.prettyHtml(r)}catch(t){return console.error(t),"Could not create diff. Check browser logs for details."}};window.customCards=window.customCards||[],window.customCards.push({type:"linked-lovelace-status",name:"Linked Lovelace Status Card",description:"An overview card for Linked Lovelace"});let Hr=class extends Dt{constructor(){super(),this._partials={},this._templates={},this._dashboards={},this._diffedDashboards={},this._backedUpDashboardConfigs={},this._backupString="",this._loaded=!1,this._show_difference=!1,this._show_logs=!1,this._show_partials=!1,this._show_templates=!1,this._difference="",this._tabs={dashboards:{name:"Dashboards"},templates:{name:"Templates"},partials:{name:"Partials"},logs:{name:"Logs"}},this._tab=Object.keys(this._tabs)[0]||"",this._controller=new Or,this.handleDryRun=async()=>{const t=await this._controller.updateAll(!0);this._difference=Fr(this._backedUpDashboardConfigs,t),this._diffedDashboards={},Object.keys(t).forEach((e=>{const n=t[e],r=this._backedUpDashboardConfigs[e];try{r&&n&&((t={},e={})=>Mr(t,e).length>1)(r,n)&&(this._diffedDashboards[e]=Fr(r,n))}catch(t){console.error(`Failed to make Diff of dashboard '${e}'`,r,n,e)}})),this._repaint()},this.handleClick=async()=>{var t;this._difference="";const e=(null===(t=this._controller)||void 0===t?void 0:t.forwardLogs)||!1;this._controller=new Or,this._controller.forwardLogs=e,this._controller.addToLogs({msg:"Backing up current dashboard data. Ignore 'Update' Messages. Dry-Run is enabled."});const n={};await P.instance.api.getDashboards().then((async t=>Promise.all(t.map((async t=>await P.instance.api.getDashboardConfig(t.url_path).then((e=>{n[t.url_path?t.url_path:""]=e})).catch((e=>{console.error(`Failed to get dashboard at url ${t.url_path}`,t,e)}))))))).catch((t=>{console.error("Failed getting all existing dashboards. Contact developer via Github Issues.",t)})),this._backedUpDashboardConfigs=n,this._backupString="text/json;charset=utf-8,"+encodeURIComponent(Ir(n)),this._controller.addToLogs({msg:"Backed up current dashboard data. Download as JSON via button."}),await this._controller.refresh(),this._partials=this._controller.linkedLovelaceController.etaController.partials,this._templates=this._controller.linkedLovelaceController.templateController.templates;(await P.instance.api.getDashboards()).forEach((t=>{this._dashboards[t.url_path?t.url_path:""]=t})),this._controller.addToLogs({msg:"Determining Changes. Ignore 'Update' Messages. Dry-Run is enabled."}),await this.handleDryRun(),this._controller.addToLogs({msg:"Determined Changes. Ignore 'Update' Messages. Dry-Run is enabled."}),this._controller.addToLogs({msg:"Ready for user input."}),this._loaded=!0,this._repaint()},this.toggleShowDryRun=async()=>{this._show_difference=!this._show_difference,this._repaint()},this.toggleShowLogs=async()=>{this._show_logs=!this._show_logs,this._repaint()},this.toggleShowPartials=async()=>{this._show_partials=!this._show_partials,this._repaint()},this.toggleShowTemplates=async()=>{this._show_templates=!this._show_templates,this._repaint()},this.toggleLogs=async()=>{this._controller&&(this._controller.forwardLogs=!this._controller.forwardLogs),this._repaint()},this.overwriteDashboard=async(t,e=!1)=>{(e||confirm(`This will overwrite the contents of the dashboard located at the url '${window.location.origin}/${t}'. Proceed at your own risk. Be sure to back up your system before making changes you are not sure about.`))&&(await this._controller.update(t),this._repaint())},this.handleRun=async()=>{if(confirm("This will overwrite the contents of all modified dashboards. Proceed at your own risk. Be sure to back up your system before making changes you are not sure about.")){const t=Object.keys(this._diffedDashboards);for(let e=0;e<t.length;e++)await this.overwriteDashboard(t[e],!0);this._repaint()}},this.loaded=!1}log(e,...n){this.config.debug&&t(e,...n)}_repaint(){this.loaded=!this.loaded}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._repaint()}static async getConfigElement(){return await Promise.resolve().then((function(){return Gr})),document.createElement("linked-lovelace-status-editor")}static getStubConfig(){return{}}setConfig(t){if(!t)throw new Error(Kt("common.invalid_configuration"));t.test_gui&&Yt().setEditMode(!0);this.config={...t,name:"Linked Lovelace Status"}}shouldUpdate(t){return!!this.config&&(void 0!==t.get("loaded")||Vt(this,t,!1))}render(){var t,e,n,r,i;const o=Object.keys(this._diffedDashboards);return mt`
      <ha-card .header=${this.config.name} tabindex="0" .label=${"Linked Lovelace Template"}
        class="linked-lovelace-container">
        <div class="card-content">
        <div class="content">
        ${this._loaded?mt`
        <div class="tabs">
        ${Object.keys(this._tabs).map((t=>{const e=this._tabs[t];return mt`
            <div class="tab ${this._tab===t?"active":""}" @click="${()=>{this._tab=t,this._repaint()}}">${e.name}</div>
          `}))}
        </div>
        <div>
        <div class="tab-content ${"dashboards"===this._tab?"active":""}">
        </div>
        <div class="tab-content ${"templates"===this._tab?"active":""}">
          <div class="unsafe-html">
          <div class="accordion expanded">
          <span class="accordion-bar" @click=${this.toggleShowTemplates}><span class="icon">${this._show_templates?mt`&#9660;`:mt`&#9658;`} </span><span class="title">Templates</span></span>
          </div>
          ${Object.keys((null===(t=this._controller)||void 0===t?void 0:t.dashboardsToViews)||{}).map((t=>{var e;const n=null===(e=this._controller)||void 0===e?void 0:e.dashboardsToViews[t];return Object.keys(n||{}).map((e=>{const r=n[e],i=r.templates;return Object.keys(i||{}).map((e=>{const n=i[e];return mt`
              <a href="/${t||"lovelace"}/${r.id}">${e}</a>
              <pre class="${this._show_templates?"":"hidden"}">
              <code>
              ${Br(Fr(n,n))}
              </code>
              </pre>
                `}))}))}))}
          </div>
        </div>
        <div class="tab-content ${"partials"===this._tab?"active":""}">
          <div class="unsafe-html">
          <div class="accordion expanded">
          <span class="accordion-bar" @click=${this.toggleShowPartials}><span class="icon">${this._show_partials?mt`&#9660;`:mt`&#9658;`} </span><span class="title">Partials</span></span>
          </div>
          ${Object.keys((null===(e=this._controller)||void 0===e?void 0:e.dashboardsToViews)||{}).map((t=>{var e;const n=null===(e=this._controller)||void 0===e?void 0:e.dashboardsToViews[t];return Object.keys(n||{}).map((e=>{const r=n[e],i=r.partials;return Object.keys(i||{}).map((e=>{const n=i[e];return mt`
            <a href="/${t||"lovelace"}/${r.id}">${e}</a>
            <pre class="${this._show_partials?"":"hidden"}">
            <code>
            ${Br(Fr(n,n))}
            </code>
            </pre>
              `}))}))}))}
          </div>
        </div>
        <div class="tab-content ${"logs"===this._tab?"active":""}">
          <div class="unsafe-html">
          <div class="accordion expanded">
          <span class="accordion-bar" @click=${this.toggleShowLogs}><span class="icon">${this._show_logs?mt`&#9660;`:mt`&#9658;`} </span><span class="title">Logs</span></span>
          </div>
          <pre class="${this._show_logs?"":"hidden"}">
          <code>
          ${null===(n=this._controller)||void 0===n?void 0:n.logs.map((t=>mt`<p>${t}</p>`))}
          </code>
          </pre>
          </div>
        </div>
        </div>
        `:""}
        </div>
        ${o.length&&this._difference?mt`
        <div class="tab-content ${"dashboards"===this._tab?"active":""}">
        <div class="unsafe-html">
        <div class="accordion expanded">
        <span class="accordion-bar" @click=${this.toggleShowDryRun}><span class="icon">${this._show_difference?mt`&#9660;`:mt`&#9658;`} </span><span class="title">Preview Changes</span></span>
        </div>
        ${this._difference&&mt`
        ${this._show_difference?mt`<div>
        ${o.map((t=>{const e=this._dashboards[t],n=this._diffedDashboards[t];return mt`
          <div class="header">
            <p>Dashboard: ${e.title}</p>
            <ha-progress-button @click=${()=>{this.overwriteDashboard(t)}}>
                 Update
            </ha-progress-button>
          </div>
          <pre class="${this._show_difference?"":"hidden"}">
          <code>
          ${Br(n)}
          </code>
          </pre>
          `}))}
        </div>`:""}
        `}
        </div>
        </div>
        `:""}
        <div class="card-actions">
          ${this._loaded?mt`
          <ha-progress-button @click=${this.toggleLogs}>
            ${(null===(i=this._controller)||void 0===i?void 0:i.forwardLogs)?"Silence Console Logging":"Activate Console Logging"}
          </ha-progress-button>
          <ha-progress-button @click=${this.handleClick}>
            Refresh
          </ha-progress-button>
          
          ${o.length?mt`<ha-progress-button @click=${this.handleRun}>
            Update All
          </ha-progress-button>`:""}
          `:mt`
          <ha-progress-button @click=${this.toggleLogs}>
            ${(null===(r=this._controller)||void 0===r?void 0:r.forwardLogs)?"Silence Console Logging":"Activate Console Logging"}
          </ha-progress-button>
          <ha-progress-button @click=${this.handleClick}>
            Load Data
          </ha-progress-button>
          `}
        </div>
      </ha-card>
    `}static get styles(){return I`
      .linked-lovelace-container {
        background-color: rgba(0, 0, 0, 0);
        border: 1px solid;
      }
      .content {
        padding: 0;
      }
      .tab-content {
        display: none;
        &.active {
          display: block;
          padding: 16px 0;
        }
      }
      .tabs {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        .tab {
          padding: 4px 8px;
          cursor: pointer;
          border-left: 0.5px solid var(--text-primary-color);
          border-right: 0.5px solid var(--text-primary-color);
          border-bottom: 1px solid var(--text-primary-color);
          &:not(.active):hover {
            background-color: var(--secondary-background-color);
          }
          &.active {
            background-color: var(--secondary-background-color);
          }
          &.active:hover {
            background-color: var(--fc-button-hover-bg-color);
            cursor: not-allowed;
          }
          &:not(.active):active {
            background-color: var(--fc-button-hover-bg-color);
          }
        }
      }
      .accordion.expanded {
        & .accordion-bar {
          cursor: pointer;
          font-size: 18px;          
        }
        & .icon {
          transform: rotate(-90deg);
        }
      }
      .header {
        display: flex;
        flex-direction: row;
        justify-content: flex-start;
        align-items: center;
      }
      .download {
        text-decoration: none;
      }
      .unsafe-html {
        pre {
          overflow: auto;
          max-height: 400px;
          background-color: var(--text-primary-color);
          &.hidden {
            display: none;
          }
        }
        code {
          max-width: 100%;
          background-color: var(--text-primary-color);
          color: var(--card-background-color);
          display: flex;
          flex-direction: column;
          justify-content: flex-start;
          align-items: flex-start;
          p {
            margin: 0;
          }
        }
        del {
          background-color: var(--error-color);
        }
        ins {
          background-color: var(--success-color);
        }
      }
    `}};L([Mt()],Hr.prototype,"_partials",void 0),L([Mt()],Hr.prototype,"_templates",void 0),L([Mt()],Hr.prototype,"_dashboards",void 0),L([Mt()],Hr.prototype,"_diffedDashboards",void 0),L([Mt()],Hr.prototype,"_backedUpDashboardConfigs",void 0),L([Mt()],Hr.prototype,"_backupString",void 0),L([Mt()],Hr.prototype,"_loaded",void 0),L([Mt()],Hr.prototype,"_show_difference",void 0),L([Mt()],Hr.prototype,"_show_logs",void 0),L([Mt()],Hr.prototype,"_show_partials",void 0),L([Mt()],Hr.prototype,"_show_templates",void 0),L([Mt()],Hr.prototype,"_difference",void 0),L([Mt()],Hr.prototype,"_tabs",void 0),L([Mt()],Hr.prototype,"_tab",void 0),L([It({attribute:!1})],Hr.prototype,"hass",void 0),L([Mt()],Hr.prototype,"loaded",void 0),L([Mt()],Hr.prototype,"config",void 0),Hr=L([jt("linked-lovelace-status")],Hr),window.customCards=window.customCards||[],window.customCards.push({type:"linked-lovelace-partials",name:"Linked Lovelace Partials Card",description:"Use this card to add ETA partials"});let zr=class extends Dt{constructor(){super(),this.loaded=!1}log(e,...n){this.config.debug&&t(e,...n)}_repaint(){this.loaded=!this.loaded}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._repaint()}static getStubConfig(){return{}}setConfig(t){if(!t)throw new Error(Kt("common.invalid_configuration"));t.test_gui&&Yt().setEditMode(!0);this.config={...t,name:"Linked Lovelace Eta JS Partials"}}shouldUpdate(t){return!!this.config&&(void 0!==t.get("loaded")||Vt(this,t,!1))}render(){return mt`
      <ha-card .header=${this.config.name} tabindex="0" .label=${"Linked Lovelace Eta JS Partials"}
        class="linked-lovelace-container">
        <div class="card-content">${Object.values(this.config.partials||{}).map((t=>t.key)).join(" ")}</div>
        <div class="card-actions">
        </div>
      </ha-card>
    `}static get styles(){return I`
      .linked-lovelace-container {
        background-color: rgba(0, 0, 0, 0);
        border: 1px solid;
      }
    `}};var Vr;L([It({attribute:!1})],zr.prototype,"hass",void 0),L([Mt()],zr.prototype,"loaded",void 0),L([Mt()],zr.prototype,"config",void 0),zr=L([jt("linked-lovelace-partials")],zr),Vr=()=>{t("Version: 2.2.5")},(async()=>{for(;void 0===customElements.get("home-assistant");)await new Promise((t=>window.setTimeout(t,100)));k.instance.log("initalized"),Vr&&Vr()})();
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const Yr=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function qr(t){return class extends t{createRenderRoot(){const t=this.constructor,{registry:e,elementDefinitions:n,shadowRootOptions:r}=t;n&&!e&&(t.registry=new CustomElementRegistry,Object.entries(n).forEach((([e,n])=>t.registry.define(e,n))));const i=this.renderOptions.creationScope=this.attachShadow({...r,customElements:t.registry});return((t,e)=>{Yr?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const n=document.createElement("style"),r=window.litNonce;void 0!==r&&n.setAttribute("nonce",r),n.textContent=e.cssText,t.appendChild(n)}))})(i,this.constructor.elementStyles),i}}}let Wr=class extends(qr(Dt)){constructor(){super(...arguments),this._loaded=!1,this._controller=new Or,this._initialized=!1}setConfig(t){this._config=t,this.loadCardHelpers()}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),await this._controller.refresh(),this._loaded=!0}shouldUpdate(){return this._initialized||this._initialize(),!0}get _template(){var t;return(null===(t=this._config)||void 0===t?void 0:t.ll_template)||""}renderTemplates(){if(!this._loaded)return mt`<p>loading</p>`;const t=Object.keys(this._controller.linkedLovelaceController.templateController.templates);return t.length?mt`
      <p>Discovered Templates</p>
      <div class="linked-lovelace-chips">
        ${t.map((t=>mt`<button .value=${t}
          .configValue=${"ll_template"}
          @click=${this._valueChanged}>${t}</button>`))}
      </div>
    `:mt`
      <p>Discovered Templates:</p>
      <div class="linked-lovelace-chips">
        No templates found/created.
      </div>
    `}render(){return this.hass&&this._helpers?mt`
      <div class="linked-lovelace-config">
        <span>Read the following carefully. After clicking an option, all of this text will disappear.</span>
        <ol>
        <li>Click a template below to swap the contents of this card with the contents of the template.</li>
        <li>Variables can be provided in a dictionary under the top-level key <code>ll_context</code>.<ul><li>Examples may be provided automatically.</li><li>All other content in the card below the linked lovelace keys will be replaced.</li><li>Templating provided by <a href="https://eta.js.org/" target="_blank">ETA JS</a></li></ul></li>
        <li>The card may be broken when first saved. This is normal.</li>
        <li>It will be updated the next time a user performs an update from the Linked Lovelace Status card<ul><li>You may want to do this after placing all the template cards you need.</li></li>
        </ol>
        <p></p>
        ${this.renderTemplates()}
      </div>
    `:mt``}_initialize(){void 0!==this.hass&&void 0!==this._config&&void 0!==this._helpers&&this._loaded&&(this._initialized=!0)}async loadCardHelpers(){this._helpers=await window.loadCardHelpers()}_valueChanged(t){var e;if(!this._config||!this.hass)return;const n=t.target;if(this[`_${n.configValue}`]!==n.value){if(n.configValue)if(""===n.value){const t={...this._config};delete t[n.configValue],"ll_template"===n.configValue&&(t.ll_context=void 0),this._config=t}else if("ll_template"===n.configValue){const t=null===(e=this._controller)||void 0===e?void 0:e.linkedLovelaceController.templateController.templates[n.value];t&&T(t),this._config={[n.configValue]:void 0!==n.checked?n.checked:n.value,...t,[n.configValue]:void 0!==n.checked?n.checked:n.value}}else this._config={...this._config,[n.configValue]:void 0!==n.checked?n.checked:n.value};!function(t,e,n,r){r=r||{},n=null==n?{}:n;var i=new Event(e,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});i.detail=n,t.dispatchEvent(i)}(this,"config-changed",{config:this._config})}}};Wr.elementDefinitions={},Wr.styles=I`
    .linked-lovelace-config {
      display: flex;
      flex-direction: column;
    }
    .linked-lovelace-config > * {
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .linked-lovelace-chips {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      flex-wrap: wrap;
    }
    mwc-select,
    mwc-textfield {
      margin-bottom: 16px;
      display: block;
    }
    mwc-formfield {
      padding-bottom: 8px;
    }
    mwc-switch {
      --mdc-theme-secondary: var(--switch-checked-color);
    }
    ul {
      max-height: 500px;
      overflow-y: scroll;
    }
  `,L([It({attribute:!1})],Wr.prototype,"hass",void 0),L([Mt()],Wr.prototype,"_config",void 0),L([Mt()],Wr.prototype,"_helpers",void 0),L([Mt()],Wr.prototype,"_loaded",void 0),Wr=L([jt("linked-lovelace-template-editor")],Wr);var Jr=Object.freeze({__proto__:null,get LinkedLovelaceTemplateCardEditor(){return Wr}});let Kr=class extends(qr(Dt)){constructor(){super(...arguments),this._loaded=!1,this._initialized=!1}setConfig(t){this._config=t,this.loadCardHelpers()}async firstUpdated(){await new Promise((t=>setTimeout(t,0))),this._loaded=!0}shouldUpdate(){return this._initialized||this._initialize(),!0}get _template(){var t;return(null===(t=this._config)||void 0===t?void 0:t.template)||""}renderTemplates(){return this._loaded?mt`
      <p>Loaded</p>
    `:mt`<p>loading</p>`}render(){return this.hass&&this._helpers?mt`
      <div class="linked-lovelace-config">
        </div>
    `:mt``}_initialize(){void 0!==this.hass&&void 0!==this._config&&void 0!==this._helpers&&this._loaded&&(this._initialized=!0)}async loadCardHelpers(){this._helpers=await window.loadCardHelpers()}};Kr.elementDefinitions={},Kr.styles=I`
    .linked-lovelace-config {
      display: flex;
      flex-direction: column;
    }
    .linked-lovelace-config > * {
      margin-top: 10px;
      margin-bottom: 10px;
    }
    .linked-lovelace-chips {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      flex-wrap: wrap;
    }
    mwc-select,
    mwc-textfield {
      margin-bottom: 16px;
      display: block;
    }
    mwc-formfield {
      padding-bottom: 8px;
    }
    mwc-switch {
      --mdc-theme-secondary: var(--switch-checked-color);
    }
    ul {
      max-height: 500px;
      overflow-y: scroll;
    }
  `,L([It({attribute:!1})],Kr.prototype,"hass",void 0),L([Mt()],Kr.prototype,"_config",void 0),L([Mt()],Kr.prototype,"_helpers",void 0),L([Mt()],Kr.prototype,"_loaded",void 0),Kr=L([jt("linked-lovelace-status-editor")],Kr);var Gr=Object.freeze({__proto__:null,get LinkedLovelaceStatusCardEditor(){return Kr}});
