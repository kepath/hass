function e(e,t,o,i){var n,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(r=(a<3?n(r):a>3?n(t,o,r):n(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r}"function"==typeof SuppressedError&&SuppressedError;const t=window,o=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),n=new WeakMap;class a{constructor(e,t,o){if(this._$cssResult$=!0,o!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(o&&void 0===e){const o=void 0!==t&&1===t.length;o&&(e=n.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&n.set(t,e))}return e}toString(){return this.cssText}}const r=(e,...t)=>{const o=1===e.length?e[0]:t.reduce(((t,o,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[i+1]),e[0]);return new a(o,e,i)},l=o?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return(e=>new a("string"==typeof e?e:e+"",void 0,i))(t)})(e):e;var s;const d=window,c=d.trustedTypes,u=c?c.emptyScript:"",h=d.reactiveElementPolyfillSupport,p={toAttribute(e,t){switch(t){case Boolean:e=e?u:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},v=(e,t)=>t!==e&&(t==t||e==e),_={attribute:!0,type:String,converter:p,reflect:!1,hasChanged:v},m="finalized";class f extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var t;this.finalize(),(null!==(t=this.h)&&void 0!==t?t:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach(((t,o)=>{const i=this._$Ep(o,t);void 0!==i&&(this._$Ev.set(i,o),e.push(i))})),e}static createProperty(e,t=_){if(t.state&&(t.attribute=!1),this.finalize(),this.elementProperties.set(e,t),!t.noAccessor&&!this.prototype.hasOwnProperty(e)){const o="symbol"==typeof e?Symbol():"__"+e,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(i){const n=this[e];this[t]=i,this.requestUpdate(e,n,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||_}static finalize(){if(this.hasOwnProperty(m))return!1;this[m]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),void 0!==e.h&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const e=this.properties,t=[...Object.getOwnPropertyNames(e),...Object.getOwnPropertySymbols(e)];for(const o of t)this.createProperty(o,e[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(l(e))}else void 0!==e&&t.push(l(e));return t}static _$Ep(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(e=this.constructor.h)||void 0===e||e.forEach((e=>e(this)))}addController(e){var t,o;(null!==(t=this._$ES)&&void 0!==t?t:this._$ES=[]).push(e),void 0!==this.renderRoot&&this.isConnected&&(null===(o=e.hostConnected)||void 0===o||o.call(e))}removeController(e){var t;null===(t=this._$ES)||void 0===t||t.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((e,t)=>{this.hasOwnProperty(t)&&(this._$Ei.set(t,this[t]),delete this[t])}))}createRenderRoot(){var e;const i=null!==(e=this.shadowRoot)&&void 0!==e?e:this.attachShadow(this.constructor.shadowRootOptions);return((e,i)=>{o?e.adoptedStyleSheets=i.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):i.forEach((o=>{const i=document.createElement("style"),n=t.litNonce;void 0!==n&&i.setAttribute("nonce",n),i.textContent=o.cssText,e.appendChild(i)}))})(i,this.constructor.elementStyles),i}connectedCallback(){var e;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostConnected)||void 0===t?void 0:t.call(e)}))}enableUpdating(e){}disconnectedCallback(){var e;null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostDisconnected)||void 0===t?void 0:t.call(e)}))}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$EO(e,t,o=_){var i;const n=this.constructor._$Ep(e,o);if(void 0!==n&&!0===o.reflect){const a=(void 0!==(null===(i=o.converter)||void 0===i?void 0:i.toAttribute)?o.converter:p).toAttribute(t,o.type);this._$El=e,null==a?this.removeAttribute(n):this.setAttribute(n,a),this._$El=null}}_$AK(e,t){var o;const i=this.constructor,n=i._$Ev.get(e);if(void 0!==n&&this._$El!==n){const e=i.getPropertyOptions(n),a="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==(null===(o=e.converter)||void 0===o?void 0:o.fromAttribute)?e.converter:p;this._$El=n,this[n]=a.fromAttribute(t,e.type),this._$El=null}}requestUpdate(e,t,o){let i=!0;void 0!==e&&(((o=o||this.constructor.getPropertyOptions(e)).hasChanged||v)(this[e],t)?(this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$El!==e&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(e,o))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((e,t)=>this[t]=e)),this._$Ei=void 0);let t=!1;const o=this._$AL;try{t=this.shouldUpdate(o),t?(this.willUpdate(o),null===(e=this._$ES)||void 0===e||e.forEach((e=>{var t;return null===(t=e.hostUpdate)||void 0===t?void 0:t.call(e)})),this.update(o)):this._$Ek()}catch(e){throw t=!1,this._$Ek(),e}t&&this._$AE(o)}willUpdate(e){}_$AE(e){var t;null===(t=this._$ES)||void 0===t||t.forEach((e=>{var t;return null===(t=e.hostUpdated)||void 0===t?void 0:t.call(e)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){void 0!==this._$EC&&(this._$EC.forEach(((e,t)=>this._$EO(t,this[t],e))),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}var y;f[m]=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},null==h||h({ReactiveElement:f}),(null!==(s=d.reactiveElementVersions)&&void 0!==s?s:d.reactiveElementVersions=[]).push("1.6.3");const g=window,b=g.trustedTypes,w=b?b.createPolicy("lit-html",{createHTML:e=>e}):void 0,x="$lit$",k=`lit$${(Math.random()+"").slice(9)}$`,$="?"+k,S=`<${$}>`,C=document,E=()=>C.createComment(""),A=e=>null===e||"object"!=typeof e&&"function"!=typeof e,M=Array.isArray,P=e=>M(e)||"function"==typeof(null==e?void 0:e[Symbol.iterator]),D="[ \t\n\f\r]",z=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,T=/-->/g,O=/>/g,N=RegExp(`>|${D}(?:([^\\s"'>=/]+)(${D}*=${D}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),j=/'/g,B=/"/g,I=/^(?:script|style|textarea|title)$/i,L=e=>(t,...o)=>({_$litType$:e,strings:t,values:o}),H=L(1),R=L(2),F=Symbol.for("lit-noChange"),U=Symbol.for("lit-nothing"),G=new WeakMap,V=C.createTreeWalker(C,129,null,!1);function W(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==w?w.createHTML(t):t}const Z=(e,t)=>{const o=e.length-1,i=[];let n,a=2===t?"<svg>":"",r=z;for(let t=0;t<o;t++){const o=e[t];let l,s,d=-1,c=0;for(;c<o.length&&(r.lastIndex=c,s=r.exec(o),null!==s);)c=r.lastIndex,r===z?"!--"===s[1]?r=T:void 0!==s[1]?r=O:void 0!==s[2]?(I.test(s[2])&&(n=RegExp("</"+s[2],"g")),r=N):void 0!==s[3]&&(r=N):r===N?">"===s[0]?(r=null!=n?n:z,d=-1):void 0===s[1]?d=-2:(d=r.lastIndex-s[2].length,l=s[1],r=void 0===s[3]?N:'"'===s[3]?B:j):r===B||r===j?r=N:r===T||r===O?r=z:(r=N,n=void 0);const u=r===N&&e[t+1].startsWith("/>")?" ":"";a+=r===z?o+S:d>=0?(i.push(l),o.slice(0,d)+x+o.slice(d)+k+u):o+k+(-2===d?(i.push(void 0),t):u)}return[W(e,a+(e[o]||"<?>")+(2===t?"</svg>":"")),i]};class K{constructor({strings:e,_$litType$:t},o){let i;this.parts=[];let n=0,a=0;const r=e.length-1,l=this.parts,[s,d]=Z(e,t);if(this.el=K.createElement(s,o),V.currentNode=this.el.content,2===t){const e=this.el.content,t=e.firstChild;t.remove(),e.append(...t.childNodes)}for(;null!==(i=V.nextNode())&&l.length<r;){if(1===i.nodeType){if(i.hasAttributes()){const e=[];for(const t of i.getAttributeNames())if(t.endsWith(x)||t.startsWith(k)){const o=d[a++];if(e.push(t),void 0!==o){const e=i.getAttribute(o.toLowerCase()+x).split(k),t=/([.?@])?(.*)/.exec(o);l.push({type:1,index:n,name:t[2],strings:e,ctor:"."===t[1]?Q:"?"===t[1]?te:"@"===t[1]?oe:J})}else l.push({type:6,index:n})}for(const t of e)i.removeAttribute(t)}if(I.test(i.tagName)){const e=i.textContent.split(k),t=e.length-1;if(t>0){i.textContent=b?b.emptyScript:"";for(let o=0;o<t;o++)i.append(e[o],E()),V.nextNode(),l.push({type:2,index:++n});i.append(e[t],E())}}}else if(8===i.nodeType)if(i.data===$)l.push({type:2,index:n});else{let e=-1;for(;-1!==(e=i.data.indexOf(k,e+1));)l.push({type:7,index:n}),e+=k.length-1}n++}}static createElement(e,t){const o=C.createElement("template");return o.innerHTML=e,o}}function Y(e,t,o=e,i){var n,a,r,l;if(t===F)return t;let s=void 0!==i?null===(n=o._$Co)||void 0===n?void 0:n[i]:o._$Cl;const d=A(t)?void 0:t._$litDirective$;return(null==s?void 0:s.constructor)!==d&&(null===(a=null==s?void 0:s._$AO)||void 0===a||a.call(s,!1),void 0===d?s=void 0:(s=new d(e),s._$AT(e,o,i)),void 0!==i?(null!==(r=(l=o)._$Co)&&void 0!==r?r:l._$Co=[])[i]=s:o._$Cl=s),void 0!==s&&(t=Y(e,s._$AS(e,t.values),s,i)),t}class X{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var t;const{el:{content:o},parts:i}=this._$AD,n=(null!==(t=null==e?void 0:e.creationScope)&&void 0!==t?t:C).importNode(o,!0);V.currentNode=n;let a=V.nextNode(),r=0,l=0,s=i[0];for(;void 0!==s;){if(r===s.index){let t;2===s.type?t=new q(a,a.nextSibling,this,e):1===s.type?t=new s.ctor(a,s.name,s.strings,this,e):6===s.type&&(t=new ie(a,this,e)),this._$AV.push(t),s=i[++l]}r!==(null==s?void 0:s.index)&&(a=V.nextNode(),r++)}return V.currentNode=C,n}v(e){let t=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class q{constructor(e,t,o,i){var n;this.type=2,this._$AH=U,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=i,this._$Cp=null===(n=null==i?void 0:i.isConnected)||void 0===n||n}get _$AU(){var e,t;return null!==(t=null===(e=this._$AM)||void 0===e?void 0:e._$AU)&&void 0!==t?t:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===(null==e?void 0:e.nodeType)&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Y(this,e,t),A(e)?e===U||null==e||""===e?(this._$AH!==U&&this._$AR(),this._$AH=U):e!==this._$AH&&e!==F&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):P(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==U&&A(this._$AH)?this._$AA.nextSibling.data=e:this.$(C.createTextNode(e)),this._$AH=e}g(e){var t;const{values:o,_$litType$:i}=e,n="number"==typeof i?this._$AC(e):(void 0===i.el&&(i.el=K.createElement(W(i.h,i.h[0]),this.options)),i);if((null===(t=this._$AH)||void 0===t?void 0:t._$AD)===n)this._$AH.v(o);else{const e=new X(n,this),t=e.u(this.options);e.v(o),this.$(t),this._$AH=e}}_$AC(e){let t=G.get(e.strings);return void 0===t&&G.set(e.strings,t=new K(e)),t}T(e){M(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,i=0;for(const n of e)i===t.length?t.push(o=new q(this.k(E()),this.k(E()),this,this.options)):o=t[i],o._$AI(n),i++;i<t.length&&(this._$AR(o&&o._$AB.nextSibling,i),t.length=i)}_$AR(e=this._$AA.nextSibling,t){var o;for(null===(o=this._$AP)||void 0===o||o.call(this,!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){var t;void 0===this._$AM&&(this._$Cp=e,null===(t=this._$AP)||void 0===t||t.call(this,e))}}class J{constructor(e,t,o,i,n){this.type=1,this._$AH=U,this._$AN=void 0,this.element=e,this.name=t,this._$AM=i,this.options=n,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=U}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,t=this,o,i){const n=this.strings;let a=!1;if(void 0===n)e=Y(this,e,t,0),a=!A(e)||e!==this._$AH&&e!==F,a&&(this._$AH=e);else{const i=e;let r,l;for(e=n[0],r=0;r<n.length-1;r++)l=Y(this,i[o+r],t,r),l===F&&(l=this._$AH[r]),a||(a=!A(l)||l!==this._$AH[r]),l===U?e=U:e!==U&&(e+=(null!=l?l:"")+n[r+1]),this._$AH[r]=l}a&&!i&&this.j(e)}j(e){e===U?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=e?e:"")}}class Q extends J{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===U?void 0:e}}const ee=b?b.emptyScript:"";class te extends J{constructor(){super(...arguments),this.type=4}j(e){e&&e!==U?this.element.setAttribute(this.name,ee):this.element.removeAttribute(this.name)}}class oe extends J{constructor(e,t,o,i,n){super(e,t,o,i,n),this.type=5}_$AI(e,t=this){var o;if((e=null!==(o=Y(this,e,t,0))&&void 0!==o?o:U)===F)return;const i=this._$AH,n=e===U&&i!==U||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==U&&(i===U||n);n&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var t,o;"function"==typeof this._$AH?this._$AH.call(null!==(o=null===(t=this.options)||void 0===t?void 0:t.host)&&void 0!==o?o:this.element,e):this._$AH.handleEvent(e)}}class ie{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){Y(this,e)}}const ne={O:x,P:k,A:$,C:1,M:Z,L:X,R:P,D:Y,I:q,V:J,H:te,N:oe,U:Q,F:ie},ae=g.litHtmlPolyfillSupport;var re,le;null==ae||ae(K,q),(null!==(y=g.litHtmlVersions)&&void 0!==y?y:g.litHtmlVersions=[]).push("2.8.0");class se extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,t;const o=super.createRenderRoot();return null!==(e=(t=this.renderOptions).renderBefore)&&void 0!==e||(t.renderBefore=o.firstChild),o}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,o)=>{var i,n;const a=null!==(i=null==o?void 0:o.renderBefore)&&void 0!==i?i:t;let r=a._$litPart$;if(void 0===r){const e=null!==(n=null==o?void 0:o.renderBefore)&&void 0!==n?n:null;a._$litPart$=r=new q(t.insertBefore(E(),e),e,void 0,null!=o?o:{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),null===(e=this._$Do)||void 0===e||e.setConnected(!1)}render(){return F}}se.finalized=!0,se._$litElement$=!0,null===(re=globalThis.litElementHydrateSupport)||void 0===re||re.call(globalThis,{LitElement:se});const de=globalThis.litElementPolyfillSupport;null==de||de({LitElement:se}),(null!==(le=globalThis.litElementVersions)&&void 0!==le?le:globalThis.litElementVersions=[]).push("3.3.3");const ce=e=>t=>"function"==typeof t?((e,t)=>(customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:o,elements:i}=t;return{kind:o,elements:i,finisher(t){customElements.define(e,t)}}})(e,t),ue=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?{...t,finisher(o){o.createProperty(t.key,e)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:t.key,initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(o){o.createProperty(t.key,e)}},he=(e,t,o)=>{t.constructor.createProperty(o,e)};function pe(e){return(t,o)=>void 0!==o?he(e,t,o):ue(e,t)}function ve(e){return pe({...e,state:!0})}function _e(e,t){return(({finisher:e,descriptor:t})=>(o,i)=>{var n;if(void 0===i){const i=null!==(n=o.originalKey)&&void 0!==n?n:o.key,a=null!=t?{kind:"method",placement:"prototype",key:i,descriptor:t(o.key)}:{...o,key:i};return null!=e&&(a.finisher=function(t){e(t,i)}),a}{const n=o.constructor;void 0!==t&&Object.defineProperty(o,i,t(i)),null==e||e(n,i)}})({descriptor:o=>{const i={get(){var t,o;return null!==(o=null===(t=this.renderRoot)||void 0===t?void 0:t.querySelector(e))&&void 0!==o?o:null},enumerable:!0,configurable:!0};if(t){const t="symbol"==typeof o?Symbol():"__"+o;i.get=function(){var o,i;return void 0===this[t]&&(this[t]=null!==(i=null===(o=this.renderRoot)||void 0===o?void 0:o.querySelector(e))&&void 0!==i?i:null),this[t]}}return i}})}var me;null===(me=window.HTMLSlotElement)||void 0===me||me.prototype.assignedElements;const fe=(e,t)=>Number(`${Math.round(Number(`${e}e${t}`))}e-${t}`);function ye(e){return!isNaN(parseFloat(e))&&!isNaN(Number(e))}function ge(e,t=0){return ye(e)?Number(e):t}const be=r`:host{--size-circle-entity:79.99px;--mdc-icon-size:24px;--clickable-cursor:pointer;--individual-left-bottom-color:#d0cc5b;--individual-left-top-color:#964cb5;--individual-right-top-color:#b54c9d;--individual-right-bottom-color:#5bd0cc;--non-fossil-color:var(--energy-non-fossil-color, #0f9d58);--icon-non-fossil-color:var(--non-fossil-color, #0f9d58);--icon-solar-color:var(--energy-solar-color, #ff9800);--icon-individual-bottom-color:var(--individual-left-bottom-color, #d0cc5b);--icon-individual-top-color:var(--individual-left-top-color, #964cb5);--icon-grid-color:var(--energy-grid-consumption-color, #488fc2);--icon-battery-color:var(--energy-battery-in-color, #f06292);--icon-home-color:var(--energy-grid-consumption-color, #488fc2);--text-solar-color:var(--primary-text-color);--text-non-fossil-color:var(--primary-text-color);--text-individual-bottom-color:var(--primary-text-color);--text-individual-top-color:var(--primary-text-color);--text-home-color:var(--primary-text-color);--secondary-text-individual-bottom-color:var(--primary-text-color);--secondary-text-individual-top-color:var(--primary-text-color);--text-battery-state-of-charge-color:var(--primary-text-color);--cirlce-grid-color:var(--energy-grid-consumption-color, #488fc2);--circle-battery-color:var(--energy-battery-in-color, #f06292);--battery-grid-line:var(--energy-grid-return-color, #8353d1);--secondary-text-solar-color:var(--primary-text-color);--secondary-text-grid-color:var(--primary-text-color);--secondary-text-home-color:var(--primary-text-color);--secondary-text-non-fossil-color:var(--primary-text-color);--lines-svg-not-flat-line-height:106%;--lines-svg-not-flat-line-top:-2%;--lines-svg-flat-width:calc(100% - 160px);--lines-svg-not-flat-width:calc(103% - 165px);--lines-svg-not-flat-multi-indiv-height:104%;--lines-svg-not-flat-multi-indiv-width:calc(103% - var(--size-circle-entity) * 3.7);--lines-svg-not-flat-multi-indiv-width:calc(((106% - 165px) * 0.5));--lines-svg-not-flat-multi-indiv-width:calc(((130% - 246px) * 0.5));--lines-svg-not-flat-multi-indiv-right-indiv-width:calc(((130% - 210px) * 0.5));--lines-svg-not-flat-multi-indiv-right-indiv-height:103%;--lines-svg-flat-multi-indiv-width:calc((129% - 242px) * 0.5);--lines-svg-flat-left:0;--lines-svg-not-flat-left:0;--dot-size:3.5px;--transparency:var(--transparency-unused-lines);--greyed-out--line-color:#bdbdbd;--text-grid-consumption-color:var(--energy-grid-consumption-color);--text-grid-return-color:var(--energy-grid-return-color);--text-battery-in-color:var(--energy-battery-in-color);--text-battery-out-color:var(--energy-battery-out-color)}ha-card{overflow:hidden}ha-card.full-size{height:100%}.card-content.full-size{transform:scale(2) translateY(30%)}.card-content{position:relative;margin:0 auto}.circle{width:80px;height:80px;border-radius:50%;box-sizing:border-box;border:2px solid;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;font-size:12px;line-height:12px;position:relative;text-decoration:none;color:var(--primary-text-color);gap:2px}.card-content,.row{max-width:470px}.lines{position:absolute;bottom:0;left:var(--size-circle-entity);width:100%;height:146px;display:flex;justify-content:flex-start;padding:0 16px 16px;box-sizing:border-box}.lines:not(.multi-individual) svg.flat-line{left:var(--lines-svg-flat-left)}.lines:not(.multi-individual) svg:not(.flat-line){left:var(--lines-svg-not-flat-left)}.lines:has(svg:not(.flat-line)){margin-left:-1%}.lines.individual-bottom-individual-top{bottom:110px}.lines.high{bottom:100px;height:156px}.lines svg{width:var(--lines-svg-flat-width);height:100%;max-width:340px;position:relative}.lines svg:not(.flat-line){width:var(--lines-svg-not-flat-width);height:var(--lines-svg-not-flat-line-height);top:var(--lines-svg-not-flat-line-top)}.multi-individual{left:calc(var(--size-circle-entity) + 2%);margin-left:-2.2%!important}.multi-individual svg{width:var(--lines-svg-flat-multi-indiv-width)}.multi-individual svg:not(.flat-line){width:var(--lines-svg-not-flat-multi-indiv-width);margin-top:1px;height:var(--lines-svg-not-flat-multi-indiv-height)}.row{display:flex;justify-content:space-between;max-width:500px;margin:0 auto}.circle-container{display:flex;flex-direction:column;align-items:center;z-index:2}.circle-container.solar{height:130px}.circle-container.individual-top{height:130px}.circle-container.individual-bottom{justify-content:flex-end}.circle-container.individual-bottom.bottom{position:relative;top:-20px;margin-bottom:-20px}.circle-container.battery{height:110px;justify-content:flex-end}.spacer{width:var(--size-circle-entity)}.circle-container .circle{cursor:var(--clickable-cursor)}#battery-grid{stroke:var(--battery-grid-line)}ha-icon{padding-bottom:2px}ha-icon.small{--mdc-icon-size:12px}.label{color:var(--secondary-text-color);font-size:12px;max-width:80px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;min-height:20px}line,path{stroke:var(--disabled-text-color);stroke-width:1;fill:none}path.transparency{opacity:calc(calc(100 - var(--transparency))/ 100)}path.grey{stroke:var(--greyed-out--line-color)!important}.circle svg{position:absolute;fill:none;stroke-width:4px;width:100%;height:100%;top:0;left:0}span.secondary-info{color:var(--primary-text-color);font-size:12px;max-width:60px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.individual-top circle,.individual-top path{stroke:var(--icon-individual-left-top-color)}#individual-left-bottom-icon{color:var(--icon-individual-left-bottom-color)}#individual-left-top-icon{color:var(--icon-individual-left-top-color)}#individual-right-bottom-icon{color:var(--icon-individual-right-bottom-color)}#individual-right-top-icon{color:var(--icon-individual-right-top-color)}#solar-icon{color:var(--icon-solar-color)}circle.individual-top{stroke-width:4;width:var(--dot-size);fill:var(--individual-left-top-color)}circle.individual-bottom{stroke-width:4;width:var(--dot-size);fill:var(--individual-left-bottom-color)}.individual-top .circle{border-color:var(--individual-left-top-color)}.individual-bottom circle,.individual-bottom path{stroke:var(--individual-left-bottom-color)}.individual-bottom .circle{border-color:var(--individual-left-bottom-color)}.individual-right-top .circle{border-color:var(--individual-right-top-color)}circle.individual-right-top .circle{fill:var(--individual-right-top-color)}.individual-right-top circle,.individual-right-top path{stroke:var(--individual-right-top-color)}.individual-right-bottom .circle{border-color:var(--individual-right-bottom-color)}circle.individual-right-bottom .circle{fill:var(--individual-right-bottom-color)}.individual-right-bottom circle,.individual-right-bottom path{stroke:var(--individual-right-bottom-color)}.right-individual-flow-container{position:absolute;right:calc(var(--size-circle-entity) - 27% * 1.1 + 6px);width:100%;display:flex;justify-content:flex-end;height:156px;bottom:100px;padding:0 16px 16px;margin-right:-1.2%;box-sizing:border-box;pointer-events:none}.right-individual-flow-container>svg{width:var(--lines-svg-not-flat-multi-indiv-right-indiv-width)}.right-individual-flow{height:var(--lines-svg-not-flat-multi-indiv-right-indiv-height);margin-top:2px;width:var(--lines-svg-not-flat-multi-indiv-width);top:var(--lines-svg-not-flat-line-top);max-width:340px;position:relative}.circle-container.low-carbon{height:130px}.low-carbon path{stroke:var(--non-fossil-color)}.low-carbon .circle{border-color:var(--non-fossil-color)}.low-carbon ha-icon:not(.small){color:var(--icon-non-fossil-color)}circle.low-carbon{stroke-width:4;fill:var(--non-fossil-color);stroke:var(--non-fossil-color)}.solar{color:var(--primary-text-color)}.solar .circle{border-color:var(--energy-solar-color)}.solar ha-icon:not(.small){color:var(--icon-solar-color)}circle.solar,path.solar{stroke:var(--energy-solar-color)}circle.solar{stroke-width:4;fill:var(--energy-solar-color)}.battery .circle{border-color:var(--circle-battery-color)}circle.battery,path.battery{stroke:var(--energy-battery-out-color)}circle.battery-home,path.battery-home{stroke:var(--energy-battery-out-color)}circle.battery-home{stroke-width:4;fill:var(--energy-battery-out-color)}circle.battery-solar,path.battery-solar{stroke:var(--energy-battery-in-color)}circle.battery-solar{stroke-width:4;fill:var(--energy-battery-in-color)}.battery-in{color:var(--energy-battery-in-color)}.battery-out{color:var(--energy-battery-out-color)}span.battery-in{color:var(--text-battery-in-color)}span.battery-out{color:var(--text-battery-out-color)}path.battery-from-grid{stroke:var(--energy-grid-consumption-color)}path.battery-to-grid{stroke:var(--battery-grid-line)}.battery ha-icon:not(.small){color:var(--icon-battery-color)}circle.battery-to-grid,circle.return,path.return{stroke:var(--energy-grid-return-color)}circle.battery-to-grid,circle.return{stroke-width:4;fill:var(--energy-grid-return-color)}.return{color:var(--energy-grid-return-color)}span.return{color:var(--text-grid-return-color)}.grid .circle{border-color:var(--circle-grid-color)}.consumption{color:var(--energy-grid-consumption-color)}span.consumption{color:var(--text-grid-consumption-color)}circle.battery-from-grid,circle.grid,path.grid{stroke:var(--energy-grid-consumption-color)}circle.battery-from-grid,circle.grid{stroke-width:4;fill:var(--energy-grid-consumption-color)}.grid ha-icon:not(.small){color:var(--icon-grid-color)}.home .circle{border-width:0;border-color:var(--primary-color)}.home .circle.border{border-width:2px}.home ha-icon:not(.small){color:var(--icon-home-color)}.circle svg circle{animation:rotate-in .6s ease-in;transition:stroke-dashoffset .4s,stroke-dasharray .4s;fill:none}span.solar{color:var(--text-solar-color)}span.low-carbon{color:var(--text-non-fossil-color)}span.nonFossilFuel.secondary-info{color:var(--secondary-text-non-fossil-color)}#home-circle{color:var(--text-home-color);z-index:2}.individual-bottom .circle{color:var(--text-individual-bottom-color)}.individual-top .circle{color:var(--text-individual-top-color)}.individual-bottom span.secondary-info{color:var(--secondary-text-individual-bottom-color)}.individual-top span.secondary-info{color:var(--secondary-text-individual-top-color)}span.secondary-info.left-top{color:var(--secondary-text-individual-left-top-color)}span.individual-left-top{color:var(--text-individual-left-top-color)}span.secondary-info.left-bottom{color:var(--secondary-text-individual-left-bottom-color)}span.individual-left-bottom{color:var(--text-individual-left-bottom-color)}span.secondary-info.right-top{color:var(--secondary-text-individual-right-top-color)}span.individual-right-top{color:var(--text-individual-right-top-color)}span.secondary-info.right-bottom{color:var(--secondary-text-individual-right-bottom-color)}span.individual-right-bottom{color:var(--text-individual-right-bottom-color)}.solar span.secondary-info{color:var(--secondary-text-solar-color)}.grid span.secondary-info{color:var(--secondary-text-grid-color)}.home span.secondary-info{color:var(--secondary-text-home-color)}#battery-state-of-charge-text{color:var(--text-battery-state-of-charge-color)}@keyframes rotate-in{from{stroke-dashoffset:238.76104;stroke-dasharray:238.76104}}.card-actions{display:flex;justify-content:space-between;align-items:center}.card-actions a{text-decoration:none}.home-circle-sections{pointer-events:none}`,we={maxFlowRate:6,minFlowRate:.75,wattDecimals:0,kilowattDecimals:1,minExpectedPower:.01,maxExpectedPower:2e3,wattThreshold:1e3,transparencyZeroLines:0,displayZeroLines:{mode:"show",transparency:50,grey_color:[189,189,189]}},xe=(e,t)=>{var o;return ye(null===(o=e.states[t])||void 0===o?void 0:o.state)};var ke,$e;function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e}).apply(this,arguments)}!function(e){e.language="language",e.system="system",e.comma_decimal="comma_decimal",e.decimal_comma="decimal_comma",e.space_comma="space_comma",e.none="none"}(ke||(ke={})),function(e){e.language="language",e.system="system",e.am_pm="12",e.twenty_four="24"}($e||($e={}));var Ce=function(e,t){var o=Se({maximumFractionDigits:2},t);if("string"!=typeof e)return o;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){var i=e.indexOf(".")>-1?e.split(".")[1].length:0;o.minimumFractionDigits=i,o.maximumFractionDigits=i}return o},Ee=function(e,t,o,i){i=i||{},o=null==o?{}:o;var n=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return n.detail=o,e.dispatchEvent(n),n},Ae="0.2.0";console.groupCollapsed(`%c⚡ Power Flow Card Plus v${Ae} is installed`,"color: #488fc2; font-weight: bold"),console.log("Readme:","https://github.com/flixlix/power-flow-card-plus"),console.groupEnd();const Me=function(e,t,o){var i;return void 0===o&&(o=!1),function(){var t=[].slice.call(arguments),n=this,a=o&&!i;clearTimeout(i),i=setTimeout((function(){i=null,o||e.apply(n,t)}),6e4),a&&e.apply(n,t)}}((e=>{console.log(`%c⚡ Power Flow Card Plus v${Ae} %cError: ${e}`,"color: #488fc2; font-weight: bold","color: #b33a3a; font-weight: normal")})),Pe=e=>{Me(`Entity "${null!=e?e:"Unknown"}" is not available or misconfigured`)},De=(e,t)=>t&&xe(e,t)?ge(e.states[t].state):(Pe(t),null),ze=["K","M","G","T","P","E","Z","Y"],Te=(e,t)=>{var o;const i=De(e,t);if(!t||null===i)return 0;const n=null!==(o=e.states[t].attributes.unit_of_measurement)&&void 0!==o?o:"";return Oe(i,n)},Oe=(e,t)=>{const o=t.toUpperCase().slice(0,1),i=ze.indexOf(o);return i>-1?e*Math.pow(1e3,i+1):e},Ne=(e,t,o)=>{var i;return null===(i=e.use_new_flow_rate_model)||void 0===i||i?((e,t)=>{const o=e.max_expected_power,i=e.min_expected_power;return((e,t,o,i,n)=>e>n?o:(e-i)*(o-t)/(n-i)+t)(t,e.max_flow_rate,e.min_flow_rate,i,o)})(e,t):((e,t,o)=>{const i=null==e?void 0:e.min_flow_rate,n=null==e?void 0:e.max_flow_rate;return n-t/(o>0?o:t)*(n-i)})(e,t,o)},je=(e,t)=>!1!==e&&t?t:"number"==typeof e?e:1.66,Be=(e,t)=>{var o;return!!(null===(o=e.entities[t])||void 0===o?void 0:o.invert_state)},Ie=e=>Math.abs(Math.min(e,0)),Le=e=>Math.max(e,0),He=(e,t,o)=>{var i,n,a;const r=null===(a=null===(n=null===(i=t.entities)||void 0===i?void 0:i[o])||void 0===n?void 0:n.secondary_info)||void 0===a?void 0:a.entity;if("string"!=typeof r)return null;const l=e.states[r].state;return ye(l)?Number(l):l},Re=(e,t,o)=>{var i;const n=null===(i=t.entities[o])||void 0===i?void 0:i.entity;if(void 0===n)return null;if("string"==typeof n){const i=Te(e,n);return Be(t,o)?Le(i):Ie(i)}return Te(e,n.production)},Fe=(e,t,o)=>{var i;const n=null===(i=t.entities[o])||void 0===i?void 0:i.entity;if(void 0===n)return null;if("string"==typeof n){const i=Te(e,n);return Be(t,o)?Ie(i):Le(i)}return Te(e,n.consumption)},Ue=(e,t)=>Fe(e,t,"grid"),Ge=(e,t)=>He(e,t,"grid"),Ve=(e,t)=>{var o;const i=null===(o=t.entities.solar)||void 0===o?void 0:o.entity;if(void 0===i)return null;const n=Te(e,i);return Be(t,"solar")?Ie(n):Le(n)},We=(e,t)=>He(e,t,"solar"),Ze=(e,t)=>{var o;const i=null===(o=t.entities.battery)||void 0===o?void 0:o.state_of_charge;return void 0===i?null:De(e,i)},Ke=(e,t)=>Re(e,t,"battery"),Ye=(e,t)=>Fe(e,t,"battery"),Xe=(e,t)=>{if(t&&xe(e,t))return e.states[t];Pe(t)},qe=(e,t,o)=>{var i,n,a,r,l,s,d,c;return(null==t?void 0:t.icon)?t.icon:(null==t?void 0:t.use_metadata)?"string"==typeof(null==t?void 0:t.entity)?(null===(n=null===(i=Xe(e,null==t?void 0:t.entity))||void 0===i?void 0:i.attributes)||void 0===n?void 0:n.icon)||o:(null===(l=null===(r=Xe(e,null===(a=null==t?void 0:t.entity)||void 0===a?void 0:a.consumption))||void 0===r?void 0:r.attributes)||void 0===l?void 0:l.icon)||(null===(c=null===(d=Xe(e,null===(s=null==t?void 0:t.entity)||void 0===s?void 0:s.production))||void 0===d?void 0:d.attributes)||void 0===c?void 0:c.icon)||o:o},Je=(e,t,o)=>{var i,n,a,r,l,s,d,c;return(null==t?void 0:t.name)?t.name:(null==t?void 0:t.use_metadata)?"string"==typeof(null==t?void 0:t.entity)?(null===(n=null===(i=Xe(e,t.entity))||void 0===i?void 0:i.attributes)||void 0===n?void 0:n.friendly_name)||o:(null===(l=null===(r=Xe(e,null===(a=null==t?void 0:t.entity)||void 0===a?void 0:a.consumption))||void 0===r?void 0:r.attributes)||void 0===l?void 0:l.friendly_name)||(null===(c=null===(d=Xe(e,null===(s=null==t?void 0:t.entity)||void 0===s?void 0:s.production))||void 0===d?void 0:d.attributes)||void 0===c?void 0:c.friendly_name)||o:o},Qe=(e,t)=>!!e&&e>=t,et=(e,t)=>e?t?Qe(e,t)?e:0:e:0,tt=(e,t)=>{var o;const i=t.entities.fossil_fuel_percentage;t.entities.grid;const n=null==i?void 0:i.entity,a=null==i?void 0:i.display_zero,r=Ue(e,t);return void 0!==n&&(!0===a||null!==r&&1*r-(null!==(o=De(e,n))&&void 0!==o?o:0)/100>0)},ot=(e,t)=>{var o;const i=t.entities.fossil_fuel_percentage;t.entities.grid;const n=null==i?void 0:i.entity,a=null==i?void 0:i.display_zero,r=Ue(e,t);return void 0!==n&&(!0===a||null!==r&&!1!==tt(e,t)&&1*r-(null!==(o=De(e,n))&&void 0!==o?o:0)/100>0)},it=(e,t)=>He(e,t,"fossil_fuel_percentage"),nt=(e,t)=>He(e,t,"home"),at=(e,t,o,i,n,a,r=1e3)=>{if(null===t)return"0";if(!ye(t))return t.toString();const l=Number(t),s=void 0===o&&l>=r;return`${function(e,t,o){var i=t?function(e){switch(e.number_format){case ke.comma_decimal:return["en-US","en"];case ke.decimal_comma:return["de","es","it"];case ke.space_comma:return["fr","sv","cs"];case ke.system:return;default:return e.language}}(t):void 0;if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},(null==t?void 0:t.number_format)!==ke.none&&!Number.isNaN(Number(e))&&Intl)try{return new Intl.NumberFormat(i,Ce(e,o)).format(Number(e))}catch(t){return console.error(t),new Intl.NumberFormat(void 0,Ce(e,o)).format(Number(e))}return"string"==typeof e?e:function(e,t){return void 0===t&&(t=2),Math.round(e*Math.pow(10,t))/Math.pow(10,t)}(e,null==o?void 0:o.maximumFractionDigits).toString()+("currency"===(null==o?void 0:o.style)?" "+o.currency:"")}((e=>a?e:Math.abs(e))(s?fe(l/1e3,null!=n?n:2):fe(l,null!=n?n:0)),e.locale)}${!1===i?"":" "}${o||(s?"kW":"W")}`},rt=e=>e?"#".concat(e.map((e=>e.toString(16).padStart(2,"0"))).join("")):"",lt=(e,t,o)=>{let i="var(--primary-text-color)";return"string"==typeof e&&(i=t[e].color),!0===e&&(i=t[o].color),i},st=["unavailable","unknown"],dt=({main:e,className:t,template:o,value:i,entityId:n,icon:a})=>i&&st.includes(i)?H``:i||o?H`<span class="secondary-info ${t}" @click="${t=>{e.openDetails(t,n)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,n)}}">${a?H`<ha-icon class="secondary-info small" .icon="${a}"></ha-icon>`:""} ${null!=o?o:i}</span>`:H``,ct=(e,t,o,i,n,a)=>{var r,l;return H`${(null===(r=null==n?void 0:n.secondary)||void 0===r?void 0:r.has)||(null===(l=null==n?void 0:n.secondary)||void 0===l?void 0:l.template)?H`${dt({main:t,className:a,entityId:n.secondary.entity,icon:n.secondary.icon,value:at(e,n.secondary.state,n.secondary.unit,n.secondary.unit_white_space,n.secondary.decimals,n.secondary.accept_negative,o.watt_threshold),template:i[`${a}Secondary`]})}`:""}`},ut=(e,t)=>{var o,i;if(e>0)return"";const n=null===(o=null==t?void 0:t.display_zero_lines)||void 0===o?void 0:o.mode;if("show"===n||void 0===n)return"";let a="";if("transparency"===n||"custom"===n){const e=null===(i=null==t?void 0:t.display_zero_lines)||void 0===i?void 0:i.transparency;(null==e||e)&&(a+="transparency ")}return"grey_out"!==n&&"custom"!==n||(a+="grey"),a},ht=(e,t)=>{var o;return t>0||"hide"!==(null===(o=null==e?void 0:e.display_zero_lines)||void 0===o?void 0:o.mode)},pt=e=>!0!==e.disable_dots,vt=(e,t,{nonFossil:o,entities:i,templatesObj:n,grid:a,newDur:r})=>{var l,s,d;return H`${o.hasPercentage?H`<div class="circle-container low-carbon"><span class="label">${o.name}</span><div class="circle" @click="${t=>{var o;e.openDetails(t,null===(o=i.fossil_fuel_percentage)||void 0===o?void 0:o.entity)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=i.fossil_fuel_percentage)||void 0===o?void 0:o.entity)}}">${ct(e.hass,e,t,n,o,"low-carbon")}<ha-icon .icon="${o.icon}" class="low-carbon"></ha-icon>${!1!==(null===(l=i.fossil_fuel_percentage)||void 0===l?void 0:l.display_zero_state)||(o.state.power||0)>((null===(s=i.fossil_fuel_percentage)||void 0===s?void 0:s.display_zero_tolerance)||0)?H`<span class="low-carbon">${((e,t,o,i)=>{var n,a,r,l,s,d,c,u,h;if(!o||!xe(e,o))return Pe(o),"NaN";const p=null===(a=null===(n=t.entities.fossil_fuel_percentage)||void 0===n?void 0:n.unit_white_space)||void 0===a||a,v="percentage"===(null===(r=t.entities.fossil_fuel_percentage)||void 0===r?void 0:r.state_type)?"%":"W",_=1-(null!==(l=De(e,o))&&void 0!==l?l:0)/100;let m;m="string"==typeof(null===(s=t.entities.grid)||void 0===s?void 0:s.entity)?i:Te(e,null===(d=t.entities.grid)||void 0===d?void 0:d.entity.consumption)||0;const f=null!==(u=null===(c=t.entities.fossil_fuel_percentage)||void 0===c?void 0:c.display_zero_tolerance)&&void 0!==u?u:0;if("W"===v){let o=m*_;return f&&o<f&&(o=0),at(e,o,void 0,p,0,void 0,t.watt_threshold)}let y=100-(null!==(h=De(e,o))&&void 0!==h?h:0);return f&&y<f&&(y=0),at(e,y,void 0,p,0,void 0,t.watt_threshold)})(e.hass,t,i.fossil_fuel_percentage.entity,a.state.fromGrid)}</span>`:""}</div>${ht(t,o.state.power||0)?H`<svg width="80" height="30"><path d="M40 -10 v40" class="low-carbon ${ut(o.state.power||0,t)}" id="low-carbon"/>${pt(t)&&o.has?R`<circle r="1.75" class="low-carbon" vector-effect="non-scaling-stroke"><animateMotion dur="${je(null===(d=i.fossil_fuel_percentage)||void 0===d?void 0:d.calculate_flow_rate,r.nonFossil)}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#low-carbon"></animateMotion></circle>`:""}</svg>`:""}</div>`:H`<div class="spacer"></div>`}`},_t=e=>(...t)=>({_$litDirective$:e,values:t});class mt{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}const ft=_t(class extends mt{constructor(e){var t;if(super(e),1!==e.type||"class"!==e.name||(null===(t=e.strings)||void 0===t?void 0:t.length)>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter((t=>e[t])).join(" ")+" "}update(e,[t]){var o,i;if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.nt=new Set(e.strings.join(" ").split(/\s/).filter((e=>""!==e))));for(const e in t)t[e]&&!(null===(o=this.nt)||void 0===o?void 0:o.has(e))&&this.it.add(e);return this.render(t)}const n=e.element.classList;this.it.forEach((e=>{e in t||(n.remove(e),this.it.delete(e))}));for(const e in t){const o=!!t[e];o===this.it.has(e)||(null===(i=this.nt)||void 0===i?void 0:i.has(e))||(o?(n.add(e),this.it.add(e)):(n.remove(e),this.it.delete(e)))}return F}}),yt=(e,t)=>{var o;const i=(e=>JSON.parse(JSON.stringify(e)).filter((e=>null==e?void 0:e.has)))(e);return null!==(o=null==i?void 0:i[t])&&void 0!==o?o:void 0},gt=(e,t)=>{var o;if("sort_power"===(null===(o=e.individual_mode_config)||void 0===o?void 0:o.mode))return yt(t,1)},bt=(e,t)=>{var o;if("sort_power"===(null===(o=e.individual_mode_config)||void 0===o?void 0:o.mode))return yt(t,2)},wt=(e,t)=>{var o;if("sort_power"===(null===(o=e.individual_mode_config)||void 0===o?void 0:o.mode))return yt(t,3)},xt=(e,t)=>!!bt(e,t)||!!wt(e,t),kt=(e,t)=>!!gt(e,t)||!!wt(e,t),$t=(e,{battery:t,grid:o,individual:i,solar:n,newDur:a})=>H`${((e,{battery:t,grid:o,individual:i,solar:n,newDur:a})=>n.has&&ht(e,n.state.toHome||0)?H`<div class="lines ${ft({high:t.has||kt(e,i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":xt(e,i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-home-flow"><path id="solar" class="solar ${ut(n.state.toHome||0,e)}" d="M${t.has?55:53},0 v${o.has?15:17} c0,${t.has?"30 10,30 30,30":"35 10,35 30,35"} h25" vector-effect="non-scaling-stroke"></path>${pt(e)&&n.state.toHome?R`<circle r="1" class="solar" vector-effect="non-scaling-stroke"><animateMotion dur="${a.solarToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#solar"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:o,individual:i,solar:n,newDur:a})} ${((e,{battery:t,grid:o,individual:i,solar:n,newDur:a})=>o.hasReturnToGrid&&n.has&&ht(e,n.state.toGrid||0)?H`<div class="lines ${ft({high:t.has||kt(e,i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":xt(e,i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-grid-flow"><path id="return" class="return ${ut(n.state.toGrid||0,e)}" d="M${t.has?45:47},0 v15 c0,${t.has?"30 -10,30 -30,30":"35 -10,35 -30,35"} h-20" vector-effect="non-scaling-stroke"></path>${pt(e)&&n.state.toGrid&&n.has?R`<circle r="1" class="return" vector-effect="non-scaling-stroke"><animateMotion dur="${a.solarToGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#return"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:o,individual:i,solar:n,newDur:a})} ${((e,{battery:t,individual:o,solar:i,newDur:n})=>t.has&&i.has&&ht(e,i.state.toBattery||0)?H`<div class="lines ${ft({high:t.has||kt(e,o),"individual1-individual2":!t.has&&o.every((e=>null==e?void 0:e.has)),"multi-individual":xt(e,o)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="solar-battery-flow" class="flat-line"><path id="battery-solar" class="battery-solar ${ut(i.state.toBattery||0,e)}" d="M50,0 V100" vector-effect="non-scaling-stroke"></path>${pt(e)&&i.state.toBattery?R`<circle r="1" class="battery-solar" vector-effect="non-scaling-stroke"><animateMotion dur="${n.solarToBattery}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-solar"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,individual:i,solar:n,newDur:a})} ${((e,{battery:t,grid:o,individual:i,solar:n,newDur:a})=>o.has&&ht(e,o.state.fromGrid)?H`<div class="lines ${ft({high:t.has||kt(e,i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":xt(e,i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="grid-home-flow" class="flat-line"><path class="grid ${ut(o.state.toHome||0,e)}" id="grid" d="M0,${t.has?50:n.has?56:53} H100" vector-effect="non-scaling-stroke"></path>${pt(e)&&o.state.toHome?R`<circle r="1" class="grid" vector-effect="non-scaling-stroke"><animateMotion dur="${a.gridToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#grid"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:o,individual:i,solar:n,newDur:a})} ${((e,{battery:t,grid:o,individual:i,newDur:n})=>t.has&&ht(e,t.state.toHome)?H`<div class="lines ${ft({high:t.has||kt(e,i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":xt(e,i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-home-flow"><path id="battery-home" class="battery-home ${ut(t.state.toHome||0,e)}" d="M55,100 v-${o.has?15:17} c0,-30 10,-30 30,-30 h20" vector-effect="non-scaling-stroke"></path>${pt(e)&&t.state.toHome?R`<circle r="1" class="battery-home" vector-effect="non-scaling-stroke"><animateMotion dur="${n.batteryToHome}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-home"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:o,individual:i,newDur:a})} ${((e,{battery:t,grid:o,individual:i,newDur:n})=>o.has&&t.has&&ht(e,Math.max(o.state.toBattery||0,t.state.toGrid||0))?H`<div class="lines ${ft({high:t.has||kt(e,i),"individual1-individual2":!t.has&&i.every((e=>null==e?void 0:e.has)),"multi-individual":xt(e,i)})}"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" id="battery-grid-flow"><path id="battery-grid" class="${ut(t.state.toGrid||o.state.toBattery||0,e)}" d="M45,100 v-15 c0,-30 -10,-30 -30,-30 h-20" vector-effect="non-scaling-stroke"></path>${pt(e)&&o.state.toBattery?R`<circle r="1" class="battery-from-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${n.batteryGrid}s" repeatCount="indefinite" keyPoints="1;0" keyTimes="0;1" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""} ${t.state.toGrid?R`<circle r="1" class="battery-to-grid" vector-effect="non-scaling-stroke"><animateMotion dur="${n.batteryGrid}s" repeatCount="indefinite" calcMode="linear"><mpath xlink:href="#battery-grid"></animateMotion></circle>`:""}</svg></div>`:"")(e,{battery:t,grid:o,individual:i,newDur:a})}`,St=(e,t)=>{var o;if("string"!=typeof(null==t?void 0:t.entity))return null;const i=Xe(e,null===(o=null==t?void 0:t.secondary_info)||void 0===o?void 0:o.entity),n=null==i?void 0:i.state;return ye(n)?Number(n):n},Ct={field:void 0,entity:"",has:!1,state:null,displayZero:!1,displayZeroTolerance:0,icon:"",name:"",color:null,unit:void 0,unit_white_space:!1,invertAnimation:!1,showDirection:!1,secondary:{entity:null,template:null,has:!1,state:null,icon:null,unit:null,unit_white_space:!1,displayZero:!1,accept_negative:!1,displayZeroTolerance:0,decimals:null}},Et=(e,t)=>{var o,i,n,a,r,l,s,d,c,u;if(!t||!(null==t?void 0:t.entity))return Ct;const h=t.entity,p=((e,t)=>{const o=null==t?void 0:t.entity;if(void 0===o)return null;const i=Te(e,o);return Math.abs(i)})(e,t),v=(null==t?void 0:t.display_zero)||!1,_=(null==t?void 0:t.display_zero_tolerance)||0,m=((e,t,o)=>!!e||!!Qe(t,o))(v,p,_),f=p&&p<0,y=(null==t?void 0:t.inverted_animation)||!1,g=f?!y:y,b=(null==t?void 0:t.color)&&"string"==typeof(null==t?void 0:t.color)?null==t?void 0:t.color:null;return{field:t,entity:h,has:m,state:p,displayZero:v,displayZeroTolerance:_,icon:qe(e,t,"mdi:flash"),name:Je(e,t,"Individual"),color:b,unit:null==t?void 0:t.unit_of_measurement,unit_white_space:(null==t?void 0:t.unit_white_space)||!1,decimals:null==t?void 0:t.decimals,invertAnimation:g,showDirection:(null==t?void 0:t.show_direction)||!1,secondary:{entity:(null===(o=null==t?void 0:t.secondary_info)||void 0===o?void 0:o.entity)||null,template:(null===(i=null==t?void 0:t.secondary_info)||void 0===i?void 0:i.template)||null,has:void 0!==(null===(n=null==t?void 0:t.secondary_info)||void 0===n?void 0:n.entity),state:St(e,t)||null,accept_negative:(null===(a=null==t?void 0:t.secondary_info)||void 0===a?void 0:a.accept_negative)||!1,icon:(null===(r=null==t?void 0:t.secondary_info)||void 0===r?void 0:r.icon)||null,unit:(null===(l=null==t?void 0:t.secondary_info)||void 0===l?void 0:l.unit_of_measurement)||null,unit_white_space:(null===(s=null==t?void 0:t.secondary_info)||void 0===s?void 0:s.unit_white_space)||!1,displayZero:(null===(d=null==t?void 0:t.secondary_info)||void 0===d?void 0:d.display_zero)||!1,displayZeroTolerance:(null===(c=null==t?void 0:t.secondary_info)||void 0===c?void 0:c.display_zero_tolerance)||0,decimals:(null===(u=null==t?void 0:t.secondary_info)||void 0===u?void 0:u.decimals)||null}}},At=(e,t,o,i,n,a,r)=>{var l,s,d,c;const u=i.individual[a],h=(null===(l=null==n?void 0:n.secondary)||void 0===l?void 0:l.has)?at(e,null===(s=null==n?void 0:n.secondary)||void 0===s?void 0:s.state,(null===(d=null==n?void 0:n.secondary)||void 0===d?void 0:d.unit)||void 0,null==n?void 0:n.secondary.unit_white_space,(null==n?void 0:n.secondary.decimals)||0,(null==n?void 0:n.secondary.accept_negative)||!1,o.watt_threshold):void 0;return H`${(()=>{var e,t,o,i,a;if(u)return!0;if(!(null===(e=null==n?void 0:n.secondary)||void 0===e?void 0:e.state))return!1;if(!ye(null===(t=null==n?void 0:n.secondary)||void 0===t?void 0:t.state))return!0;if(!0===(null===(o=null==n?void 0:n.secondary)||void 0===o?void 0:o.displayZero))return!0;const r=null!==(a=null===(i=null==n?void 0:n.secondary)||void 0===i?void 0:i.displayZeroTolerance)&&void 0!==a?a:0;return Number(n.secondary.state)>=r||n.secondary.accept_negative&&"number"==typeof Number(+n.secondary.state)})()?H`${dt({main:t,className:r,entityId:(null==n?void 0:n.secondary.entity)||void 0,icon:(null===(c=null==n?void 0:n.secondary)||void 0===c?void 0:c.icon)||void 0,value:h,template:i.individual[a]||void 0})}`:""}`},Mt=238.76104;!function(e){const t=window;t.customCards=t.customCards||[],t.customCards.push(Object.assign(Object.assign({},{type:"power-flow-card-plus",name:"Power Flow Card Plus",description:"An extended version of the power flow card with richer options, advanced features and a few small UI enhancements. Inspired by the Energy Dashboard."}),{preview:!0,documentationURL:"https://github.com/flixlix/power-flow-card-plus"}))}();let Pt=class extends se{constructor(){super(...arguments),this._config={},this._templateResults={},this._unsubRenderTemplates=new Map,this._width=0,this.previousDur={}}setConfig(e){var t,o,i,n,a,r,l,s,d,c,u,h;if(e.entities.individual1||e.entities.individual2)throw new Error("You are using an outdated configuration. Please update your configuration to the latest version.");if(!e.entities||!(null===(o=null===(t=e.entities)||void 0===t?void 0:t.battery)||void 0===o?void 0:o.entity)&&!(null===(n=null===(i=e.entities)||void 0===i?void 0:i.grid)||void 0===n?void 0:n.entity)&&!(null===(r=null===(a=e.entities)||void 0===a?void 0:a.solar)||void 0===r?void 0:r.entity))throw new Error("At least one entity for battery, grid or solar must be defined");if(this._config=Object.assign(Object.assign({},e),{kw_decimals:ge(e.kw_decimals,we.kilowattDecimals),min_flow_rate:ge(e.min_flow_rate,we.minFlowRate),max_flow_rate:ge(e.max_flow_rate,we.maxFlowRate),w_decimals:ge(e.w_decimals,we.wattDecimals),watt_threshold:ge(e.watt_threshold,we.wattThreshold),max_expected_power:ge(e.max_expected_power,we.maxExpectedPower),min_expected_power:ge(e.min_expected_power,we.minExpectedPower),display_zero_lines:{mode:null!==(s=null===(l=e.display_zero_lines)||void 0===l?void 0:l.mode)&&void 0!==s?s:we.displayZeroLines.mode,transparency:ge(null===(d=e.display_zero_lines)||void 0===d?void 0:d.transparency,we.displayZeroLines.transparency),grey_color:null!==(u=null===(c=e.display_zero_lines)||void 0===c?void 0:c.grey_color)&&void 0!==u?u:we.displayZeroLines.grey_color},individual_mode_config:{mode:"sort_power"}}),(null===(h=this._config.entities)||void 0===h?void 0:h.individual)&&this._config.entities.individual.length>4)throw new Error("Only 4 individual entities are supported")}connectedCallback(){super.connectedCallback(),this._tryConnectAll()}disconnectedCallback(){this._tryDisconnectAll()}static async getConfigElement(){return await Promise.resolve().then((function(){return Cn})),document.createElement("power-flow-card-plus-editor")}static getStubConfig(e){return function(e){function t(t,o){const i=e.states[t].attributes.friendly_name;return o.some((e=>t.includes(e)||(null==i?void 0:i.includes(e))))}const o=Object.keys(e.states).filter((t=>{const o=e.states[t];return o.state&&o.attributes&&"power"===o.attributes.device_class||o.entity_id.includes("power")})),i=["grid","utility","net","meter"],n=["solar","pv","photovoltaic","inverter"],a=["battery"],r=["battery_percent","battery_level","state_of_charge","soc","percentage"],l=o.filter((e=>t(e,i)))[0],s=o.filter((e=>t(e,n)))[0],d=o.filter((e=>t(e,a)))[0],c=Object.keys(e.states).filter((t=>{const o=e.states[t];return o&&o.state&&o.attributes&&"%"===o.attributes.unit_of_measurement})).filter((e=>t(e,r)))[0];return{entities:{battery:{entity:null!=d?d:"",state_of_charge:null!=c?c:""},grid:l?{entity:l}:void 0,solar:s?{entity:s,display_zero_state:!0}:void 0},clickable_entities:!0,display_zero_lines:!0,use_new_flow_rate_model:!0,w_decimals:we.wattDecimals,kw_decimals:we.kilowattDecimals,min_flow_rate:we.minFlowRate,max_flow_rate:we.maxFlowRate,max_expected_power:we.maxExpectedPower,min_expected_power:we.minExpectedPower,watt_threshold:we.wattThreshold,transparency_zero_lines:we.transparencyZeroLines}}(e)}getCardSize(){return 3}openDetails(e,t){if(e.stopPropagation(),!t||!this._config.clickable_entities)return;if(!((e,t)=>t in e.states)(this.hass,t))return;const o=new CustomEvent("hass-more-info",{composed:!0,detail:{entityId:t}});this.dispatchEvent(o)}render(){var e,t,o,i,n,a,r,l,s,d,c,u,h,p,v,_,m,f,y,g,b,w,x,k,$,S,C,E,A,M,P,D,z,T,O,N,j,B,I,L,F,U,G,V,W,Z,K,Y,X,q,J,Q,ee,te,oe,ie,ne,ae,re,le,se,de,ce,ue,he,pe,ve,_e,me,fe,ye,ge,be,we,xe,ke,$e,Se,Ce,Ee,Ae,Me,Pe,ze,Oe,Be,Ie,Le,He,Fe,Xe,Qe,st,dt,_t,mt,ft,St,Ct,Pt,Dt,zt,Tt,Ot,Nt,jt,Bt,It,Lt,Ht,Rt,Ft,Ut,Gt,Vt,Wt,Zt,Kt,Yt,Xt,qt,Jt,Qt,eo,to,oo,io,no,ao,ro,lo,so,co,uo,ho,po,vo,_o,mo,fo,yo,go,bo,wo,xo,ko,$o,So,Co,Eo,Ao,Mo,Po,Do,zo,To,Oo,No,jo,Bo,Io,Lo,Ho,Ro,Fo,Uo,Go,Vo,Wo,Zo,Ko,Yo,Xo,qo,Jo,Qo;if(!this._config||!this.hass)return H``;const{entities:ei}=this._config;this.style.setProperty("--clickable-cursor",this._config.clickable_entities?"pointer":"default");const ti=null,oi={entity:null===(e=ei.grid)||void 0===e?void 0:e.entity,has:void 0!==(null===(t=null==ei?void 0:ei.grid)||void 0===t?void 0:t.entity),hasReturnToGrid:"string"==typeof(null===(o=ei.grid)||void 0===o?void 0:o.entity)||!!(null===(n=null===(i=ei.grid)||void 0===i?void 0:i.entity)||void 0===n?void 0:n.production),state:{fromGrid:Ue(this.hass,this._config),toGrid:(ii=this.hass,ni=this._config,Re(ii,ni,"grid")),toBattery:ti,toHome:ti},powerOutage:{has:void 0!==(null===(r=null===(a=ei.grid)||void 0===a?void 0:a.power_outage)||void 0===r?void 0:r.entity),isOutage:(ei.grid&&(null===(s=this.hass.states[null===(l=ei.grid.power_outage)||void 0===l?void 0:l.entity])||void 0===s?void 0:s.state))===(null!==(u=null===(c=null===(d=ei.grid)||void 0===d?void 0:d.power_outage)||void 0===c?void 0:c.state_alert)&&void 0!==u?u:"on"),icon:(null===(p=null===(h=ei.grid)||void 0===h?void 0:h.power_outage)||void 0===p?void 0:p.icon_alert)||"mdi:transmission-tower-off",name:null!==(m=null===(_=null===(v=ei.grid)||void 0===v?void 0:v.power_outage)||void 0===_?void 0:_.label_alert)&&void 0!==m?m:H`Power<br>Outage`,entityGenerator:null===(y=null===(f=ei.grid)||void 0===f?void 0:f.power_outage)||void 0===y?void 0:y.entity_generator},icon:qe(this.hass,ei.grid,"mdi:transmission-tower"),name:Je(this.hass,ei.grid,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.grid")),mainEntity:"object"==typeof(null===(g=ei.grid)||void 0===g?void 0:g.entity)?ei.grid.entity.consumption||ei.grid.entity.production:null===(b=ei.grid)||void 0===b?void 0:b.entity,color:{fromGrid:null===(x=null===(w=ei.grid)||void 0===w?void 0:w.color)||void 0===x?void 0:x.consumption,toGrid:null===($=null===(k=ei.grid)||void 0===k?void 0:k.color)||void 0===$?void 0:$.production,icon_type:null===(S=ei.grid)||void 0===S?void 0:S.color_icon,circle_type:null===(C=ei.grid)||void 0===C?void 0:C.color_circle},secondary:{entity:null===(A=null===(E=ei.grid)||void 0===E?void 0:E.secondary_info)||void 0===A?void 0:A.entity,decimals:null===(P=null===(M=ei.grid)||void 0===M?void 0:M.secondary_info)||void 0===P?void 0:P.decimals,template:null===(z=null===(D=ei.grid)||void 0===D?void 0:D.secondary_info)||void 0===z?void 0:z.template,has:void 0!==(null===(O=null===(T=ei.grid)||void 0===T?void 0:T.secondary_info)||void 0===O?void 0:O.entity),state:Ge(this.hass,this._config),icon:null===(j=null===(N=ei.grid)||void 0===N?void 0:N.secondary_info)||void 0===j?void 0:j.icon,unit:null===(I=null===(B=ei.grid)||void 0===B?void 0:B.secondary_info)||void 0===I?void 0:I.unit_of_measurement,unit_white_space:null===(F=null===(L=ei.grid)||void 0===L?void 0:L.secondary_info)||void 0===F?void 0:F.unit_white_space,accept_negative:(null===(G=null===(U=ei.grid)||void 0===U?void 0:U.secondary_info)||void 0===G?void 0:G.accept_negative)||!1,color:{type:null===(W=null===(V=ei.grid)||void 0===V?void 0:V.secondary_info)||void 0===W?void 0:W.color_value}}};var ii,ni;const ai={entity:null===(Z=ei.solar)||void 0===Z?void 0:Z.entity,has:void 0!==(null===(K=ei.solar)||void 0===K?void 0:K.entity),state:{total:Ve(this.hass,this._config),toHome:ti,toGrid:ti,toBattery:ti},icon:qe(this.hass,ei.solar,"mdi:solar-power"),name:Je(this.hass,ei.solar,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.solar")),secondary:{entity:null===(X=null===(Y=ei.solar)||void 0===Y?void 0:Y.secondary_info)||void 0===X?void 0:X.entity,decimals:null===(J=null===(q=ei.solar)||void 0===q?void 0:q.secondary_info)||void 0===J?void 0:J.decimals,template:null===(ee=null===(Q=ei.solar)||void 0===Q?void 0:Q.secondary_info)||void 0===ee?void 0:ee.template,has:void 0!==(null===(oe=null===(te=ei.solar)||void 0===te?void 0:te.secondary_info)||void 0===oe?void 0:oe.entity),accept_negative:(null===(ne=null===(ie=ei.solar)||void 0===ie?void 0:ie.secondary_info)||void 0===ne?void 0:ne.accept_negative)||!1,state:We(this.hass,this._config),icon:null===(re=null===(ae=ei.solar)||void 0===ae?void 0:ae.secondary_info)||void 0===re?void 0:re.icon,unit:null===(se=null===(le=ei.solar)||void 0===le?void 0:le.secondary_info)||void 0===se?void 0:se.unit_of_measurement,unit_white_space:null===(ce=null===(de=ei.solar)||void 0===de?void 0:de.secondary_info)||void 0===ce?void 0:ce.unit_white_space}},ri={entity:null===(ue=ei.battery)||void 0===ue?void 0:ue.entity,has:(()=>{var e,t,o,i,n;return!!(null===(e=ei.battery)||void 0===e?void 0:e.entity)&&("object"==typeof(null===(t=ei.battery)||void 0===t?void 0:t.entity)?(null===(o=ei.battery)||void 0===o?void 0:o.entity.consumption)||(null===(i=ei.battery)||void 0===i?void 0:i.entity.production):void 0!==(null===(n=ei.battery)||void 0===n?void 0:n.entity))})(),mainEntity:"object"==typeof(null===(he=ei.battery)||void 0===he?void 0:he.entity)?ei.battery.entity.consumption:null===(pe=ei.battery)||void 0===pe?void 0:pe.entity,name:Je(this.hass,ei.battery,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.battery")),icon:qe(this.hass,ei.battery,"mdi:battery-high"),state_of_charge:{state:Ze(this.hass,this._config),unit:(null===(ve=null==ei?void 0:ei.battery)||void 0===ve?void 0:ve.state_of_charge_unit)||"%",unit_white_space:(null===(_e=null==ei?void 0:ei.battery)||void 0===_e?void 0:_e.state_of_charge_unit_white_space)||!0,decimals:(null===(me=null==ei?void 0:ei.battery)||void 0===me?void 0:me.state_of_charge_decimals)||0},state:{toBattery:Ke(this.hass,this._config),fromBattery:Ye(this.hass,this._config),toGrid:0,toHome:0},color:{fromBattery:null===(ye=null===(fe=ei.battery)||void 0===fe?void 0:fe.color)||void 0===ye?void 0:ye.consumption,toBattery:null===(be=null===(ge=ei.battery)||void 0===ge?void 0:ge.color)||void 0===be?void 0:be.production,icon_type:void 0,circle_type:null===(we=ei.battery)||void 0===we?void 0:we.color_circle}},li={entity:null===(xe=ei.home)||void 0===xe?void 0:xe.entity,has:void 0!==(null===(ke=null==ei?void 0:ei.home)||void 0===ke?void 0:ke.entity),state:ti,icon:qe(this.hass,null==ei?void 0:ei.home,"mdi:home"),name:Je(this.hass,null==ei?void 0:ei.home,this.hass.localize("ui.panel.lovelace.cards.energy.energy_distribution.home")),secondary:{entity:null===(Se=null===($e=ei.home)||void 0===$e?void 0:$e.secondary_info)||void 0===Se?void 0:Se.entity,template:null===(Ee=null===(Ce=ei.home)||void 0===Ce?void 0:Ce.secondary_info)||void 0===Ee?void 0:Ee.template,has:void 0!==(null===(Me=null===(Ae=ei.home)||void 0===Ae?void 0:Ae.secondary_info)||void 0===Me?void 0:Me.entity),state:nt(this.hass,this._config),accept_negative:(null===(ze=null===(Pe=ei.home)||void 0===Pe?void 0:Pe.secondary_info)||void 0===ze?void 0:ze.accept_negative)||!1,unit:null===(Be=null===(Oe=ei.home)||void 0===Oe?void 0:Oe.secondary_info)||void 0===Be?void 0:Be.unit_of_measurement,unit_white_space:null===(Le=null===(Ie=ei.home)||void 0===Ie?void 0:Ie.secondary_info)||void 0===Le?void 0:Le.unit_white_space,icon:null===(Fe=null===(He=ei.home)||void 0===He?void 0:He.secondary_info)||void 0===Fe?void 0:Fe.icon,decimals:null===(Qe=null===(Xe=ei.home)||void 0===Xe?void 0:Xe.secondary_info)||void 0===Qe?void 0:Qe.decimals}},si=(null===(st=ei.individual)||void 0===st?void 0:st.map((e=>Et(this.hass,e))))||[],di={entity:null===(dt=ei.fossil_fuel_percentage)||void 0===dt?void 0:dt.entity,name:Je(this.hass,ei.fossil_fuel_percentage,this.hass.localize("card.label.non_fossil_fuel_percentage")),icon:qe(this.hass,ei.fossil_fuel_percentage,"mdi:leaf"),has:tt(this.hass,this._config),hasPercentage:ot(this.hass,this._config),state:{power:ti},color:null===(_t=ei.fossil_fuel_percentage)||void 0===_t?void 0:_t.color,color_value:null===(mt=ei.fossil_fuel_percentage)||void 0===mt?void 0:mt.color_value,secondary:{entity:null===(St=null===(ft=ei.fossil_fuel_percentage)||void 0===ft?void 0:ft.secondary_info)||void 0===St?void 0:St.entity,decimals:null===(Pt=null===(Ct=ei.fossil_fuel_percentage)||void 0===Ct?void 0:Ct.secondary_info)||void 0===Pt?void 0:Pt.decimals,template:null===(zt=null===(Dt=ei.fossil_fuel_percentage)||void 0===Dt?void 0:Dt.secondary_info)||void 0===zt?void 0:zt.template,has:void 0!==(null===(Ot=null===(Tt=ei.fossil_fuel_percentage)||void 0===Tt?void 0:Tt.secondary_info)||void 0===Ot?void 0:Ot.entity),state:it(this.hass,this._config),accept_negative:(null===(jt=null===(Nt=ei.fossil_fuel_percentage)||void 0===Nt?void 0:Nt.secondary_info)||void 0===jt?void 0:jt.accept_negative)||!1,icon:null===(It=null===(Bt=ei.fossil_fuel_percentage)||void 0===Bt?void 0:Bt.secondary_info)||void 0===It?void 0:It.icon,unit:null===(Ht=null===(Lt=ei.fossil_fuel_percentage)||void 0===Lt?void 0:Lt.secondary_info)||void 0===Ht?void 0:Ht.unit_of_measurement,unit_white_space:null===(Ft=null===(Rt=ei.fossil_fuel_percentage)||void 0===Rt?void 0:Rt.secondary_info)||void 0===Ft?void 0:Ft.unit_white_space,color_value:null===(Gt=null===(Ut=ei.fossil_fuel_percentage)||void 0===Ut?void 0:Ut.secondary_info)||void 0===Gt?void 0:Gt.color_value}};oi.state.fromGrid=et(oi.state.fromGrid,null===(Vt=ei.grid)||void 0===Vt?void 0:Vt.display_zero_tolerance),oi.state.toGrid=et(oi.state.toGrid,null===(Wt=ei.grid)||void 0===Wt?void 0:Wt.display_zero_tolerance),ai.state.total=et(ai.state.total,null===(Zt=ei.solar)||void 0===Zt?void 0:Zt.display_zero_tolerance),ri.state.fromBattery=et(ri.state.fromBattery,null===(Kt=ei.battery)||void 0===Kt?void 0:Kt.display_zero_tolerance),ri.state.toBattery=et(ri.state.toBattery,null===(Yt=ei.battery)||void 0===Yt?void 0:Yt.display_zero_tolerance),0===oi.state.fromGrid&&(oi.state.toHome=0,oi.state.toBattery=0),0===ai.state.total&&(ai.state.toGrid=0,ai.state.toBattery=0,ai.state.toHome=0),0===ri.state.fromBattery&&(ri.state.toGrid=0,ri.state.toHome=0),ai.has&&(ai.state.toHome=(null!==(Xt=ai.state.total)&&void 0!==Xt?Xt:0)-(null!==(qt=oi.state.toGrid)&&void 0!==qt?qt:0)-(null!==(Jt=ri.state.toBattery)&&void 0!==Jt?Jt:0));const ci=Math.max(null!==(eo=null===(Qt=ei.grid)||void 0===Qt?void 0:Qt.display_zero_tolerance)&&void 0!==eo?eo:0,null!==(oo=null===(to=ei.battery)||void 0===to?void 0:to.display_zero_tolerance)&&void 0!==oo?oo:0);if(null!==ai.state.toHome&&ai.state.toHome<0?(ri.has&&(oi.state.toBattery=Math.abs(ai.state.toHome),oi.state.toBattery>(null!==(io=oi.state.fromGrid)&&void 0!==io?io:0)&&(ri.state.toGrid=Math.min(oi.state.toBattery-(null!==(no=oi.state.fromGrid)&&void 0!==no?no:0),0),oi.state.toBattery=oi.state.fromGrid)),ai.state.toHome=0):oi.state.toBattery=0,oi.state.toBattery=(null!==(ao=oi.state.toBattery)&&void 0!==ao?ao:0)>ci?oi.state.toBattery:0,ri.has&&(ai.has?(ri.state.toGrid||(ri.state.toGrid=Math.max(0,(oi.state.toGrid||0)-(ai.state.total||0)-(ri.state.toBattery||0)-(oi.state.toBattery||0))),ai.state.toBattery=ri.state.toBattery-(oi.state.toBattery||0),(null===(ro=ei.solar)||void 0===ro?void 0:ro.display_zero_tolerance)&&ei.solar.display_zero_tolerance>=(ai.state.total||0)&&(ai.state.toBattery=0)):ri.state.toGrid=oi.state.toGrid||0,ri.state.toGrid=(ri.state.toGrid||0)>ci&&ri.state.toGrid||0,ri.state.toHome=(null!==(lo=ri.state.fromBattery)&&void 0!==lo?lo:0)-(null!==(so=ri.state.toGrid)&&void 0!==so?so:0)),oi.state.toHome=Math.max(oi.state.fromGrid-(null!==(co=oi.state.toBattery)&&void 0!==co?co:0),0),ai.has&&oi.state.toGrid&&(ai.state.toGrid=oi.state.toGrid-(null!==(uo=ri.state.toGrid)&&void 0!==uo?uo:0)),oi.powerOutage.isOutage&&(oi.state.fromGrid=oi.powerOutage.entityGenerator?Math.max(Te(this.hass,oi.powerOutage.entityGenerator),0):0,oi.state.toHome=Math.max(oi.state.fromGrid-(null!==(ho=oi.state.toBattery)&&void 0!==ho?ho:0),0),oi.state.toGrid=0,ri.state.toGrid=0,ai.state.toGrid=0,oi.icon=oi.powerOutage.icon,di.has=!1,di.hasPercentage=!1),di.has){const e=1-(null!==(vo=De(this.hass,null===(po=ei.fossil_fuel_percentage)||void 0===po?void 0:po.entity))&&void 0!==vo?vo:0)/100;di.state.power=oi.state.toHome*e}const ui=(null==si?void 0:si.reduce(((e,t)=>e+(t.state||0)),0))||0,hi=Math.max(oi.state.toHome+(null!==(_o=ai.state.toHome)&&void 0!==_o?_o:0)+(null!==(mo=ri.state.toHome)&&void 0!==mo?mo:0),0),pi=ri.state.toHome?Mt*(ri.state.toHome/hi):0,vi=ai.state.toHome?Mt*(ai.state.toHome/hi):0,_i=di.state.power?Mt*(di.state.power/hi):0,mi=Mt*((hi-(null!==(fo=di.state.power)&&void 0!==fo?fo:0)-(null!==(yo=ri.state.toHome)&&void 0!==yo?yo:0)-(null!==(go=ai.state.toHome)&&void 0!==go?go:0))/hi),fi=(null===(bo=ei.home)||void 0===bo?void 0:bo.override_state)&&ei.home.entity?(null===(wo=ei.home)||void 0===wo?void 0:wo.subtract_individual)?at(this.hass,Te(this.hass,ei.home.entity)-ui,null===(xo=ei.home)||void 0===xo?void 0:xo.unit_of_measurement,null===(ko=ei.home)||void 0===ko?void 0:ko.unit_white_space,void 0,void 0,this._config.watt_threshold):at(this.hass,Te(this.hass,ei.home.entity),null===($o=ei.home)||void 0===$o?void 0:$o.unit_of_measurement,null===(So=ei.home)||void 0===So?void 0:So.unit_white_space,void 0,void 0,this._config.watt_threshold):(null===(Co=ei.home)||void 0===Co?void 0:Co.subtract_individual)?at(this.hass,hi-ui||0,null===(Eo=ei.home)||void 0===Eo?void 0:Eo.unit_of_measurement,null===(Ao=ei.home)||void 0===Ao?void 0:Ao.unit_white_space,void 0,void 0,this._config.watt_threshold):at(this.hass,hi,null===(Mo=ei.home)||void 0===Mo?void 0:Mo.unit_of_measurement,null===(Po=ei.home)||void 0===Po?void 0:Po.unit_white_space,void 0,void 0,this._config.watt_threshold),yi=oi.state.toHome+(null!==(Do=ai.state.toHome)&&void 0!==Do?Do:0)+(null!==(zo=ai.state.toGrid)&&void 0!==zo?zo:0)+(null!==(To=ai.state.toBattery)&&void 0!==To?To:0)+(null!==(Oo=ri.state.toHome)&&void 0!==Oo?Oo:0)+(null!==(No=oi.state.toBattery)&&void 0!==No?No:0)+(null!==(jo=ri.state.toGrid)&&void 0!==jo?jo:0);null===ri.state_of_charge.state?ri.icon="mdi:battery":ri.state_of_charge.state<=72&&ri.state_of_charge.state>44?ri.icon="mdi:battery-medium":ri.state_of_charge.state<=44&&ri.state_of_charge.state>16?ri.icon="mdi:battery-low":ri.state_of_charge.state<=16&&(ri.icon="mdi:battery-outline"),void 0!==(null===(Bo=ei.battery)||void 0===Bo?void 0:Bo.icon)&&(ri.icon=null===(Io=ei.battery)||void 0===Io?void 0:Io.icon);const gi={batteryGrid:Ne(this._config,null!==(Ho=null!==(Lo=oi.state.toBattery)&&void 0!==Lo?Lo:ri.state.toGrid)&&void 0!==Ho?Ho:0,yi),batteryToHome:Ne(this._config,null!==(Ro=ri.state.toHome)&&void 0!==Ro?Ro:0,yi),gridToHome:Ne(this._config,oi.state.toHome,yi),solarToBattery:Ne(this._config,null!==(Fo=ai.state.toBattery)&&void 0!==Fo?Fo:0,yi),solarToGrid:Ne(this._config,null!==(Uo=ai.state.toGrid)&&void 0!==Uo?Uo:0,yi),solarToHome:Ne(this._config,null!==(Go=ai.state.toHome)&&void 0!==Go?Go:0,yi),individual:(null==si?void 0:si.map((e=>{var t;return Ne(this._config,null!==(t=e.state)&&void 0!==t?t:0,ui)})))||[],nonFossil:Ne(this._config,null!==(Vo=di.state.power)&&void 0!==Vo?Vo:0,yi)};["batteryGrid","batteryToHome","gridToHome","solarToBattery","solarToGrid","solarToHome"].forEach((e=>{const t=this[`${e}Flow`];t&&this.previousDur[e]&&this.previousDur[e]!==gi[e]&&(t.pauseAnimations(),t.setCurrentTime(t.getCurrentTime()*(gi[e]/this.previousDur[e])),t.unpauseAnimations()),this.previousDur[e]=gi[e]}));const bi={battery:{value:pi,color:"var(--energy-battery-out-color)"},solar:{value:vi,color:"var(--energy-solar-color)"},grid:{value:mi,color:"var(--energy-grid-consumption-color)"},gridNonFossil:{value:_i,color:"var(--energy-non-fossil-color)"}},wi=Object.keys(bi).reduce(((e,t)=>bi[e].value>bi[t].value?e:t)),xi=e=>e?void 0===(null==e?void 0:e.state)?"":at(this.hass,null==e?void 0:e.state,null==e?void 0:e.unit,null==e?void 0:e.unit_white_space,null==e?void 0:e.decimals,void 0,this._config.watt_threshold):"",ki=["left-top","left-bottom","right-top","right-bottom"],$i={gridSecondary:null===(Wo=this._templateResults.gridSecondary)||void 0===Wo?void 0:Wo.result,solarSecondary:null===(Zo=this._templateResults.solarSecondary)||void 0===Zo?void 0:Zo.result,homeSecondary:null===(Ko=this._templateResults.homeSecondary)||void 0===Ko?void 0:Ko.result,nonFossilFuelSecondary:null===(Yo=this._templateResults.nonFossilFuelSecondary)||void 0===Yo?void 0:Yo.result,individual:(null==si?void 0:si.map(((e,t)=>{var o;return null===(o=this._templateResults[`${ki[t]}Secondary`])||void 0===o?void 0:o.result})))||[]},Si=this._width>420;((e,{grid:t,solar:o,entities:i,individual:n,battery:a,homeSources:r,homeLargestSource:l,nonFossil:s,display_zero_lines_transparency:d,display_zero_lines_grey_color:c,isCardWideEnough:u})=>{var h,p,v,_,m,f,y,g,b,w,x,k,$,S,C,E,A,M,P,D,z,T,O,N;if(e.style.setProperty("--icon-grid-color","consumption"===t.color.icon_type?"var(--energy-grid-consumption-color)":"production"===t.color.icon_type?"var(--energy-grid-return-color)":!0===t.color.icon_type?(null!==(h=t.state.fromGrid)&&void 0!==h?h:0)>=(null!==(p=t.state.toGrid)&&void 0!==p?p:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)"),e.style.setProperty("--circle-grid-color","consumption"===t.color.circle_type?"var(--energy-grid-consumption-color)":"production"===t.color.circle_type?"var(--energy-grid-return-color)":!0===t.color.circle_type?(null!==(v=t.state.fromGrid)&&void 0!==v?v:0)>=(null!==(_=t.state.toGrid)&&void 0!==_?_:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--energy-grid-consumption-color)"),void 0!==t.color.fromGrid&&("object"==typeof t.color.fromGrid&&(t.color.fromGrid=rt(t.color.fromGrid)),e.style.setProperty("--energy-grid-consumption-color",t.color.fromGrid||"#a280db")),void 0!==t.color.toGrid&&("object"==typeof t.color.toGrid&&(t.color.toGrid=rt(t.color.toGrid)),e.style.setProperty("--energy-grid-return-color",t.color.toGrid||"#a280db")),e.style.setProperty("--secondary-text-grid-color","consumption"===t.secondary.color.type?"var(--energy-grid-consumption-color)":"production"===t.secondary.color.type?"var(--energy-grid-return-color)":!0===t.secondary.color.type?(null!==(m=t.state.fromGrid)&&void 0!==m?m:0)>=(null!==(f=t.state.toGrid)&&void 0!==f?f:0)?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)":"var(--primary-text-color)"),!1===(null===(y=i.grid)||void 0===y?void 0:y.color_value)?(e.style.setProperty("--text-grid-consumption-color","var(--primary-text-color)"),e.style.setProperty("--text-grid-return-color","var(--primary-text-color)")):(e.style.setProperty("--text-grid-consumption-color","var(--energy-grid-consumption-color)"),e.style.setProperty("--text-grid-return-color","var(--energy-grid-return-color)")),e.style.setProperty("--text-solar-color",(null===(g=i.solar)||void 0===g?void 0:g.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-solar-color",(null===(w=null===(b=i.solar)||void 0===b?void 0:b.secondary_info)||void 0===w?void 0:w.color_value)?"var(--energy-solar-color)":"var(--primary-text-color)"),void 0!==(null===(x=i.solar)||void 0===x?void 0:x.color)){let t=null===(k=i.solar)||void 0===k?void 0:k.color;"object"==typeof t&&(t=rt(t)),e.style.setProperty("--energy-solar-color",t||"#ff9800")}e.style.setProperty("--icon-solar-color",(null===($=i.solar)||void 0===$?void 0:$.color_icon)?"var(--energy-solar-color)":"var(--primary-text-color)"),void 0!==a.color.fromBattery&&("object"==typeof a.color.fromBattery&&(a.color.fromBattery=rt(a.color.fromBattery)),e.style.setProperty("--energy-battery-out-color",a.color.fromBattery||"#4db6ac")),void 0!==a.color.toBattery&&("object"==typeof a.color.toBattery&&(a.color.toBattery=rt(a.color.toBattery)),e.style.setProperty("--energy-battery-in-color",a.color.toBattery||"#a280db")),a.color.icon_type=null===(S=i.battery)||void 0===S?void 0:S.color_icon,e.style.setProperty("--icon-battery-color","consumption"===a.color.icon_type?"var(--energy-battery-in-color)":"production"===a.color.icon_type?"var(--energy-battery-out-color)":!0===a.color.icon_type?a.state.fromBattery>=a.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)");const j=null===(C=i.battery)||void 0===C?void 0:C.color_state_of_charge_value;if(e.style.setProperty("--text-battery-state-of-charge-color","consumption"===j?"var(--energy-battery-in-color)":"production"===j?"var(--energy-battery-out-color)":!0===j?a.state.fromBattery>=a.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)":"var(--primary-text-color)"),e.style.setProperty("--circle-battery-color","consumption"===a.color.circle_type?"var(--energy-battery-in-color)":"production"===a.color.circle_type||!0===a.color.circle_type&&a.state.fromBattery>=a.state.toBattery?"var(--energy-battery-out-color)":"var(--energy-battery-in-color)"),!1===(null===(E=i.battery)||void 0===E?void 0:E.color_value)?(e.style.setProperty("--text-battery-in-color","var(--primary-text-color)"),e.style.setProperty("--text-battery-out-color","var(--primary-text-color)")):(e.style.setProperty("--text-battery-in-color","var(--energy-battery-in-color)"),e.style.setProperty("--text-battery-out-color","var(--energy-battery-out-color)")),void 0!==s.color&&("object"==typeof s.color&&(s.color=rt(s.color)),e.style.setProperty("--non-fossil-color",s.color||"var(--energy-non-fossil-color)")),e.style.setProperty("--icon-non-fossil-color",(null===(A=i.fossil_fuel_percentage)||void 0===A?void 0:A.color_icon)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--text-non-fossil-color",(null===(M=i.fossil_fuel_percentage)||void 0===M?void 0:M.color_value)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-non-fossil-color",(null===(D=null===(P=i.fossil_fuel_percentage)||void 0===P?void 0:P.secondary_info)||void 0===D?void 0:D.color_value)?"var(--non-fossil-color)":"var(--primary-text-color)"),e.style.setProperty("--secondary-text-home-color",(null===(T=null===(z=i.home)||void 0===z?void 0:z.secondary_info)||void 0===T?void 0:T.color_value)?"var(--text-home-color)":"var(--primary-text-color)"),e.style.setProperty("--icon-home-color",lt(null===(O=i.home)||void 0===O?void 0:O.color_icon,r,l)),e.style.setProperty("--text-home-color",lt(null===(N=i.home)||void 0===N?void 0:N.color_value,r,l)),e.style.setProperty("--battery-grid-line",t.state.toBattery?"var(--energy-grid-consumption-color)":"var(--energy-grid-return-color)"),e.style.setProperty("--transparency-unused-lines",d?d.toString():"0"),void 0!==c){let t=c;"object"==typeof t&&(t=rt(t)),e.style.setProperty("--greyed-out--line-color",t)}if(o.has&&(a.has?(e.style.setProperty("--lines-svg-not-flat-line-height","106%"),e.style.setProperty("--lines-svg-not-flat-line-top","-3%"),e.style.setProperty("--lines-svg-flat-width","calc(100% - 160px)"),e.style.setProperty("--lines-svg-flat-left","0"),e.style.setProperty("--lines-svg-not-flat-left","0")):(e.style.setProperty("--lines-svg-not-flat-line-top","-2%"),e.style.setProperty("--lines-svg-flat-width",u?"calc(100% - 154px)":"calc(100% - 157px)"),e.style.setProperty("--lines-svg-not-flat-width",u?"calc(103% - 172px)":"calc(103% - 169px)"),e.style.setProperty("--lines-svg-not-flat-left","3px"),e.style.setProperty("--lines-svg-flat-left","-3px"))),null==n?void 0:n.some((e=>e.has))){const t=(t,o)=>{var i;const n=["left-top","left-bottom","right-top","right-bottom"],a=(null==n?void 0:n[o])||"left-top";let r=null==t?void 0:t.color;"object"==typeof r&&(r=rt(r)),e.style.setProperty(`--individual-${a}-color`,r||["#d0cc5b","#964cb5","#b54c9d","#5bd0cc"][o]||"#d0cc5b"),e.style.setProperty(`--icon-individual-${a}-color`,!1!==(null==t?void 0:t.color_icon)?`var(--individual-${a}-color)`:"var(--primary-text-color)"),e.style.setProperty(`--text-individual-${a}-color`,(null==t?void 0:t.color_value)?`var(--individual-${a}-color)`:"var(--primary-text-color)"),e.style.setProperty(`--secondary-text-individual-${a}-color`,(null===(i=null==t?void 0:t.secondary_info)||void 0===i?void 0:i.color_value)?`var(--individual-${a}-color)`:"var(--primary-text-color)")};let o=0;n.forEach(((e,a)=>{n[a].has&&(t(i.individual[a],o),o++)}))}})(this,{grid:oi,solar:ai,battery:ri,display_zero_lines_grey_color:"grey_out"===(null===(Xo=this._config.display_zero_lines)||void 0===Xo?void 0:Xo.mode)?null===(qo=this._config.display_zero_lines)||void 0===qo?void 0:qo.grey_color:"",display_zero_lines_transparency:"transparency"===(null===(Jo=this._config.display_zero_lines)||void 0===Jo?void 0:Jo.mode)?null===(Qo=this._config.display_zero_lines)||void 0===Qo?void 0:Qo.transparency:"",entities:ei,homeLargestSource:wi,homeSources:bi,individual:si,nonFossil:di,isCardWideEnough:Si});const Ci=((e,t)=>{var o;if("sort_power"===(null===(o=e.individual_mode_config)||void 0===o?void 0:o.mode))return yt(t,0)})(this._config,si),Ei=gt(this._config,si),Ai=bt(this._config,si),Mi=wt(this._config,si);return H`<ha-card .header="${this._config.title}" class="${this._config.full_size?"full-size":""}" style="${this._config.style_ha_card?this._config.style_ha_card:""}"><div class="card-content ${this._config.full_size?"full-size":""}" id="power-flow-card-plus" style="${this._config.style_card_content?this._config.style_card_content:""}">${ai.has||(null==si?void 0:si.some((e=>null==e?void 0:e.has)))||di.hasPercentage?H`<div class="row">${vt(this,this._config,{entities:ei,grid:oi,newDur:gi,nonFossil:di,templatesObj:$i})} ${ai.has?((e,t,{entities:o,solar:i,templatesObj:n})=>{var a;return H`<div class="circle-container solar"><span class="label">${i.name}</span><div class="circle" @click="${t=>{e.openDetails(t,i.entity)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,i.entity)}}">${ct(e.hass,e,t,n,i,"solar")}<ha-icon id="solar-icon" .icon="${i.icon}"></ha-icon>${!1!==(null===(a=o.solar)||void 0===a?void 0:a.display_zero_state)||(i.state.total||0)>0?H`<span class="solar">${at(e.hass,i.state.total,i.state.unit,i.state.unit_white_space,i.state.decimals,void 0,t.watt_threshold)}</span>`:""}</div></div>`})(this,this._config,{entities:ei,solar:ai,templatesObj:$i}):(null==si?void 0:si.some((e=>null==e?void 0:e.has)))?H`<div class="spacer"></div>`:""} ${Ci?((e,t,{individualObj:o,templatesObj:i,displayState:n,newDur:a})=>{var r,l,s,d,c;if(!o)return H`<div class="spacer"></div>`;const u=(null===(l=null===(r=null==t?void 0:t.entities)||void 0===r?void 0:r.individual)||void 0===l?void 0:l.findIndex((e=>e.entity===o.entity)))||0,h=a.individual[u]||0;return H`<div class="circle-container individual-top"><span class="label">${o.name}</span><div class="circle" @click="${t=>{e.openDetails(t,null==o?void 0:o.entity)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,null==o?void 0:o.entity)}}">${At(e.hass,e,t,i,o,0,"left-top")}<ha-icon id="individual-left-top-icon" .icon="${o.icon}"></ha-icon>${!1!==(null===(s=null==o?void 0:o.field)||void 0===s?void 0:s.display_zero_state)||(o.state||0)>(null!==(d=o.displayZeroTolerance)&&void 0!==d?d:0)?H`<span class="individual-top individual-left-top">${(null==o?void 0:o.showDirection)?H`<ha-icon class="small" .icon="${o.invertAnimation?"mdi:arrow-down":"mdi:arrow-up"}"></ha-icon>`:""}${n}</span>`:""}</div>${ht(t,o.state||0)?H`<svg width="80" height="30"><path d="M40 -10 v50" id="individual-top" class="${ut(o.state||0,t)}"/>${pt(t)&&o.state?R`<circle r="1.75" class="individual-top" vector-effect="non-scaling-stroke"><animateMotion dur="${je(null===(c=null==o?void 0:o.field)||void 0===c?void 0:c.calculate_flow_rate,h)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${o.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-top"></animateMotion></circle>`:""}</svg>`:""}</div>`})(this,this._config,{individualObj:Ci,displayState:xi(Ci),newDur:gi,templatesObj:$i}):H`<div class="spacer"></div>`} ${xt(this._config,si)?((e,t,{individualObj:o,templatesObj:i,displayState:n,newDur:a,battery:r,individualObjs:l})=>{var s,d,c,u,h;if(!o)return H`<div class="spacer"></div>`;const p=(null===(d=null===(s=null==t?void 0:t.entities)||void 0===s?void 0:s.individual)||void 0===d?void 0:d.findIndex((e=>e.entity===o.entity)))||-1;if(-1===p)return H`<div class="spacer"></div>`;const v=a.individual[p]||1.66,_=!!(null==r?void 0:r.has)||kt(t,l);return H`<div class="circle-container individual-top individual-right individual-right-top"><span class="label">${o.name}</span><div class="circle" @click="${t=>{e.openDetails(t,null==o?void 0:o.entity)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,null==o?void 0:o.entity)}}">${At(e.hass,e,t,i,o,2,"right-top")}<ha-icon id="individual-right-top-icon" .icon="${o.icon}"></ha-icon>${!1!==(null===(c=null==o?void 0:o.field)||void 0===c?void 0:c.display_zero_state)||(o.state||0)>(null!==(u=o.displayZeroTolerance)&&void 0!==u?u:0)?H`<span class="individual-top individual-right-top">${(null==o?void 0:o.showDirection)?H`<ha-icon class="small" .icon="${o.invertAnimation?"mdi:arrow-down":"mdi:arrow-up"}"></ha-icon>`:""}${n}</span>`:""}</div>${ht(t,o.state||0)?H`<div class="right-individual-flow-container"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" class="right-individual-flow"><path id="individual-top-right-home" class="${ut(o.state||0,t)}" d="M${_?45:47},0 v15 c0,${_?"30 -10,30 -30,30":"35 -10,35 -30,35"} h-20" vector-effect="non-scaling-stroke"/>${pt(t)&&o.state?R`<circle r="1" class="individual-top" vector-effect="non-scaling-stroke"><animateMotion dur="${je(null===(h=null==o?void 0:o.field)||void 0===h?void 0:h.calculate_flow_rate,v)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${o.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-top-right-home"></animateMotion></circle>`:""}</svg></div>`:""}</div>`})(this,this._config,{displayState:xi(Ai),individualObj:Ai,newDur:gi,templatesObj:$i,battery:ri,individualObjs:si}):H``}</div>`:H``}<div class="row">${oi.has?((e,t,{entities:o,grid:i,templatesObj:n})=>{var a,r,l,s,d,c,u,h,p,v,_;return H`<div class="circle-container grid"><div class="circle" @click="${t=>{var n,a,r,l,s;const d=null!==(a=null===(n=i.powerOutage)||void 0===n?void 0:n.entityGenerator)&&void 0!==a?a:null===(l=null===(r=o.grid)||void 0===r?void 0:r.power_outage)||void 0===l?void 0:l.entity,c=(null===(s=i.powerOutage)||void 0===s?void 0:s.isOutage)&&d?d:"string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,c)}}" @keyDown="${t=>{var n,a,r,l,s;if("Enter"===t.key){const d=null!==(a=null===(n=i.powerOutage)||void 0===n?void 0:n.entityGenerator)&&void 0!==a?a:null===(l=null===(r=o.grid)||void 0===r?void 0:r.power_outage)||void 0===l?void 0:l.entity,c=(null===(s=i.powerOutage)||void 0===s?void 0:s.isOutage)&&d?d:"string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,c)}}}">${ct(e.hass,e,t,n,i,"grid")}<ha-icon .icon="${i.icon}"></ha-icon>${("two_way"===(null===(a=o.grid)||void 0===a?void 0:a.display_state)||void 0===(null===(r=o.grid)||void 0===r?void 0:r.display_state)||"one_way_no_zero"===(null===(l=o.grid)||void 0===l?void 0:l.display_state)&&(null!==(s=i.state.toGrid)&&void 0!==s?s:0)>0||"one_way"===(null===(d=o.grid)||void 0===d?void 0:d.display_state)&&(null===i.state.fromGrid||0===i.state.fromGrid)&&0!==i.state.toGrid)&&null!==i.state.toGrid&&!i.powerOutage.isOutage?H`<span class="return" @click="${t=>{const i="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.production;e.openDetails(t,i)}}" @keyDown="${t=>{if("Enter"===t.key){const i="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.production;e.openDetails(t,i)}}}"><ha-icon class="small" .icon="${"mdi:arrow-left"}"></ha-icon>${at(e.hass,i.state.toGrid,i.unit,i.unit_white_space,i.decimals,void 0,t.watt_threshold)}</span>`:null} ${("two_way"===(null===(c=o.grid)||void 0===c?void 0:c.display_state)||void 0===(null===(u=o.grid)||void 0===u?void 0:u.display_state)||"one_way_no_zero"===(null===(h=o.grid)||void 0===h?void 0:h.display_state)&&i.state.fromGrid>0||"one_way"===(null===(p=o.grid)||void 0===p?void 0:p.display_state)&&(null===i.state.toGrid||0===i.state.toGrid))&&null!==i.state.fromGrid&&!i.powerOutage.isOutage||i.powerOutage.isOutage&&i.powerOutage.entityGenerator?H`<span class="consumption" @click="${t=>{const i="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,i)}}" @keyDown="${t=>{if("Enter"===t.key){const i="string"==typeof o.grid.entity?o.grid.entity:o.grid.entity.consumption;e.openDetails(t,i)}}}"><ha-icon class="small" .icon="${"mdi:arrow-right"}"></ha-icon>${at(e.hass,i.state.fromGrid,i.unit,i.unit_white_space,i.decimals,void 0,t.watt_threshold)}</span>`:""} ${(null===(v=i.powerOutage)||void 0===v?void 0:v.isOutage)&&!(null===(_=i.powerOutage)||void 0===_?void 0:_.entityGenerator)?H`<span class="grid power-outage">${i.powerOutage.name}</span>`:""}</div><span class="label">${i.name}</span></div>`})(this,this._config,{entities:ei,grid:oi,templatesObj:$i}):H`<div class="spacer"></div>`}<div class="spacer"></div>${((e,t,{home:o,entities:i,templatesObj:n,homeUsageToDisplay:a,homeSolarCircumference:r,circleCircumference:l,homeBatteryCircumference:s,homeNonFossilCircumference:d,homeGridCircumference:c,individual:u})=>{var h;return H`<div class="circle-container home"><div class="circle" id="home-circle" @click="${t=>{var o;e.openDetails(t,null===(o=i.home)||void 0===o?void 0:o.entity)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=i.home)||void 0===o?void 0:o.entity)}}">${ct(e.hass,e,t,n,o,"home")}<ha-icon .icon="${o.icon}"></ha-icon>${a} <svg class="home-circle-sections">${void 0!==r?R`<circle class="solar" cx="40" cy="40" r="38" stroke-dasharray="${r} ${l-r}" shape-rendering="geometricPrecision" stroke-dashoffset="-${l-r}">`:""} ${s?R`<circle class="battery" cx="40" cy="40" r="38" stroke-dasharray="${s} ${l-s}" stroke-dashoffset="-${l-s-(r||0)}" shape-rendering="geometricPrecision">`:""} ${void 0!==d?R`<circle class="low-carbon" cx="40" cy="40" r="38" stroke-dasharray="${d} ${l-d}" stroke-dashoffset="-${l-d-(s||0)-(r||0)}" shape-rendering="geometricPrecision">`:""}<circle class="grid" cx="40" cy="40" r="38" stroke-dasharray="${null!=c?c:l-r-(s||0)} ${void 0!==c?l-c:r+(s||0)}" stroke-dashoffset="0" shape-rendering="geometricPrecision"/></svg></div>${(null==u?void 0:u.length)>1&&ht(t,(null===(h=null==u?void 0:u[1])||void 0===h?void 0:h.state)||0)?H`<span class="label"></span>`:H`<span class="label">${o.name}</span>`}</div>`})(this,this._config,{circleCircumference:Mt,entities:ei,grid:oi,home:li,homeBatteryCircumference:pi,homeGridCircumference:mi,homeNonFossilCircumference:_i,homeSolarCircumference:vi,newDur:gi,templatesObj:$i,homeUsageToDisplay:fi,individual:si})} ${xt(this._config,si)?H`<div class="spacer"></div>`:H``}</div>${ri.has||kt(this._config,si)?H`<div class="row"><div class="spacer"></div>${ri.has?((e,t,{battery:o,entities:i})=>{var n,a,r,l,s,d,c,u;return H`<div class="circle-container battery"><div class="circle" @click="${t=>{var o,n,a,r,l;const s=(null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)?null===(n=i.battery)||void 0===n?void 0:n.state_of_charge:"string"==typeof(null===(a=i.battery)||void 0===a?void 0:a.entity)?null===(r=i.battery)||void 0===r?void 0:r.entity:null===(l=i.battery)||void 0===l?void 0:l.entity.production;e.openDetails(t,s)}}" @keyDown="${t=>{var o,n;if("Enter"===t.key){const a=(null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)?null===(n=i.battery)||void 0===n?void 0:n.state_of_charge:"string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.production;e.openDetails(t,a)}}}">${null!==o.state_of_charge.state?H`<span @click="${t=>{var o;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)}}" id="battery-state-of-charge-text">${at(e.hass,o.state_of_charge.state,o.state_of_charge.unit,o.state_of_charge.unit_white_space,o.state_of_charge.decimals,void 0,t.watt_threshold)}</span>`:null}<ha-icon .icon="${o.icon}" @click="${t=>{var o;e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)}}" @keyDown="${t=>{var o;"Enter"===t.key&&e.openDetails(t,null===(o=i.battery)||void 0===o?void 0:o.state_of_charge)}}"></ha-icon>${"two_way"===(null===(n=i.battery)||void 0===n?void 0:n.display_state)||void 0===(null===(a=i.battery)||void 0===a?void 0:a.display_state)||"one_way_no_zero"===(null===(r=i.battery)||void 0===r?void 0:r.display_state)&&o.state.toBattery>0||"one_way"===(null===(l=i.battery)||void 0===l?void 0:l.display_state)&&0!==o.state.toBattery?H`<span class="battery-in" @click="${t=>{const o="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.production;e.openDetails(t,o)}}" @keyDown="${t=>{if("Enter"===t.key){const o="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.production;e.openDetails(t,o)}}}"><ha-icon class="small" .icon="${"mdi:arrow-down"}"></ha-icon>${at(e.hass,o.state.toBattery,o.unit,o.unit_white_space,o.decimals,void 0,t.watt_threshold)}</span>`:""} ${"two_way"===(null===(s=i.battery)||void 0===s?void 0:s.display_state)||void 0===(null===(d=i.battery)||void 0===d?void 0:d.display_state)||"one_way_no_zero"===(null===(c=i.battery)||void 0===c?void 0:c.display_state)&&o.state.fromBattery>0||"one_way"===(null===(u=i.battery)||void 0===u?void 0:u.display_state)&&(0===o.state.toBattery||0!==o.state.fromBattery)?H`<span class="battery-out" @click="${t=>{const o="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.consumption;e.openDetails(t,o)}}" @keyDown="${t=>{if("Enter"===t.key){const o="string"==typeof i.battery.entity?i.battery.entity:i.battery.entity.consumption;e.openDetails(t,o)}}}"><ha-icon class="small" .icon="${"mdi:arrow-up"}"></ha-icon>${at(e.hass,o.state.fromBattery,o.unit,o.unit_white_space,o.decimals,void 0,t.watt_threshold)}</span>`:""}</div><span class="label">${o.name}</span></div>`})(this,this._config,{battery:ri,entities:ei}):H`<div class="spacer"></div>`} ${Ei?((e,t,o,{individualObj:i,templatesObj:n,displayState:a,newDur:r})=>{var l,s,d,c,u;if(!i)return H`<div class="spacer"></div>`;const h=(null===(s=null===(l=null==o?void 0:o.entities)||void 0===l?void 0:l.individual)||void 0===s?void 0:s.findIndex((e=>e.entity===i.entity)))||0,p=r.individual[h]||0;return H`<div class="circle-container individual-bottom bottom">${ht(o,(null==i?void 0:i.state)||0)?H`<svg width="80" height="30"><path d="M40 40 v-40" id="individual-bottom" class="${ut((null==i?void 0:i.state)||0,o)}"/>${pt(o)&&(null==i?void 0:i.state)?R`<circle r="1.75" class="individual-bottom" vector-effect="non-scaling-stroke"><animateMotion dur="${je(!1!==(null===(d=i.field)||void 0===d?void 0:d.calculate_flow_rate),p)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${i.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-bottom"></animateMotion></circle>`:""}</svg>`:H`<svg width="80" height="30"></svg>`}<div class="circle" @click="${t=>{e.openDetails(t,null==i?void 0:i.entity)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,null==i?void 0:i.entity)}}">${At(t,e,o,n,i,1,"left-bottom")}<ha-icon id="individual-left-bottom-icon" .icon="${null==i?void 0:i.icon}"></ha-icon>${!1!==(null===(c=null==i?void 0:i.field)||void 0===c?void 0:c.display_zero_state)||((null==i?void 0:i.state)||0)>(null!==(u=i.displayZeroTolerance)&&void 0!==u?u:0)?H`<span class="individual-bottom individual-left-bottom">${(null==i?void 0:i.showDirection)?H`<ha-icon class="small" .icon="${(null==i?void 0:i.invertAnimation)?"mdi:arrow-up":"mdi:arrow-down"}"></ha-icon>`:""}${a}</span>`:""}</div><span class="label">${null==i?void 0:i.name}</span></div>`})(this,this.hass,this._config,{displayState:xi(Ei),individualObj:Ei,newDur:gi,templatesObj:$i}):H`<div class="spacer"></div>`} ${xt(this._config,si)?((e,t,{individualObj:o,templatesObj:i,displayState:n,newDur:a,battery:r,individualObjs:l})=>{var s,d,c,u,h;if(!o)return H`<div class="spacer"></div>`;const p=(null===(d=null===(s=null==t?void 0:t.entities)||void 0===s?void 0:s.individual)||void 0===d?void 0:d.findIndex((e=>e.entity===o.entity)))||-1;if(-1===p)return H`<div class="spacer"></div>`;const v=a.individual[p]||1.66;return(null==r?void 0:r.has)||kt(t,l),H`<div class="circle-container individual-bottom individual-right individual-right-bottom"><div class="circle" @click="${t=>{e.openDetails(t,null==o?void 0:o.entity)}}" @keyDown="${t=>{"Enter"===t.key&&e.openDetails(t,null==o?void 0:o.entity)}}">${At(e.hass,e,t,i,o,3,"right-bottom")}<ha-icon id="individual-right-bottom-icon" .icon="${o.icon}"></ha-icon>${!1!==(null===(c=null==o?void 0:o.field)||void 0===c?void 0:c.display_zero_state)||(o.state||0)>(null!==(u=o.displayZeroTolerance)&&void 0!==u?u:0)?H`<span class="individual-bottom individual-right-bottom">${(null==o?void 0:o.showDirection)?H`<ha-icon class="small" .icon="${o.invertAnimation?"mdi:arrow-down":"mdi:arrow-up"}"></ha-icon>`:""}${n}</span>`:""}</div><span class="label">${o.name}</span> ${ht(t,o.state||0)?H`<div class="right-individual-flow-container"><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" class="right-individual-flow"><path id="individual-bottom-right-home" class="${ut(o.state||0,t)}" d="M45,100 v-15 c0,-30 -10,-30 -30,-30 h-20" vector-effect="non-scaling-stroke"/>${pt(t)&&o.state?R`<circle r="1" class="individual-bottom" vector-effect="non-scaling-stroke"><animateMotion dur="${je(null===(h=null==o?void 0:o.field)||void 0===h?void 0:h.calculate_flow_rate,v)}s" repeatCount="indefinite" calcMode="linear" keyPoints="${o.invertAnimation?"0;1":"1;0"}" keyTimes="0;1"><mpath xlink:href="#individual-bottom-right-home"></animateMotion></circle>`:""}</svg></div>`:""}</div>`})(this,this._config,{displayState:xi(Mi),individualObj:Mi,newDur:gi,templatesObj:$i,battery:ri,individualObjs:si}):H``}</div>`:H`<div class="spacer"></div>`} ${$t(this._config,{battery:ri,grid:oi,individual:si,newDur:gi,solar:ai})}</div>${((e,t)=>e.dashboard_link||e.second_dashboard_link?H`<div class="card-actions">${e.dashboard_link?H`<a href="${e.dashboard_link}"><mwc-button>${e.dashboard_link_label||t.localize("ui.panel.lovelace.cards.energy.energy_distribution.go_to_energy_dashboard")}</mwc-button></a>`:""} ${e.second_dashboard_link?H`<a href="${e.second_dashboard_link}"><mwc-button>${e.second_dashboard_link_label||t.localize("ui.panel.lovelace.cards.energy.energy_distribution.go_to_energy_dashboard")}</mwc-button></a>`:""}</div>`:H``)(this._config,this.hass)}</ha-card>`}updated(e){var t;if(super.updated(e),!this._config||!this.hass)return;const o=null===(t=null==this?void 0:this.shadowRoot)||void 0===t?void 0:t.querySelector("#power-flow-card-plus"),i=o?getComputedStyle(o).getPropertyValue("width"):"0px";this._width=parseInt(i.replace("px",""),10),this._tryConnectAll()}_tryConnectAll(){var e,t,o,i,n,a,r,l,s;const{entities:d}=this._config,c={gridSecondary:null===(t=null===(e=d.grid)||void 0===e?void 0:e.secondary_info)||void 0===t?void 0:t.template,solarSecondary:null===(i=null===(o=d.solar)||void 0===o?void 0:o.secondary_info)||void 0===i?void 0:i.template,homeSecondary:null===(a=null===(n=d.home)||void 0===n?void 0:n.secondary_info)||void 0===a?void 0:a.template,individualSecondary:null===(r=d.individual)||void 0===r?void 0:r.map((e=>{var t;return null===(t=e.secondary_info)||void 0===t?void 0:t.template})),nonFossilFuelSecondary:null===(s=null===(l=d.fossil_fuel_percentage)||void 0===l?void 0:l.secondary_info)||void 0===s?void 0:s.template};for(const[e,t]of Object.entries(c))if(t)if(Array.isArray(t)){const e=["left-top","left-bottom","right-top","right-bottom"];t.forEach(((t,o)=>{t&&this._tryConnect(t,`${e[o]}Secondary`)}))}else this._tryConnect(t,e)}async _tryConnect(e,t){var o,i,n,a,r,l;if(this.hass&&this._config&&void 0===(null===(o=this._unsubRenderTemplates)||void 0===o?void 0:o.get(t))&&""!==e)try{const o=(a=this.hass.connection,r=e=>{this._templateResults[t]=e},l={template:e,entity_ids:this._config.entity_id,variables:{config:this._config,user:this.hass.user.name},strict:!0},a.subscribeMessage((e=>r(e)),Object.assign({type:"render_template"},l)));null===(i=this._unsubRenderTemplates)||void 0===i||i.set(t,o),await o}catch(o){this._templateResults=Object.assign(Object.assign({},this._templateResults),{[t]:{result:e,listeners:{all:!1,domains:[],entities:[],time:!1}}}),null===(n=this._unsubRenderTemplates)||void 0===n||n.delete(t)}}async _tryDisconnectAll(){var e,t,o,i,n,a,r;const{entities:l}=this._config,s={gridSecondary:null===(t=null===(e=l.grid)||void 0===e?void 0:e.secondary_info)||void 0===t?void 0:t.template,solarSecondary:null===(i=null===(o=l.solar)||void 0===o?void 0:o.secondary_info)||void 0===i?void 0:i.template,homeSecondary:null===(a=null===(n=l.home)||void 0===n?void 0:n.secondary_info)||void 0===a?void 0:a.template,individualSecondary:null===(r=l.individual)||void 0===r?void 0:r.map((e=>{var t;return null===(t=e.secondary_info)||void 0===t?void 0:t.template}))};for(const[e,t]of Object.entries(s))t&&this._tryDisconnect(e)}async _tryDisconnect(e){var t,o;const i=null===(t=this._unsubRenderTemplates)||void 0===t?void 0:t.get(e);if(i)try{(await i)(),null===(o=this._unsubRenderTemplates)||void 0===o||o.delete(e)}catch(e){if("not_found"!==e.code&&"template_error"!==e.code)throw e}}};Pt.styles=be,e([pe({attribute:!1})],Pt.prototype,"hass",void 0),e([ve()],Pt.prototype,"_config",void 0),e([ve()],Pt.prototype,"_templateResults",void 0),e([ve()],Pt.prototype,"_unsubRenderTemplates",void 0),e([ve()],Pt.prototype,"_width",void 0),e([_e("#battery-grid-flow")],Pt.prototype,"batteryGridFlow",void 0),e([_e("#battery-home-flow")],Pt.prototype,"batteryToHomeFlow",void 0),e([_e("#grid-home-flow")],Pt.prototype,"gridToHomeFlow",void 0),e([_e("#solar-battery-flow")],Pt.prototype,"solarToBatteryFlow",void 0),e([_e("#solar-grid-flow")],Pt.prototype,"solarToGridFlow",void 0),e([_e("#solar-home-flow")],Pt.prototype,"solarToHomeFlow",void 0),Pt=e([ce("power-flow-card-plus")],Pt);class Dt extends TypeError{constructor(e,t){let o;const{message:i,explanation:n,...a}=e,{path:r}=e,l=0===r.length?i:`At path: ${r.join(".")} -- ${i}`;super(n??l),null!=n&&(this.cause=l),Object.assign(this,a),this.name=this.constructor.name,this.failures=()=>o??(o=[e,...t()])}}function zt(e){return"object"==typeof e&&null!=e}function Tt(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function Ot(e,t,o,i){if(!0===e)return;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:n,branch:a}=t,{type:r}=o,{refinement:l,message:s=`Expected a value of type \`${r}\`${l?` with refinement \`${l}\``:""}, but received: \`${Tt(i)}\``}=e;return{value:i,type:r,refinement:l,key:n[n.length-1],path:n,branch:a,...e,message:s}}function*Nt(e,t,o,i){(function(e){return zt(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const n of e){const e=Ot(n,t,o,i);e&&(yield e)}}function*jt(e,t,o={}){const{path:i=[],branch:n=[e],coerce:a=!1,mask:r=!1}=o,l={path:i,branch:n};if(a&&(e=t.coercer(e,l),r&&"type"!==t.type&&zt(t.schema)&&zt(e)&&!Array.isArray(e)))for(const o in e)void 0===t.schema[o]&&delete e[o];let s="valid";for(const i of t.validator(e,l))i.explanation=o.message,s="not_valid",yield[i,void 0];for(let[d,c,u]of t.entries(e,l)){const t=jt(c,u,{path:void 0===d?i:[...i,d],branch:void 0===d?n:[...n,c],coerce:a,mask:r,message:o.message});for(const o of t)o[0]?(s=null!=o[0].refinement?"not_refined":"not_valid",yield[o[0],void 0]):a&&(c=o[1],void 0===d?e=c:e instanceof Map?e.set(d,c):e instanceof Set?e.add(c):zt(e)&&(void 0!==c||d in e)&&(e[d]=c))}if("not_valid"!==s)for(const i of t.refiner(e,l))i.explanation=o.message,s="not_refined",yield[i,void 0];"valid"===s&&(yield[void 0,e])}class Bt{constructor(e){const{type:t,schema:o,validator:i,refiner:n,coercer:a=(e=>e),entries:r=function*(){}}=e;this.type=t,this.schema=o,this.entries=r,this.coercer=a,this.validator=i?(e,t)=>Nt(i(e,t),t,this,e):()=>[],this.refiner=n?(e,t)=>Nt(n(e,t),t,this,e):()=>[]}assert(e,t){return It(e,this,t)}create(e,t){return function(e,t,o){const i=Lt(e,t,{coerce:!0,message:o});if(i[0])throw i[0];return i[1]}(e,this,t)}is(e){return function(e,t){return!Lt(e,t)[0]}(e,this)}mask(e,t){return function(e,t,o){const i=Lt(e,t,{coerce:!0,mask:!0,message:o});if(i[0])throw i[0];return i[1]}(e,this,t)}validate(e,t={}){return Lt(e,this,t)}}function It(e,t,o){const i=Lt(e,t,{message:o});if(i[0])throw i[0]}function Lt(e,t,o={}){const i=jt(e,t,o),n=function(e){const{done:t,value:o}=e.next();return t?void 0:o}(i);if(n[0]){return[new Dt(n[0],(function*(){for(const e of i)e[0]&&(yield e[0])})),void 0]}return[void 0,n[1]]}function Ht(e,t){return new Bt({type:e,schema:null,validator:t})}function Rt(){return Ht("any",(()=>!0))}function Ft(){return Ht("boolean",(e=>"boolean"==typeof e))}function Ut(){return Ht("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${Tt(e)}`))}function Gt(){return Ht("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${Tt(e)}`))}function Vt(e){const t=e?Object.keys(e):[],o=Ht("never",(()=>!1));return new Bt({type:"object",schema:e||null,*entries(i){if(e&&zt(i)){const n=new Set(Object.keys(i));for(const o of t)n.delete(o),yield[o,i[o],e[o]];for(const e of n)yield[e,i[e],o]}},validator:e=>zt(e)||`Expected an object, but received: ${Tt(e)}`,coercer:e=>zt(e)?{...e}:e})}function Wt(e){return new Bt({...e,validator:(t,o)=>void 0===t||e.validator(t,o),refiner:(t,o)=>void 0===t||e.refiner(t,o)})}function Zt(){return Ht("string",(e=>"string"==typeof e||`Expected a string, but received: ${Tt(e)}`))}var Kt=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function Yt(e,t){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!((i=e[o])===(n=t[o])||Kt(i)&&Kt(n)))return!1;var i,n;return!0}function Xt(e,t){void 0===t&&(t=Yt);var o=null;function i(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];if(o&&o.lastThis===this&&t(i,o.lastArgs))return o.lastResult;var a=e.apply(this,i);return o={lastResult:a,lastArgs:i,lastThis:this},a}return i.clear=function(){o=null},i}var qt={label:{car:"Auto",motorbike:"Motorka"}},Jt={entity_generator:"Generátor",combined:"Kombinovaná entita (jedna entita s kladnými a zápornými hodnotami)",separated:"Oddelené subjekty (jeden subjekt pro spotřebu a jeden pro výrobu)",custom_colors:"Vlastní barvy",secondary_info:"Sekundární informace",power_outage:"Výpadek",grid:"Síť",solar:"Solární",battery:"Baterie",fossil_fuel_percentage:"Fosilní palivo",home:"Dům",individual:"Individuální",accept_negative:"Přijmout záporné hodnoty",advanced:"Pokročilá nastavení",decimals:"Desetinná místa",consumption:"Spotřeba",production:"Výroba",color_icon:"Barva ikony",color_circle:"Barva kruhu",color_value:"Barva hodnoty",color_state_of_charge_value:"Barva",display_zero:"Zobrazit nulu",display_zero_tolerance:"Zobrazit nulovou toleranci",display_state:"Zobrazit stav",display_zero_state:"Zobrazení nulového stavu",invert_state:"Invertovat stav",template:"Šablona",unit_of_measurement:"Jednotka",unit_white_space:"Jednotka bílé plochy",label_alert:"Štítek pro upozornění",icon_alert:"Ikona pro upozornění",state_alert:"Stav upozornění",state_of_charge:"Stav nabití",state_of_charge_unit_white_space:"Bílá plocha",state_of_charge_unit:"Jednotky",state_of_charge_decimals:"Desetinná místa",state_of_charge_icon:"Ikona",state_type:"Typ stavu",subtract_individual:"Odečíst individuálně",override_state:"Přepsat stav",calculate_flow_rate:"Počítat průtok",inverted_animation:"Invertovat animaci",show_direction:"Zobrazit směr",color:"Barva",dashboard_link:"Odkaz na informační panel",dashboard_link_label:"Název odkazu na informační panel",w_decimals:"Desetinná místa pro Watty",kw_decimals:"Desetinná místa pro kilowatty",max_flow_rate:"Maximální průtok",min_flow_rate:"Minimální průtok",max_expected_power:"Maximální očekávaný výkon",min_expected_power:"Minimální očekávaný výkon",watt_threshold:"Práh wattů na kilowatty",display_zero_lines:"Zobrazit nulové řádky",clickable_entities:"Entity, na které se dá kliknout",disable_dots:"Vypnout tečky",use_new_flow_rate_model:"Nový model průtoku",use_metadata:"Použít Metadata",mode:"Režim",show:"Zobrazit",hide:"Skrýt",custom:"Volitelné",grey_out:"Šedý výstup",transparency:"Průhlednost",grey_color:"Šedá barva"},Qt={card:qt,editor:Jt},eo={label:{car:"Car",motorbike:"Motorbike"}},to={entity_generator:"Generator",combined:"Combined Entity (One entity with positive and negative values)",separated:"Separated Entities (One entity for consumption and one for production)",custom_colors:"Custom Colors",secondary_info:"Secondary Info",power_outage:"Power Outage",grid:"Grid",solar:"Solar",battery:"Battery",fossil_fuel_percentage:"Fossil Fuel",home:"Home",individual:"Individual",accept_negative:"Accept Negative",advanced:"Advanced Options",decimals:"Decimals",consumption:"Consumption",production:"Production",color_icon:"Color of Icon",color_circle:"Color of Circle",color_value:"Color of Value",color_state_of_charge_value:"Color",display_zero:"Display Zero",display_zero_tolerance:"Display Zero Tolerance",display_state:"Display State",display_zero_state:"Display Zero State",invert_state:"Invert State",template:"Template",unit_of_measurement:"Unit",unit_white_space:"Unit White Space",label_alert:"Label for Alert",icon_alert:"Icon for Alert",state_alert:"State of Alert",state_of_charge:"State of Charge",state_of_charge_unit_white_space:"White Space",state_of_charge_unit:"Unit",state_of_charge_decimals:"Decimals",state_of_charge_icon:"Icon",state_type:"Type of State",subtract_individual:"Subtract Individual",override_state:"Override State",calculate_flow_rate:"Calculate Flow Rate",inverted_animation:"Invert Animation",show_direction:"Show Direction",color:"Color",dashboard_link:"Dashboard Link",dashboard_link_label:"Dashboard Link Name",w_decimals:"Watt Decimals",kw_decimals:"Kilowatt Decimals",max_flow_rate:"Max Flow Rate",min_flow_rate:"Min Flow Rate",max_expected_power:"Max Expected Power",min_expected_power:"Min Expected Power",watt_threshold:"Watt to Kilowatt Threshold",display_zero_lines:"Display Zero Lines",clickable_entities:"Clickable Entities",disable_dots:"Disable Dots",use_new_flow_rate_model:"New Flow Rate Model",use_metadata:"Use Metadata",mode:"Mode",show:"Show",hide:"Hide",custom:"Custom",grey_out:"Grey Out",transparency:"Transparency",grey_color:"Grey Color"},oo={card:eo,editor:to},io={label:{car:"Auto",motorbike:"Motorrad"}},no={entity_generator:"Generator",combined:"Kombinierte Entität (Eine Entität mit positiven und negativen Werten)",separated:"Getrennte Entitäten (Eine Entität für den Verbrauch und eine für die Produktion)",custom_colors:"Benutzerdefinierte Farben",secondary_info:"Sekundäre Information",power_outage:"Stromausfall",grid:"Netz",solar:"Solar",battery:"Batterie",fossil_fuel_percentage:"Fossile Brennstoffe",home:"Zuhause",individual:"Individuell",accept_negative:"Negative Werte akzeptieren",advanced:"Erweiterte Optionen",decimals:"Dezimalstellen",consumption:"Verbrauch",production:"Produktion",color_icon:"Farbe des Symbols",color_circle:"Farbe des Kreises",color_value:"Farbe des Wertes",color_state_of_charge_value:"Farbe",display_zero:"Null anzeigen",display_zero_tolerance:"Nulltoleranz",display_state:"Zustand anzeigen",display_zero_state:"Nullzustand anzeigen",invert_state:"Zustand umkehren",template:"Vorlage",unit_of_measurement:"Einheit",unit_white_space:"Weißraum für Einheit",label_alert:"Beschriftung für Alarm",icon_alert:"Symbol für Alarm",state_alert:"Alarmzustand",state_of_charge:"Ladezustand",state_of_charge_unit_white_space:"Leerzeichen",state_of_charge_unit:"Einheit",state_of_charge_decimals:"Dezimalstellen",state_of_charge_icon:"Symbol",state_type:"Typ des Zustands",subtract_individual:"Individuell abziehen",override_state:"Zustand überschreiben",calculate_flow_rate:"Flussrate berechnen",inverted_animation:"Animation umkehren",show_direction:"Richtung anzeigen",color:"Farbe",dashboard_link:"Dashboard-Link",dashboard_link_label:"Name des Dashboard-Links",w_decimals:"Watt-Dezimalstellen",kw_decimals:"Kilowatt-Dezimalstellen",max_flow_rate:"Maximale Flussrate",min_flow_rate:"Minimale Flussrate",max_expected_power:"Maximale erwartete Leistung",min_expected_power:"Minimale erwartete Leistung",watt_threshold:"Watt-zu-Kilowatt-Schwelle",display_zero_lines:"Nulllinien anzeigen",clickable_entities:"Klickbare Entitäten",disable_dots:"Punkte deaktivieren",use_new_flow_rate_model:"Neues Fluss-Modell verwenden",use_metadata:"Metadaten verwenden",mode:"Modus",show:"Anzeigen",hide:"Verstecken",custom:"Benutzerdefiniert",grey_out:"Ausgrauen",transparency:"Transparenz",grey_color:"Graue Farbe"},ao={card:io,editor:no},ro={label:{car:"Bil",motorbike:"Motorcykel"}},lo={entity_generator:"Generator",combined:"Kombineret enhed (Én enhed med positive og negative værdier)",separated:"Adskilte enheder (én enhed til forbrug og én til produktion)",custom_colors:"Brugerdefinerede farver",secondary_info:"Sekundær info",power_outage:"Strømafbrydelse",grid:"El-Net",solar:"Solar",battery:"Batteri",fossil_fuel_percentage:"Fossilt Brændstof",home:"Hjem",individual:"Individuel",accept_negative:"Accepter negative værdier",advanced:"Avancerede indstillinger",decimals:"Decimaler",consumption:"Forbrug",production:"Produktion",color_icon:"Farve af Icon",color_circle:"Farve af Cirkel",color_value:"Farve af værdi",color_state_of_charge_value:"Farve",display_zero:"Vis Nul",display_zero_tolerance:"Vis ingen tolerance",display_state:"Vis Tilstand",display_zero_state:"Vis Nultilstand",invert_state:"Omvendt tilstand",template:"Skabelon",unit_of_measurement:"Enhed",unit_white_space:"Enhed tomt mellemrum",label_alert:"Etiket til Alarm",icon_alert:"Ikon for alarm",state_alert:"Alarmtilstand",state_of_charge:"Ladningstilstand",state_of_charge_unit_white_space:"Tomt mellemrum",state_of_charge_unit:"Enhed",state_of_charge_decimals:"Decimal",state_of_charge_icon:"Ikon",state_type:"Tilstande",subtract_individual:"Subtract Individual",override_state:"Overskriv Tilstand",calculate_flow_rate:"Beregn Hastighed",inverted_animation:"Omvendt Animation",show_direction:"Vis Retning",color:"Farve",dashboard_link:"Dashboard Link",dashboard_link_label:"Dashboard Link Navn",w_decimals:"Watt Decimal",kw_decimals:"Kilowatt Decimal",max_flow_rate:"Max Flow Rate",min_flow_rate:"Min Flow Rate",max_expected_power:"Max Forventede Strøm",min_expected_power:"Min Forventede Power",watt_threshold:"Watt til Kilowatt Grænse",display_zero_lines:"Vis Nul Linjer",clickable_entities:"Klikbar enheder",disable_dots:"Deaktiver prikker",use_new_flow_rate_model:"Ny flowhastighedsmodel",use_metadata:"Brug Metadata",mode:"Tilstand",show:"Vis",hide:"Skjul",custom:"Brugerdefinerede",grey_out:"Grået ud",transparency:"Transparens",grey_color:"Grå Farve"},so={card:ro,editor:lo},co={label:{car:"Carro",motorbike:"Mota"}},uo={entity_generator:"Gerador",combined:"Entidade combinada (uma entidade com valores positivos e negativos)",separated:"Entidades Separadas (Uma entidade para consumo e outra para produção)",custom_colors:"Cores personalizadas",secondary_info:"Informação Secundária",power_outage:"Falta de energia",grid:"Rede",solar:"Solar",battery:"Bateria",fossil_fuel_percentage:"Combustíveis Fósseis",home:"Casa",individual:"Individual",accept_negative:"Aceitar Valores Negativos",advanced:"Opções Avançadas",decimals:"Casas Decimais",consumption:"Consumo",production:"Produção",color_icon:"Cor do Ícone",color_circle:"Cor do Círculo",color_value:"Cor do Valor",color_state_of_charge_value:"Cor",display_zero:"Mostrar Zero",display_zero_tolerance:"Tolerância do Zero",display_state:"Mostrar Estado",display_zero_state:"Mostrar Estado Zero",invert_state:"Inverter Estado",template:"Modelo",unit_of_measurement:"Unidade",unit_white_space:"Espaçamento da Unidade",label_alert:"Nome para Alerta",icon_alert:"Ícone para Alerta",state_alert:"Estado do Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espaçamento",state_of_charge_unit:"Unidade",state_of_charge_decimals:"Casas Decimais",state_of_charge_icon:"Ícone",state_type:"Tipo de Estado",subtract_individual:"Subtrair Individualmente",override_state:"Substituir Estado",calculate_flow_rate:"Calcular Taxa de Fluxo",inverted_animation:"Animação Invertida",show_direction:"Mostrar Direção",color:"Cor",dashboard_link:"Link do Painel de Controlo",dashboard_link_label:"Nome do Link do Painel de Controlo",w_decimals:"Casas Decimais de Watt",kw_decimals:"Casas Decimais de Quilowatt",max_flow_rate:"Taxa de Fluxo Máxima",min_flow_rate:"Taxa de Fluxo Mínima",max_expected_power:"Potência Máxima Esperada",min_expected_power:"Potência Mínima Esperada",watt_threshold:"Limiar de Watt para Quilowatt",display_zero_lines:"Mostrar Linhas Zero",clickable_entities:"Entidades Clicáveis",disable_dots:"Desativar Pontos",use_new_flow_rate_model:"Utilizar Novo Modelo de Velocidade",use_metadata:"Utilizar Metadados",mode:"Modo",show:"Mostrar",hide:"Esconder",custom:"Personalizado",grey_out:"Cinzento",transparency:"Transparência",grey_color:"Cor Cinzenta"},ho={card:co,editor:uo},po={label:{car:"Carro",motorbike:"Mota"}},vo={entity_generator:"Gerador",combined:"Entidade combinada (uma entidade com valores positivos e negativos)",separated:"Entidades Separadas (Uma entidade para consumo e outra para produção)",custom_colors:"Cores personalizadas",secondary_info:"Informação Secundária",power_outage:"Falta de energia",grid:"Rede",solar:"Solar",battery:"Bateria",fossil_fuel_percentage:"Combustíveis Fósseis",home:"Casa",individual:"Individual",accept_negative:"Aceitar Valores Negativos",advanced:"Opções Avançadas",decimals:"Casas Decimais",consumption:"Consumo",production:"Produção",color_icon:"Cor do Ícone",color_circle:"Cor do Círculo",color_value:"Cor do Valor",color_state_of_charge_value:"Cor",display_zero:"Exibir Zero",display_zero_tolerance:"Tolerância de Zero",display_state:"Exibir Estado",display_zero_state:"Exibir Estado Zero",invert_state:"Inverter Estado",template:"Modelo",unit_of_measurement:"Unidade",unit_white_space:"Espaçamento da Unidade",label_alert:"Rótulo para Alerta",icon_alert:"Ícone para Alerta",state_alert:"Estado do Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espaçamento",state_of_charge_unit:"Unidade",state_of_charge_decimals:"Casas Decimais",state_of_charge_icon:"Ícone",state_type:"Tipo de Estado",subtract_individual:"Subtrair Individualmente",override_state:"Substituir Estado",calculate_flow_rate:"Calcular Taxa de Fluxo",inverted_animation:"Animação Invertida",show_direction:"Mostrar Direção",color:"Cor",dashboard_link:"Link do Painel",dashboard_link_label:"Nome do Link do Painel",w_decimals:"Casas Decimais de Watts",kw_decimals:"Casas Decimais de Quilowatts",max_flow_rate:"Taxa de Fluxo Máxima",min_flow_rate:"Taxa de Fluxo Mínima",max_expected_power:"Potência Máxima Esperada",min_expected_power:"Potência Mínima Esperada",watt_threshold:"Limiar de Watts para Quilowatts",display_zero_lines:"Exibir Linhas Zero",clickable_entities:"Entidades Clicáveis",disable_dots:"Desativar Pontos",use_new_flow_rate_model:"Utilizar Novo Modelo de Velocidade",use_metadata:"Utilizar Metadados",mode:"Modo",show:"Mostrar",hide:"Esconder",custom:"Personalizado",grey_out:"Cinza",transparency:"Transparência",grey_color:"Cor do Cinza"},_o={card:po,editor:vo},mo={label:{car:"Coche",motorbike:"Motocicleta"}},fo={entity_generator:"Generador",combined:"Entidad combinada (una entidad con valores positivos y negativos)",separated:"Entidades separadas (una entidad de consumo y otra de producción)",custom_colors:"Colores personalizados",secondary_info:"Información secundaria",power_outage:"Corte de energía",grid:"Red eléctrica",solar:"Solar",battery:"Batería",fossil_fuel_percentage:"Combustible Fósil",home:"Inicio",individual:"Individual",accept_negative:"Aceptar valores negativos",advanced:"Opciones Avanzadas",decimals:"Decimales",consumption:"Consumo",production:"Producción",color_icon:"Color del Icono",color_circle:"Color del Círculo",color_value:"Color del Valor",color_state_of_charge_value:"Color",display_zero:"Mostrar Cero",display_zero_tolerance:"Tolerancia de Cero",display_state:"Mostrar Estado",display_zero_state:"Mostrar Estado Cero",invert_state:"Invertir Estado",template:"Plantilla",unit_of_measurement:"Unidad",unit_white_space:"Espacio en Blanco de la Unidad",label_alert:"Etiqueta para Alerta",icon_alert:"Ícono para Alerta",state_alert:"Estado de Alerta",state_of_charge:"Estado de Carga",state_of_charge_unit_white_space:"Espacio en Blanco",state_of_charge_unit:"Unidad",state_of_charge_decimals:"Decimales",state_of_charge_icon:"Ícono",state_type:"Tipo de Estado",subtract_individual:"Restar Individualmente",override_state:"Sobrescribir Estado",calculate_flow_rate:"Calcular Tasa de Flujo",inverted_animation:"Animación Invertida",show_direction:"Mostrar Dirección",color:"Color",dashboard_link:"Enlace del Tablero",dashboard_link_label:"Nombre del Enlace del Tablero",w_decimals:"Decimales de Vatio",kw_decimals:"Decimales de Kilovatio",max_flow_rate:"Tasa de Flujo Máxima",min_flow_rate:"Tasa de Flujo Mínima",max_expected_power:"Potencia Máxima Esperada",min_expected_power:"Potencia Mínima Esperada",watt_threshold:"Umbral de Vatio a Kilovatio",display_zero_lines:"Mostrar Líneas de Cero",clickable_entities:"Entidades Clicables",disable_dots:"Desactivar Puntos",use_new_flow_rate_model:"Utilizar Nuevo Modelo de Tasa de Flujo",use_metadata:"Utilizar Metadatos",mode:"Modo",show:"Mostrar",hide:"Ocultar",custom:"Personalizado",grey_out:"Gris",transparency:"Transparencia",grey_color:"Color Gris"},yo={card:mo,editor:fo},go={label:{car:"Auto",motorbike:"Motorfiets"}},bo={entity_generator:"Generator",combined:"Gecombineerde entiteit (één entiteit met positieve en negatieve waarden)",separated:"Gescheiden entiteiten (één entiteit voor consumptie en één voor productie)",custom_colors:"Aangepaste kleuren",secondary_info:"Secundaire informatie",power_outage:"Stroomuitval",grid:"Elektriciteitsnet",solar:"Zonne-energie",battery:"Batterij",fossil_fuel_percentage:"Fossiele Brandstof",home:"Thuis",individual:"Individueel",accept_negative:"Negatieve waarden accepteren",advanced:"Geavanceerde Opties",decimals:"Decimalen",consumption:"Verbruik",production:"Productie",color_icon:"Kleur van Pictogram",color_circle:"Kleur van Cirkel",color_value:"Kleur van Waarde",color_state_of_charge_value:"Kleur",display_zero:"Nul Weergeven",display_zero_tolerance:"Nultolerantie Weergeven",display_state:"Toestand Weergeven",display_zero_state:"Nul Toestand Weergeven",invert_state:"Toestand Omkeren",template:"Sjabloon",unit_of_measurement:"Eenheid",unit_white_space:"Eenheid Spaties",label_alert:"Label voor Alarm",icon_alert:"Pictogram voor Alarm",state_alert:"Toestand van Alarm",state_of_charge:"Laadstatus",state_of_charge_unit_white_space:"Spaties",state_of_charge_unit:"Eenheid",state_of_charge_decimals:"Decimalen",state_of_charge_icon:"Pictogram",state_type:"Type Toestand",subtract_individual:"Individueel Aftrekken",override_state:"Toestand Overschrijven",calculate_flow_rate:"Stroomsnelheid Berekenen",inverted_animation:"Animatie Omkeren",show_direction:"Richting Weergeven",color:"Kleur",dashboard_link:"Dashboard Link",dashboard_link_label:"Naam van Dashboard Link",w_decimals:"Watt Decimalen",kw_decimals:"Kilowatt Decimalen",max_flow_rate:"Maximale Stroomsnelheid",min_flow_rate:"Minimale Stroomsnelheid",max_expected_power:"Maximaal Verwacht Vermogen",min_expected_power:"Minimaal Verwacht Vermogen",watt_threshold:"Watt naar Kilowatt Drempelwaarde",display_zero_lines:"Nullijnen Weergeven",clickable_entities:"Klikbare Entiteiten",disable_dots:"Punten Uitschakelen",use_new_flow_rate_model:"Nieuw Stroomsnelheid Model Gebruiken",use_metadata:"Metadata Gebruiken",mode:"Modus",show:"Weergeven",hide:"Verbergen",custom:"Aangepast",grey_out:"Grijstint",transparency:"Transparantie",grey_color:"Grijstint"},wo={card:go,editor:bo},xo={label:{car:"Auto",motorbike:"Motocicletta"}},ko={entity_generator:"Generatore",combined:"Entità combinata (un'entità con valori positivi e negativi)",separated:"Entità separate (Un'entità per il consumo e una per la produzione)",custom_colors:"Colori personalizzati",secondary_info:"Informazioni secondarie",power_outage:"Interruzione di corrente",grid:"Rete Elettrica",solar:"Solare",battery:"Batteria",fossil_fuel_percentage:"Carburante Fossile",home:"Casa",individual:"Individuale",accept_negative:"Accetta Valori Negativi",advanced:"Opzioni Avanzate",decimals:"Decimali",consumption:"Consumo",production:"Produzione",color_icon:"Colore dell'Icona",color_circle:"Colore del Cerchio",color_value:"Colore del Valore",color_state_of_charge_value:"Colore",display_zero:"Mostra Zero",display_zero_tolerance:"Tolleranza dello Zero",display_state:"Mostra Stato",display_zero_state:"Mostra Stato Zero",invert_state:"Inverti Stato",template:"Modello",unit_of_measurement:"Unità",unit_white_space:"Spazio Bianco Unità",label_alert:"Etichetta per l'Allarme",icon_alert:"Icona per l'Allarme",state_alert:"Stato dell'Allarme",state_of_charge:"Stato di Carica",state_of_charge_unit_white_space:"Spazio Bianco",state_of_charge_unit:"Unità",state_of_charge_decimals:"Decimali",state_of_charge_icon:"Icona",state_type:"Tipo di Stato",subtract_individual:"Sottrai Individualmente",override_state:"Sovrascrivi Stato",calculate_flow_rate:"Calcola Tasso di Flusso",inverted_animation:"Animazione Invertita",show_direction:"Mostra Direzione",color:"Colore",dashboard_link:"Collegamento Dashboard",dashboard_link_label:"Nome Collegamento Dashboard",w_decimals:"Decimali Watt",kw_decimals:"Decimali Kilowatt",max_flow_rate:"Tasso di Flusso Massimo",min_flow_rate:"Tasso di Flusso Minimo",max_expected_power:"Potenza Massima Prevista",min_expected_power:"Potenza Minima Prevista",watt_threshold:"Soglia Watt per Kilowatt",display_zero_lines:"Mostra Linee Zero",clickable_entities:"Entità Cliccabili",disable_dots:"Disabilita Punti",use_new_flow_rate_model:"Utilizza Nuovo Modello di Tasso di Flusso",use_metadata:"Utilizza Metadati",mode:"Modalità",show:"Mostra",hide:"Nascondi",custom:"Personalizzato",grey_out:"Sfuma",transparency:"Trasparenza",grey_color:"Colore Sfumato"},$o={card:xo,editor:ko},So={label:{car:"Voiture",motorbike:"Moto"}},Co={entity_generator:"Générateur",combined:"Entité combinée (une entité avec des valeurs positives et négatives)",separated:"Entités séparées (une entité pour la consommation et une pour la production)",custom_colors:"Couleurs personnalisées",secondary_info:"Informations secondaires",power_outage:"Panne de courant",grid:"Réseau Électrique",solar:"Solaire",battery:"Batterie",fossil_fuel_percentage:"Carburant fossile",home:"Domicile",individual:"Individuel",accept_negative:"Accepter les valeurs négatives",advanced:"Options avancées",decimals:"Décimales",consumption:"Consommation",production:"Production",color_icon:"Couleur de l'icône",color_circle:"Couleur du cercle",color_value:"Couleur de la valeur",color_state_of_charge_value:"Couleur",display_zero:"Afficher zéro",display_zero_tolerance:"Tolérance de l'affichage zéro",display_state:"Afficher l'état",display_zero_state:"Afficher l'état zéro",invert_state:"Inverser l'état",template:"Modèle",unit_of_measurement:"Unité",unit_white_space:"Espace blanc de l'unité",label_alert:"Libellé de l'alerte",icon_alert:"Icône de l'alerte",state_alert:"État de l'alerte",state_of_charge:"État de charge",state_of_charge_unit_white_space:"Espace blanc de l'unité",state_of_charge_unit:"Unité",state_of_charge_decimals:"Décimales",state_of_charge_icon:"Icône",state_type:"Type d'état",subtract_individual:"Soustraire l'individuel",override_state:"Remplacer l'état",calculate_flow_rate:"Calculer le débit",inverted_animation:"Animation inversée",show_direction:"Afficher la direction",color:"Couleur",dashboard_link:"Lien du tableau de bord",dashboard_link_label:"Nom du lien du tableau de bord",w_decimals:"Décimales de watt",kw_decimals:"Décimales de kilowatt",max_flow_rate:"Débit maximal",min_flow_rate:"Débit minimal",max_expected_power:"Puissance maximale attendue",min_expected_power:"Puissance minimale attendue",watt_threshold:"Seuil de watt vers kilowatt",display_zero_lines:"Afficher les lignes zéro",clickable_entities:"Entités cliquables",disable_dots:"Désactiver les points",use_new_flow_rate_model:"Nouveau modèle de débit",use_metadata:"Utiliser les métadonnées",mode:"Mode",show:"Afficher",hide:"Masquer",custom:"Personnalisé",grey_out:"Griser",transparency:"Transparence",grey_color:"Couleur grise"},Eo={card:So,editor:Co},Ao={label:{car:"Автомобиль",motorbike:"Мотоцикл"}},Mo={entity_generator:"Генератор",combined:"Комбинированный объект (один объект с положительными и отрицательными значениями)",separated:"Отдельные объекты (один объект для потребления и один для производства)",custom_colors:"Пользовательские цвета",secondary_info:"Вторичная информация",power_outage:"Отключение электричества",grid:"Электрическая сеть",solar:"Солнечная",battery:"Батарея",fossil_fuel_percentage:"Полный объем ископаемого топлива",home:"Домашняя",individual:"Индивидуальная",accept_negative:"Принять отрицательные значения",advanced:"Расширенные настройки",decimals:"Десятичные",consumption:"Потребление",production:"Производство",color_icon:"Цвет иконки",color_circle:"Цвет круга",color_value:"Цвет значения",color_state_of_charge_value:"Цвет",display_zero:"Отображать ноль",display_zero_tolerance:"Допустимая погрешность нуля",display_state:"Отображать состояние",display_zero_state:"Отображать состояние нуля",invert_state:"Инвертировать состояние",template:"Шаблон",unit_of_measurement:"Единица измерения",unit_white_space:"Пробел единицы измерения",label_alert:"Метка для предупреждения",icon_alert:"Иконка для предупреждения",state_alert:"Состояние предупреждения",state_of_charge:"Уровень заряда",state_of_charge_unit_white_space:"Пробел",state_of_charge_unit:"Единица измерения",state_of_charge_decimals:"Десятичные",state_of_charge_icon:"Иконка",state_type:"Тип состояния",subtract_individual:"Вычесть индивидуально",override_state:"Переопределить состояние",calculate_flow_rate:"Рассчитать скорость потока",inverted_animation:"Инвертированная анимация",show_direction:"Показать направление",color:"Цвет",dashboard_link:"Ссылка на панель управления",dashboard_link_label:"Название ссылки на панель управления",w_decimals:"Десятичные ватт",kw_decimals:"Десятичные киловатт",max_flow_rate:"Максимальная скорость потока",min_flow_rate:"Минимальная скорость потока",max_expected_power:"Максимальная ожидаемая мощность",min_expected_power:"Минимальная ожидаемая мощность",watt_threshold:"Пороговое значение ватт в киловатты",display_zero_lines:"Отображать нулевые линии",clickable_entities:"Кликабельные сущности",disable_dots:"Отключить точки",use_new_flow_rate_model:"Использовать новую модель скорости потока",use_metadata:"Использовать метаданные",mode:"Режим",show:"Показать",hide:"Скрыть",custom:"Пользовательский",grey_out:"Серый",transparency:"Прозрачность",grey_color:"Серый цвет"},Po={card:Ao,editor:Mo},Do={label:{car:"Auto",motorbike:"Moottoripyörä"}},zo={entity_generator:"Generaattori",combined:"Yhdistetty kokonaisuus (yksi kokonaisuus positiivisilla ja negatiivisilla arvoilla)",separated:"Erotetut kokonaisuudet (yksi kulutukseen ja yksi tuotantoon)",custom_colors:"Mukautetut värit",secondary_info:"Toissijaiset tiedot",power_outage:"Sähkökatkos",grid:"Sähköverkko",solar:"Aurinko",battery:"Akku",fossil_fuel_percentage:"Fossiilinen polttoaine",home:"Koti",individual:"Yksittäinen",accept_negative:"Hyväksy negatiiviset arvot",advanced:"Lisäasetukset",decimals:"Desimaalit",consumption:"Kulutus",production:"Tuotanto",color_icon:"Ikonin väri",color_circle:"Ympyrän väri",color_value:"Arvon väri",color_state_of_charge_value:"Väri",display_zero:"Näytä nolla",display_zero_tolerance:"Näytä nolla-toleranssi",display_state:"Näytä tila",display_zero_state:"Näytä nolla-tila",invert_state:"Käänteinen tila",template:"Malli",unit_of_measurement:"Yksikkö",unit_white_space:"Yksikön välilyönti",label_alert:"Hälytyksen teksti",icon_alert:"Hälytyksen kuvake",state_alert:"Hälytyksen tila",state_of_charge:"Varauksen tila",state_of_charge_unit_white_space:"Välilyönti",state_of_charge_unit:"Yksikkö",state_of_charge_decimals:"Desimaalit",state_of_charge_icon:"Kuvake",state_type:"Tilan tyyppi",subtract_individual:"Vähennä yksittäinen",override_state:"Korvaa tila",calculate_flow_rate:"Laske virtausnopeus",inverted_animation:"Käänteinen animaatio",show_direction:"Näytä suunta",color:"Väri",dashboard_link:"Ohjauspaneelin linkki",dashboard_link_label:"Ohjauspaneelin linkin nimi",w_decimals:"Wattien desimaalit",kw_decimals:"Kilowattien desimaalit",max_flow_rate:"Maksimivirtausnopeus",min_flow_rate:"Minimivirtausnopeus",max_expected_power:"Ennustettu maksimiteho",min_expected_power:"Ennustettu minimiteho",watt_threshold:"Wattin ja kilowatin kynnysarvo",display_zero_lines:"Näytä nolla-viivat",clickable_entities:"Napautettavat kohteet",disable_dots:"Poista pisteet",use_new_flow_rate_model:"Uusi virtausnopeusmalli",use_metadata:"Käytä metatietoja",mode:"Tila",show:"Näytä",hide:"Piilota",custom:"Mukautettu",grey_out:"Harmaa",transparency:"Läpinäkyvyys",grey_color:"Harmaa väri"},To={card:Do,editor:zo},Oo={label:{car:"Samochód",motorbike:"Motocykl"}},No={entity_generator:"Generator",combined:"Jednostka połączona (jedna jednostka z wartościami dodatnimi i ujemnymi)",separated:"Oddzielne podmioty (jeden podmiot do konsumpcji i jeden do produkcji)",custom_colors:"Kolory niestandardowe",secondary_info:"Informacje dodatkowe",power_outage:"Brak prądu",grid:"Sieć elektryczna",solar:"Energia słoneczna",battery:"Bateria",fossil_fuel_percentage:"Paliwo kopalne",home:"Dom",individual:"Indywidualne",accept_negative:"Akceptuj wartości ujemne",advanced:"Zaawansowane opcje",decimals:"Miejsca po przecinku",consumption:"Zużycie",production:"Produkcja",color_icon:"Kolor ikony",color_circle:"Kolor okręgu",color_value:"Kolor wartości",color_state_of_charge_value:"Kolor",display_zero:"Wyświetl zero",display_zero_tolerance:"Wyświetl tolerancję zera",display_state:"Wyświetl stan",display_zero_state:"Wyświetl stan zera",invert_state:"Odwróć stan",template:"Szablon",unit_of_measurement:"Jednostka",unit_white_space:"Spacja jednostki",label_alert:"Etykieta alertu",icon_alert:"Ikona alertu",state_alert:"Stan alertu",state_of_charge:"Stan naładowania",state_of_charge_unit_white_space:"Spacja jednostki",state_of_charge_unit:"Jednostka",state_of_charge_decimals:"Miejsca po przecinku",state_of_charge_icon:"Ikona",state_type:"Typ stanu",subtract_individual:"Odjęcie indywidualne",override_state:"Nadpisanie stanu",calculate_flow_rate:"Oblicz wskaźnik przepływu",inverted_animation:"Odwróć animację",show_direction:"Pokaż kierunek",color:"Kolor",dashboard_link:"Link do panelu",dashboard_link_label:"Nazwa linku do panelu",w_decimals:"Miejsca po przecinku dla watów",kw_decimals:"Miejsca po przecinku dla kilowatów",max_flow_rate:"Maksymalna szybkość przepływu",min_flow_rate:"Minimalna szybkość przepływu",max_expected_power:"Maksymalna oczekiwana moc",min_expected_power:"Minimalna oczekiwana moc",watt_threshold:"Próg watów na kilowaty",display_zero_lines:"Wyświetl linie zera",clickable_entities:"Klikalne jednostki",disable_dots:"Wyłącz kropki",use_new_flow_rate_model:"Nowy model wskaźnika przepływu",use_metadata:"Użyj metadanych",mode:"Tryb",show:"Pokaż",hide:"Ukryj",custom:"Niestandardowy",grey_out:"Szary",transparency:"Przezroczystość",grey_color:"Kolor szary"},jo={card:Oo,editor:No},Bo={label:{car:"Auto",motorbike:"Motorka"}},Io={entity_generator:"Generátor",combined:"Kombinovaná entita (jedna entita s kladnými a zápornými hodnotami)",separated:"Oddelené subjekty (jeden subjekt pre spotrebu a jeden pre výrobu)",custom_colors:"Vlastné farby",secondary_info:"Sekundárne informácie",power_outage:"Výpadok",grid:"Sieť",solar:"Solárne",battery:"Batéria",fossil_fuel_percentage:"Fosílne palivo",home:"Doma",individual:"Individuálne",accept_negative:"Povoliť záporné hodnoty",advanced:"Pokročilé nastavenia",decimals:"Desatinné",consumption:"Spotreba",production:"Výroba",color_icon:"Farba ikony",color_circle:"Farba kruhu",color_value:"Farba hodnoty",color_state_of_charge_value:"Farba",display_zero:"Zobraziť nulu",display_zero_tolerance:"Zobraziť nulovú toleranciu",display_state:"Zobraziť stav",display_zero_state:"Zobrazenie nulového stavu",invert_state:"Invertovať stav",template:"Šablóna",unit_of_measurement:"Jednotka",unit_white_space:"Jednotka bielej plochy",label_alert:"Štítok pre upozornenie",icon_alert:"Ikona pre upozornenie",state_alert:"Stav upozornenia",state_of_charge:"Stav nabitia",state_of_charge_unit_white_space:"Biela plocha",state_of_charge_unit:"Jednotky",state_of_charge_decimals:"Desatinné",state_of_charge_icon:"Ikona",state_type:"Typ stavu",subtract_individual:"Odčítať individuálne",override_state:"Prepísať stav",calculate_flow_rate:"Počítať prietok",inverted_animation:"Invertovať animáciu",show_direction:"Zobraziť smer",color:"Farba",dashboard_link:"Odkaz na informačný panel",dashboard_link_label:"Názov odkazu na informačný panel",w_decimals:"Wattové desatinné miesta",kw_decimals:"Kilowattové desatinné miesta",max_flow_rate:"Max prietok",min_flow_rate:"Min prietok",max_expected_power:"Max očakávaný výkon",min_expected_power:"Min očakávaný výkon",watt_threshold:"Prah wattov na kilowatty",display_zero_lines:"Zobraziť nulové riadky",clickable_entities:"Entity, na ktoré sa dá kliknúť",disable_dots:"Vypnúť bodky",use_new_flow_rate_model:"Nový model prietoku",use_metadata:"Použiť Metadata",mode:"Mód",show:"Zobraziť",hide:"Skryť",custom:"Voliteľné",grey_out:"Grey Out",transparency:"Transparentnosť",grey_color:"Šedá farba"},Lo={card:Bo,editor:Io};const Ho={cs:Object.freeze({__proto__:null,card:qt,editor:Jt,default:Qt}),en:Object.freeze({__proto__:null,card:eo,editor:to,default:oo}),de:Object.freeze({__proto__:null,card:io,editor:no,default:ao}),dk:Object.freeze({__proto__:null,card:ro,editor:lo,default:so}),pt:Object.freeze({__proto__:null,card:co,editor:uo,default:ho}),pt_BR:Object.freeze({__proto__:null,card:po,editor:vo,default:_o}),es:Object.freeze({__proto__:null,card:mo,editor:fo,default:yo}),nl:Object.freeze({__proto__:null,card:go,editor:bo,default:wo}),it:Object.freeze({__proto__:null,card:xo,editor:ko,default:$o}),fr:Object.freeze({__proto__:null,card:So,editor:Co,default:Eo}),ru:Object.freeze({__proto__:null,card:Ao,editor:Mo,default:Po}),fi:Object.freeze({__proto__:null,card:Do,editor:zo,default:To}),pl:Object.freeze({__proto__:null,card:Oo,editor:No,default:jo}),sk:Object.freeze({__proto__:null,card:Bo,editor:Io,default:Lo})},Ro="en";function Fo(e,t){try{return e.split(".").reduce(((e,t)=>e[t]),Ho[t])}catch(e){return}}function Uo(e){let t=Fo(e,(localStorage.getItem("selectedLanguage")||"en").replace(/['"]+/g,"").replace("-","_"));return t||(t=Fo(e,Ro)),null!=t?t:e}function Go(){return{type:"expandable",title:Uo("editor.combined"),schema:[{name:"entity",selector:{entity:{}}}]}}function Vo(){return{type:"expandable",title:Uo("editor.separated"),name:"entity",schema:[{name:"consumption",label:"Consumption Entity",selector:{entity:{}}},{name:"production",label:"Production Entity",selector:{entity:{}}}]}}const Wo={name:"color",title:Uo("editor.custom_colors"),type:"expandable",schema:[{type:"grid",column_min_width:"200px",schema:[{name:"consumption",label:"Consumption",selector:{color_rgb:{}}},{name:"production",label:"Production",selector:{color_rgb:{}}}]}]},Zo=[{name:"entity",selector:{entity:{}}},{name:"template",label:"Template (overrides entity, save to update)",selector:{template:{}}},{type:"grid",column_min_width:"200px",schema:[{name:"icon",selector:{icon:{}}},{name:"unit_of_measurement",label:"Unit of Measurement",selector:{text:{}}},{name:"decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:10,step:1}}},{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"accept_negative",label:"Accept Negative",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}}]}],Ko=[{name:"color_icon",label:"Color of Icon",selector:{select:{options:[{value:!1,label:"Do not Color"},{value:!0,label:"Color dynamically"},{value:"production",label:"Production"},{value:"consumption",label:"Consumption"}],custom_value:!0}}},{name:"color_circle",label:"Color of Circle",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Consumption"},{value:"production",label:"Production"}],custom_value:!0}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{min:0,max:1e6,step:1,mode:"box"}}},{name:"display_state",label:"Display State",selector:{select:{options:[{value:"two_way",label:"Two Way"},{value:"one_way_no_zero",label:"One Way"},{value:"one_way",label:"One Way (Show Zero)"}],custom_value:!0}}}];function Yo(e){const t={type:"grid",column_min_width:"200px",schema:[{name:"name",selector:{text:{}}},{name:"icon",selector:{icon:{}}}]};return"battery"!==e&&"grid"!==e||t.schema.push(...Ko),t}const Xo=Object.assign(Object.assign({},Yo("grid")),{schema:[...Yo("grid").schema,{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}},{name:"color_value",label:"Color of Value",selector:{boolean:{}}}]}),qo=[Go(),Vo(),Xo,Wo,{title:Uo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:Zo},{title:Uo("editor.power_outage"),name:"power_outage",type:"expandable",schema:[{type:"grid",column_min_width:"200px",schema:[{name:"entity",selector:{entity:{}}},{name:"entity_generator",label:"Generator Entity",selector:{entity:{}}},{name:"label_alert",label:"Outage Label",selector:{text:{}}},{name:"icon_alert",label:"Outage Icon",selector:{icon:{}}},{name:"state_alert",label:"Outage State",selector:{text:{}}}]}]}],Jo=Object.assign(Object.assign({},Yo("battery")),{schema:[...Yo("battery").schema,{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"color_value",label:"Color of Value",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),Qo=[Go(),Vo(),{title:Uo("editor.state_of_charge"),name:"",type:"expandable",schema:[{name:"state_of_charge",label:"State of Charge Entity",selector:{entity:{}}},{name:"",type:"grid",column_min_width:"200px",schema:[{name:"state_of_charge_unit",label:"Unit",selector:{text:{}}},{name:"state_of_charge_unit_white_space",label:"Unit White Space",selector:{boolean:{}}},{name:"state_of_charge_decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:4,step:1}}},{name:"color_state_of_charge_value",label:"Color of Value",selector:{select:{options:[{value:!1,label:"Do Not Color"},{value:!0,label:"Color dynamically"},{value:"consumption",label:"Consumption"},{value:"production",label:"Production"}],custom_value:!0}}}]}]},Jo,Wo],ei=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},Yo()),{schema:[...Yo().schema,{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero_state",label:"Display State When Zero?",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"invert_state",label:"Invert State",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:Uo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:Zo}],ti=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},Yo()),{schema:[...Yo().schema,{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"display_zero_state",label:"Display Zero State",selector:{boolean:{}}},{name:"unit_of_measurement",label:"Unit of Measurement",selector:{text:{}}},{name:"calculate_flow_rate",label:"Calculate Flow Rate",selector:{boolean:{}}},{name:"decimals",label:"Decimals",selector:{number:{mode:"box",min:0,max:4,step:1}}},{name:"inverted_animation",label:"Invert Animation",selector:{boolean:{}}},{name:"show_direction",label:"Show Direction",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:Uo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:Zo}],oi=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},Yo()),{schema:[...Yo().schema,{name:"state_type",label:"State Type",selector:{select:{options:[{value:"power",label:"Power"},{value:"percentage",label:"Percentage"}],custom_value:!0}}},{name:"color_value",label:"Color Value",selector:{boolean:{}}},{name:"color_icon",label:"Color Icon",selector:{boolean:{}}},{name:"display_zero",label:"Display Zero",selector:{boolean:{}}},{name:"display_zero_tolerance",label:"Display Zero Tolerance",selector:{number:{mode:"box",min:0,max:1e6,step:.1}}},{name:"display_zero_state",label:"Display Zero State",selector:{boolean:{}}},{name:"unit_white_space",label:"Unit White Space",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{name:"color",label:"Color",selector:{color_rgb:{}}},{title:Uo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:Zo}],ii=[{name:"entity",selector:{entity:{}}},Object.assign(Object.assign({},Yo()),{schema:[...Yo().schema,{name:"color_value",label:"Color Value",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Do Not Color"},{value:"solar",label:"Solar"},{value:"grid",label:"Grid"},{value:"battery",label:"Battery"}],custom_value:!0}}},{name:"color_icon",label:"Color Icon",selector:{select:{options:[{value:!0,label:"Color dynamically"},{value:!1,label:"Do Not Color"},{value:"solar",label:"Solar"},{value:"grid",label:"Grid"},{value:"battery",label:"Battery"}],custom_value:!0}}},{name:"subtract_individual",label:"Subtract Individual",selector:{boolean:{}}},{name:"override_state",label:"Override State (With Home Entity)",selector:{boolean:{}}},{name:"use_metadata",label:"Use Metadata",selector:{boolean:{}}}]}),{title:Uo("editor.secondary_info"),name:"secondary_info",type:"expandable",schema:Zo}],ni={name:"grey_color",selector:{color_rgb:{}}},ai={name:"transparency",selector:{number:{min:0,max:100,step:1,mode:"box"}}},ri={name:"",type:"grid",column_min_width:"200px",schema:[ai,ni]},li=e=>{switch(e){case"grey_out":return ni;case"transparency":return ai;case"custom":return ri;default:return[]}},si=Xt(((e,t)=>[{name:"display_zero_lines",type:"grid",column_min_width:"400px",schema:[{name:"mode",selector:{select:{mode:"dropdown",options:[{value:"show",label:e("editor.show")},{value:"hide",label:e("editor.hide")},{value:"transparency",label:e("editor.transparency")},{value:"grey_out",label:e("editor.grey_out")},{value:"custom",label:e("editor.custom")}]}}},li(t)]}]));var di="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z";const ci=function(...e){const t="type"===e[0].type,o=e.map((e=>e.schema)),i=Object.assign({},...o);return t?function(e){const t=Object.keys(e);return new Bt({type:"type",schema:e,*entries(o){if(zt(o))for(const i of t)yield[i,o[i],e[i]]},validator:e=>zt(e)||`Expected an object, but received: ${Tt(e)}`,coercer:e=>zt(e)?{...e}:e})}(i):Vt(i)}(Vt({type:Zt(),view_layout:Rt()}),Vt({title:Wt(Zt()),theme:Wt(Zt()),dashboard_link:Wt(Zt()),dashboard_link_label:Wt(Zt()),second_dashboard_link:Wt(Zt()),second_dashboard_link_label:Wt(Zt()),inverted_entities:Wt(Rt()),w_decimals:Wt(Ut()),kw_decimals:Wt(Ut()),min_flow_rate:Wt(Gt()),max_flow_rate:Wt(Gt()),min_expected_power:Wt(Gt()),max_expected_power:Wt(Gt()),watt_threshold:Wt(Gt()),clickable_entities:Wt(Ft()),transparency_zero_lines:Wt(Gt()),greyout_zero_lines:Wt(Ft()),display_zero_lines:Wt(Rt()),use_new_flow_rate_model:Wt(Ft()),full_size:Wt(Ft()),style_ha_card:Wt(Rt()),style_card_content:Wt(Rt()),disable_dots:Wt(Ft()),entities:Vt({battery:Wt(Rt()),grid:Wt(Rt()),solar:Wt(Rt()),home:Wt(Rt()),fossil_fuel_percentage:Wt(Rt()),individual:Wt(Rt())})})),ui=[{name:"title",label:"Title",selector:{text:{}}}];Xt((e=>[{name:"entities",type:"grid",column_min_width:"400px",schema:[{title:e("editor.grid"),name:"grid",type:"expandable",iconPath:"M8.28,5.45L6.5,4.55L7.76,2H16.23L17.5,4.55L15.72,5.44L15,4H9L8.28,5.45M18.62,8H14.09L13.3,5H10.7L9.91,8H5.38L4.1,10.55L5.89,11.44L6.62,10H17.38L18.1,11.45L19.89,10.56L18.62,8M17.77,22H15.7L15.46,21.1L12,15.9L8.53,21.1L8.3,22H6.23L9.12,11H11.19L10.83,12.35L12,14.1L13.16,12.35L12.81,11H14.88L17.77,22M11.4,15L10.5,13.65L9.32,18.13L11.4,15M14.68,18.12L13.5,13.64L12.6,15L14.68,18.12Z",schema:qo},{title:e("editor.solar"),name:"solar",type:"expandable",iconPath:"M12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,2L14.39,5.42C13.65,5.15 12.84,5 12,5C11.16,5 10.35,5.15 9.61,5.42L12,2M3.34,7L7.5,6.65C6.9,7.16 6.36,7.78 5.94,8.5C5.5,9.24 5.25,10 5.11,10.79L3.34,7M3.36,17L5.12,13.23C5.26,14 5.53,14.78 5.95,15.5C6.37,16.24 6.91,16.86 7.5,17.37L3.36,17M20.65,7L18.88,10.79C18.74,10 18.47,9.23 18.05,8.5C17.63,7.78 17.1,7.15 16.5,6.64L20.65,7M20.64,17L16.5,17.36C17.09,16.85 17.62,16.22 18.04,15.5C18.46,14.77 18.73,14 18.87,13.21L20.64,17M12,22L9.59,18.56C10.33,18.83 11.14,19 12,19C12.82,19 13.63,18.83 14.37,18.56L12,22Z",schema:ei},{title:e("editor.battery"),name:"battery",type:"expandable",iconPath:"M16 20H8V6H16M16.67 4H15V2H9V4H7.33C6.6 4 6 4.6 6 5.33V20.67C6 21.4 6.6 22 7.33 22H16.67C17.41 22 18 21.41 18 20.67V5.33C18 4.6 17.4 4 16.67 4M15 16H9V19H15V16M15 7H9V10H15V7M15 11.5H9V14.5H15V11.5Z",schema:Qo},{title:e("editor.fossil_fuel_percentage"),name:"fossil_fuel_percentage",type:"expandable",iconPath:"M17,8C8,10 5.9,16.17 3.82,21.34L5.71,22L6.66,19.7C7.14,19.87 7.64,20 8,20C19,20 22,3 22,3C21,5 14,5.25 9,6.25C4,7.25 2,11.5 2,13.5C2,15.5 3.75,17.25 3.75,17.25C7,8 17,8 17,8Z",schema:oi},{title:e("editor.home"),name:"home",type:"expandable",iconPath:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z",schema:ii}]}]));const hi=Xt((e=>[{name:"entities",type:"grid",column_min_width:"400px",schema:[{title:`${e("editor.individual")} 1`,name:"individual1",type:"expandable",schema:ti},{title:`${e("editor.individual")} 2`,name:"individual2",type:"expandable",schema:ti}]}])),pi=Xt(((e,t)=>[{type:"grid",column_min_width:"200px",schema:[{name:"dashboard_link",label:"Dashboard Link",selector:{navigation:{}}},{name:"dashboard_link_label",label:"Dashboard Link Label",selector:{text:{}}},{name:"w_decimals",label:"Watt Decimals",selector:{number:{mode:"box",min:0,max:5,step:1}}},{name:"kw_decimals",label:"kW Decimals",selector:{number:{mode:"box",min:0,max:5,step:1}}},{name:"max_flow_rate",label:"Max Flow Rate (Sec/Dot)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"min_flow_rate",label:"Min Flow Rate (Sec/Dot)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"max_expected_power",label:"Max Expected Power (in Watts)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"min_expected_power",label:"Min Expected Power (in Watts)",selector:{number:{mode:"box",min:0,max:1e6,step:.01}}},{name:"watt_threshold",label:"Watt to Kilowatt Threshold",selector:{number:{mode:"box",min:0,max:1e6,step:1}}},{name:"clickable_entities",label:"Clickable Entities",selector:{boolean:{}}},{name:"disable_dots",label:"Disable Moving Dots",selector:{boolean:{}}},{name:"use_new_flow_rate_model",label:"New Flow Model?",selector:{boolean:{}}}]},{type:"expandable",title:e("editor.display_zero_lines"),schema:[...si(e,t)]}])),vi="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback,_i=(e,t,o=null)=>{for(;t!==o;){const o=t.nextSibling;e.removeChild(t),t=o}},mi=`{{lit-${String(Math.random()).slice(2)}}}`,fi=`\x3c!--${mi}--\x3e`,yi=new RegExp(`${mi}|${fi}`),gi="$lit$";class bi{constructor(e,t){this.parts=[],this.element=t;const o=[],i=[],n=document.createTreeWalker(t.content,133,null,!1);let a=0,r=-1,l=0;const{strings:s,values:{length:d}}=e;for(;l<d;){const e=n.nextNode();if(null!==e){if(r++,1===e.nodeType){if(e.hasAttributes()){const t=e.attributes,{length:o}=t;let i=0;for(let e=0;e<o;e++)wi(t[e].name,gi)&&i++;for(;i-- >0;){const t=s[l],o=$i.exec(t)[2],i=o.toLowerCase()+gi,n=e.getAttribute(i);e.removeAttribute(i);const a=n.split(yi);this.parts.push({type:"attribute",index:r,name:o,strings:a}),l+=a.length-1}}"TEMPLATE"===e.tagName&&(i.push(e),n.currentNode=e.content)}else if(3===e.nodeType){const t=e.data;if(t.indexOf(mi)>=0){const i=e.parentNode,n=t.split(yi),a=n.length-1;for(let t=0;t<a;t++){let o,a=n[t];if(""===a)o=ki();else{const e=$i.exec(a);null!==e&&wi(e[2],gi)&&(a=a.slice(0,e.index)+e[1]+e[2].slice(0,-5)+e[3]),o=document.createTextNode(a)}i.insertBefore(o,e),this.parts.push({type:"node",index:++r})}""===n[a]?(i.insertBefore(ki(),e),o.push(e)):e.data=n[a],l+=a}}else if(8===e.nodeType)if(e.data===mi){const t=e.parentNode;null!==e.previousSibling&&r!==a||(r++,t.insertBefore(ki(),e)),a=r,this.parts.push({type:"node",index:r}),null===e.nextSibling?e.data="":(o.push(e),r--),l++}else{let t=-1;for(;-1!==(t=e.data.indexOf(mi,t+1));)this.parts.push({type:"node",index:-1}),l++}}else n.currentNode=i.pop()}for(const e of o)e.parentNode.removeChild(e)}}const wi=(e,t)=>{const o=e.length-t.length;return o>=0&&e.slice(o)===t},xi=e=>-1!==e.index,ki=()=>document.createComment(""),$i=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Si(e,t){const{element:{content:o},parts:i}=e,n=document.createTreeWalker(o,133,null,!1);let a=Ei(i),r=i[a],l=-1,s=0;const d=[];let c=null;for(;n.nextNode();){l++;const e=n.currentNode;for(e.previousSibling===c&&(c=null),t.has(e)&&(d.push(e),null===c&&(c=e)),null!==c&&s++;void 0!==r&&r.index===l;)r.index=null!==c?-1:r.index-s,a=Ei(i,a),r=i[a]}d.forEach((e=>e.parentNode.removeChild(e)))}const Ci=e=>{let t=11===e.nodeType?0:1;const o=document.createTreeWalker(e,133,null,!1);for(;o.nextNode();)t++;return t},Ei=(e,t=-1)=>{for(let o=t+1;o<e.length;o++){const t=e[o];if(xi(t))return o}return-1},Ai=new WeakMap,Mi=e=>"function"==typeof e&&Ai.has(e),Pi={},Di={};class zi{constructor(e,t,o){this.__parts=[],this.template=e,this.processor=t,this.options=o}update(e){let t=0;for(const o of this.__parts)void 0!==o&&o.setValue(e[t]),t++;for(const e of this.__parts)void 0!==e&&e.commit()}_clone(){const e=vi?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),t=[],o=this.template.parts,i=document.createTreeWalker(e,133,null,!1);let n,a=0,r=0,l=i.nextNode();for(;a<o.length;)if(n=o[a],xi(n)){for(;r<n.index;)r++,"TEMPLATE"===l.nodeName&&(t.push(l),i.currentNode=l.content),null===(l=i.nextNode())&&(i.currentNode=t.pop(),l=i.nextNode());if("node"===n.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(l.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,n.name,n.strings,this.options));a++}else this.__parts.push(void 0),a++;return vi&&(document.adoptNode(e),customElements.upgrade(e)),e}}const Ti=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:e=>e}),Oi=` ${mi} `;class Ni{constructor(e,t,o,i){this.strings=e,this.values=t,this.type=o,this.processor=i}getHTML(){const e=this.strings.length-1;let t="",o=!1;for(let i=0;i<e;i++){const e=this.strings[i],n=e.lastIndexOf("\x3c!--");o=(n>-1||o)&&-1===e.indexOf("--\x3e",n+1);const a=$i.exec(e);t+=null===a?e+(o?Oi:fi):e.substr(0,a.index)+a[1]+a[2]+gi+a[3]+mi}return t+=this.strings[e],t}getTemplateElement(){const e=document.createElement("template");let t=this.getHTML();return void 0!==Ti&&(t=Ti.createHTML(t)),e.innerHTML=t,e}}class ji{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(ki()),this.endNode=e.appendChild(ki())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=ki()),e.__insert(this.endNode=ki())}insertAfterPart(e){e.__insert(this.startNode=ki()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(null===this.startNode.parentNode)return;for(;Mi(this.__pendingValue);){const e=this.__pendingValue;this.__pendingValue=Pi,e(this)}const e=this.__pendingValue;e!==Pi&&((e=>null===e||!("object"==typeof e||"function"==typeof e))(e)?e!==this.value&&this.__commitText(e):e instanceof Ni?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):(e=>Array.isArray(e)||!(!e||!e[Symbol.iterator]))(e)?this.__commitIterable(e):e===Di?(this.value=Di,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){const t=this.startNode.nextSibling,o="string"==typeof(e=null==e?"":e)?e:String(e);t===this.endNode.previousSibling&&3===t.nodeType?t.data=o:this.__commitNode(document.createTextNode(o)),this.value=e}__commitTemplateResult(e){const t=this.options.templateFactory(e);if(this.value instanceof zi&&this.value.template===t)this.value.update(e.values);else{const o=new zi(t,e.processor,this.options),i=o._clone();o.update(e.values),this.__commitNode(i),this.value=o}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());const t=this.value;let o,i=0;for(const n of e)o=t[i],void 0===o&&(o=new ji(this.options),t.push(o),0===i?o.appendIntoPart(this):o.insertAfterPart(t[i-1])),o.setValue(n),o.commit(),i++;i<t.length&&(t.length=i,this.clear(o&&o.endNode))}clear(e=this.startNode){_i(this.startNode.parentNode,e.nextSibling,this.endNode)}}let Bi=!1;function Ii(e){let t=Li.get(e.type);void 0===t&&(t={stringsArray:new WeakMap,keyString:new Map},Li.set(e.type,t));let o=t.stringsArray.get(e.strings);if(void 0!==o)return o;const i=e.strings.join(mi);return o=t.keyString.get(i),void 0===o&&(o=new bi(e,e.getTemplateElement()),t.keyString.set(i,o)),t.stringsArray.set(e.strings,o),o}(()=>{try{const e={get capture(){return Bi=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(e){}})();const Li=new Map,Hi=new WeakMap;"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const Ri=(e,t)=>`${e}--${t}`;let Fi=!0;void 0===window.ShadyCSS?Fi=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),Fi=!1);const Ui=e=>t=>{const o=Ri(t.type,e);let i=Li.get(o);void 0===i&&(i={stringsArray:new WeakMap,keyString:new Map},Li.set(o,i));let n=i.stringsArray.get(t.strings);if(void 0!==n)return n;const a=t.strings.join(mi);if(n=i.keyString.get(a),void 0===n){const o=t.getTemplateElement();Fi&&window.ShadyCSS.prepareTemplateDom(o,e),n=new bi(t,o),i.keyString.set(a,n)}return i.stringsArray.set(t.strings,n),n},Gi=["html","svg"],Vi=new Set;window.JSCompiler_renameProperty=(e,t)=>e;const Wi={toAttribute(e,t){switch(t){case Boolean:return e?"":null;case Object:case Array:return null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){switch(t){case Boolean:return null!==e;case Number:return null===e?null:Number(e);case Object:case Array:return JSON.parse(e)}return e}},Zi=(e,t)=>t!==e&&(t==t||e==e),Ki={attribute:!0,type:String,converter:Wi,reflect:!1,hasChanged:Zi},Yi="finalized";class Xi extends HTMLElement{constructor(){super(),this.initialize()}static get observedAttributes(){this.finalize();const e=[];return this._classProperties.forEach(((t,o)=>{const i=this._attributeNameForProperty(o,t);void 0!==i&&(this._attributeToPropertyMap.set(i,o),e.push(i))})),e}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const e=Object.getPrototypeOf(this)._classProperties;void 0!==e&&e.forEach(((e,t)=>this._classProperties.set(t,e)))}}static createProperty(e,t=Ki){if(this._ensureClassProperties(),this._classProperties.set(e,t),t.noAccessor||this.prototype.hasOwnProperty(e))return;const o="symbol"==typeof e?Symbol():`__${e}`,i=this.getPropertyDescriptor(e,o,t);void 0!==i&&Object.defineProperty(this.prototype,e,i)}static getPropertyDescriptor(e,t,o){return{get(){return this[t]},set(i){const n=this[e];this[t]=i,this.requestUpdateInternal(e,n,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this._classProperties&&this._classProperties.get(e)||Ki}static finalize(){const e=Object.getPrototypeOf(this);if(e.hasOwnProperty(Yi)||e.finalize(),this[Yi]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const e=this.properties,t=[...Object.getOwnPropertyNames(e),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e):[]];for(const o of t)this.createProperty(o,e[o])}}static _attributeNameForProperty(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}static _valueHasChanged(e,t,o=Zi){return o(e,t)}static _propertyValueFromAttribute(e,t){const o=t.type,i=t.converter||Wi,n="function"==typeof i?i:i.fromAttribute;return n?n(e,o):e}static _propertyValueToAttribute(e,t){if(void 0===t.reflect)return;const o=t.type,i=t.converter;return(i&&i.toAttribute||Wi.toAttribute)(e,o)}initialize(){this._updateState=0,this._updatePromise=new Promise((e=>this._enableUpdatingResolver=e)),this._changedProperties=new Map,this._saveInstanceProperties(),this.requestUpdateInternal()}_saveInstanceProperties(){this.constructor._classProperties.forEach(((e,t)=>{if(this.hasOwnProperty(t)){const e=this[t];delete this[t],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(t,e)}}))}_applyInstanceProperties(){this._instanceProperties.forEach(((e,t)=>this[t]=e)),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(e,t,o){t!==o&&this._attributeToProperty(e,o)}_propertyToAttribute(e,t,o=Ki){const i=this.constructor,n=i._attributeNameForProperty(e,o);if(void 0!==n){const e=i._propertyValueToAttribute(t,o);if(void 0===e)return;this._updateState=8|this._updateState,null==e?this.removeAttribute(n):this.setAttribute(n,e),this._updateState=-9&this._updateState}}_attributeToProperty(e,t){if(8&this._updateState)return;const o=this.constructor,i=o._attributeToPropertyMap.get(e);if(void 0!==i){const e=o.getPropertyOptions(i);this._updateState=16|this._updateState,this[i]=o._propertyValueFromAttribute(t,e),this._updateState=-17&this._updateState}}requestUpdateInternal(e,t,o){let i=!0;if(void 0!==e){const n=this.constructor;o=o||n.getPropertyOptions(e),n._valueHasChanged(this[e],t,o.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==o.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,o))):i=!1}!this._hasRequestedUpdate&&i&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(e,t){return this.requestUpdateInternal(e,t),this.updateComplete}async _enqueueUpdate(){this._updateState=4|this._updateState;try{await this._updatePromise}catch(e){}const e=this.performUpdate();return null!=e&&await e,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return 4&this._updateState}get hasUpdated(){return 1&this._updateState}performUpdate(){if(!this._hasRequestedUpdate)return;this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}_markUpdated(){this._changedProperties=new Map,this._updateState=-5&this._updateState}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._updatePromise}shouldUpdate(e){return!0}update(e){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach(((e,t)=>this._propertyToAttribute(t,this[t],e))),this._reflectingProperties=void 0),this._markUpdated()}updated(e){}firstUpdated(e){}}Xi[Yi]=!0;const qi=e=>t=>"function"==typeof t?((e,t)=>(window.customElements.define(e,t),t))(e,t):((e,t)=>{const{kind:o,elements:i}=t;return{kind:o,elements:i,finisher(t){window.customElements.define(e,t)}}})(e,t),Ji=(e,t)=>"method"===t.kind&&t.descriptor&&!("value"in t.descriptor)?Object.assign(Object.assign({},t),{finisher(o){o.createProperty(t.key,e)}}):{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(o){o.createProperty(t.key,e)}};function Qi(e){return(t,o)=>void 0!==o?((e,t,o)=>{t.constructor.createProperty(o,e)})(e,t,o):Ji(e,t)}const en=e=>function(e){return Qi({attribute:!1,hasChanged:null==e?void 0:e.hasChanged})}(e),tn=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,on=Symbol();class nn{constructor(e,t){if(t!==on)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(tn?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const an={};class rn extends Xi{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(Array.isArray(e)){const t=(e,o)=>e.reduceRight(((e,o)=>Array.isArray(o)?t(o,e):(e.add(o),e)),o),o=t(e,new Set),i=[];o.forEach((e=>i.unshift(e))),this._styles=i}else this._styles=void 0===e?[]:[e];this._styles=this._styles.map((e=>{if(e instanceof CSSStyleSheet&&!tn){const t=Array.prototype.slice.call(e.cssRules).reduce(((e,t)=>e+t.cssText),"");return new nn(String(t),on)}return e}))}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow(this.constructor.shadowRootOptions)}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?tn?this.renderRoot.adoptedStyleSheets=e.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet)):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map((e=>e.cssText)),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==an&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach((e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)})))}render(){return an}}rn.finalized=!0,rn.render=(e,t,o)=>{if(!o||"object"!=typeof o||!o.scopeName)throw new Error("The `scopeName` option is required.");const i=o.scopeName,n=Hi.has(t),a=Fi&&11===t.nodeType&&!!t.host,r=a&&!Vi.has(i),l=r?document.createDocumentFragment():t;if(((e,t,o)=>{let i=Hi.get(t);void 0===i&&(_i(t,t.firstChild),Hi.set(t,i=new ji(Object.assign({templateFactory:Ii},o))),i.appendInto(t)),i.setValue(e),i.commit()})(e,l,Object.assign({templateFactory:Ui(i)},o)),r){const e=Hi.get(l);Hi.delete(l);((e,t,o)=>{Vi.add(e);const i=o?o.element:document.createElement("template"),n=t.querySelectorAll("style"),{length:a}=n;if(0===a)return void window.ShadyCSS.prepareTemplateStyles(i,e);const r=document.createElement("style");for(let e=0;e<a;e++){const t=n[e];t.parentNode.removeChild(t),r.textContent+=t.textContent}(e=>{Gi.forEach((t=>{const o=Li.get(Ri(t,e));void 0!==o&&o.keyString.forEach((e=>{const{element:{content:t}}=e,o=new Set;Array.from(t.querySelectorAll("style")).forEach((e=>{o.add(e)})),Si(e,o)}))}))})(e);const l=i.content;o?function(e,t,o=null){const{element:{content:i},parts:n}=e;if(null==o)return void i.appendChild(t);const a=document.createTreeWalker(i,133,null,!1);let r=Ei(n),l=0,s=-1;for(;a.nextNode();)for(s++,a.currentNode===o&&(l=Ci(t),o.parentNode.insertBefore(t,o));-1!==r&&n[r].index===s;){if(l>0){for(;-1!==r;)n[r].index+=l,r=Ei(n,r);return}r=Ei(n,r)}}(o,r,l.firstChild):l.insertBefore(r,l.firstChild),window.ShadyCSS.prepareTemplateStyles(i,e);const s=l.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==s)t.insertBefore(s.cloneNode(!0),t.firstChild);else if(o){l.insertBefore(r,l.firstChild);const e=new Set;e.add(r),Si(o,e)}})(i,l,e.value instanceof zi?e.value.template:void 0),_i(t,t.firstChild),t.appendChild(l),Hi.set(t,e)}!n&&a&&window.ShadyCSS.styleElement(t.host)},rn.shadowRootOptions={mode:"open"};const{I:ln}=ne,sn=()=>document.createComment(""),dn=(e,t,o)=>{var i;const n=e._$AA.parentNode,a=void 0===t?e._$AB:t._$AA;if(void 0===o){const t=n.insertBefore(sn(),a),i=n.insertBefore(sn(),a);o=new ln(t,i,e,e.options)}else{const t=o._$AB.nextSibling,r=o._$AM,l=r!==e;if(l){let t;null===(i=o._$AQ)||void 0===i||i.call(o,e),o._$AM=e,void 0!==o._$AP&&(t=e._$AU)!==r._$AU&&o._$AP(t)}if(t!==a||l){let e=o._$AA;for(;e!==t;){const t=e.nextSibling;n.insertBefore(e,a),e=t}}}return o},cn=(e,t,o=e)=>(e._$AI(t,o),e),un={},hn=e=>{var t;null===(t=e._$AP)||void 0===t||t.call(e,!1,!0);let o=e._$AA;const i=e._$AB.nextSibling;for(;o!==i;){const e=o.nextSibling;o.remove(),o=e}},pn=(e,t,o)=>{const i=new Map;for(let n=t;n<=o;n++)i.set(e[n],n);return i},vn=_t(class extends mt{constructor(e){if(super(e),2!==e.type)throw Error("repeat() can only be used in text expressions")}ct(e,t,o){let i;void 0===o?o=t:void 0!==t&&(i=t);const n=[],a=[];let r=0;for(const t of e)n[r]=i?i(t,r):r,a[r]=o(t,r),r++;return{values:a,keys:n}}render(e,t,o){return this.ct(e,t,o).values}update(e,[t,o,i]){var n;const a=(e=>e._$AH)(e),{values:r,keys:l}=this.ct(t,o,i);if(!Array.isArray(a))return this.ut=l,r;const s=null!==(n=this.ut)&&void 0!==n?n:this.ut=[],d=[];let c,u,h=0,p=a.length-1,v=0,_=r.length-1;for(;h<=p&&v<=_;)if(null===a[h])h++;else if(null===a[p])p--;else if(s[h]===l[v])d[v]=cn(a[h],r[v]),h++,v++;else if(s[p]===l[_])d[_]=cn(a[p],r[_]),p--,_--;else if(s[h]===l[_])d[_]=cn(a[h],r[_]),dn(e,d[_+1],a[h]),h++,_--;else if(s[p]===l[v])d[v]=cn(a[p],r[v]),dn(e,a[h],a[p]),p--,v++;else if(void 0===c&&(c=pn(l,v,_),u=pn(s,h,p)),c.has(s[h]))if(c.has(s[p])){const t=u.get(l[v]),o=void 0!==t?a[t]:null;if(null===o){const t=dn(e,a[h]);cn(t,r[v]),d[v]=t}else d[v]=cn(o,r[v]),dn(e,a[h],o),a[t]=null;v++}else hn(a[p]),p--;else hn(a[h]),h++;for(;v<=_;){const t=dn(e,d[_+1]);cn(t,r[v]),d[v++]=t}for(;h<=p;){const e=a[h++];null!==e&&hn(e)}return this.ut=l,((e,t=un)=>{e._$AH=t})(e,d),F}});let _n;const mn=(e,t,o,i)=>{i=i||{},o=null==o?{}:o;const n=new Event(t,{bubbles:void 0===i.bubbles||i.bubbles,cancelable:Boolean(i.cancelable),composed:void 0===i.composed||i.composed});return n.detail=o,e.dispatchEvent(n),n},fn=r`#sortable a:nth-of-type(2n) paper-icon-item{animation-name:keyframes1;animation-iteration-count:infinite;transform-origin:50% 10%;animation-delay:-.75s;animation-duration:.25s}#sortable a:nth-of-type(2n-1) paper-icon-item{animation-name:keyframes2;animation-iteration-count:infinite;animation-direction:alternate;transform-origin:30% 5%;animation-delay:-.5s;animation-duration:.33s}#sortable a{height:48px;display:flex}#sortable{outline:0;display:block!important}.hidden-panel{display:flex!important}.sortable-fallback{display:none}.sortable-ghost{opacity:.4}.sortable-fallback{opacity:0}@keyframes keyframes1{0%{transform:rotate(-1deg);animation-timing-function:ease-in}50%{transform:rotate(1.5deg);animation-timing-function:ease-out}}@keyframes keyframes2{0%{transform:rotate(1deg);animation-timing-function:ease-in}50%{transform:rotate(-1.5deg);animation-timing-function:ease-out}}.hide-panel,.show-panel{display:none;position:absolute;top:0;right:4px;--mdc-icon-button-size:40px}:host([rtl]) .show-panel{right:initial;left:4px}.hide-panel{top:4px;right:8px}:host([rtl]) .hide-panel{right:initial;left:8px}:host([expanded]) .hide-panel{display:block}:host([expanded]) .show-panel{display:inline-flex}paper-icon-item.hidden-panel,paper-icon-item.hidden-panel ha-icon[slot=item-icon],paper-icon-item.hidden-panel span{color:var(--secondary-text-color);cursor:pointer}`,yn=async()=>{var e,t,o,i;customElements.get("ha-form")||null===(e=customElements.get("hui-button-card"))||void 0===e||e.getConfigElement(),customElements.get("ha-entity-picker")||null===(t=customElements.get("hui-entities-card"))||void 0===t||t.getConfigElement(),customElements.get("ha-form")||await(null===(i=(o=window).loadCardHelpers)||void 0===i?void 0:i.call(o))};let gn=class extends se{constructor(){super(...arguments),this._indexBeingEdited=-1,this._entityKeys=new WeakMap,this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||Uo(`editor.${null==e?void 0:e.name}`)}connectedCallback(){super.connectedCallback(),yn()}disconnectedCallback(){super.disconnectedCallback(),this._destroySortable()}_editRowElement(e){this._indexBeingEdited=e}_getKey(e){return this._entityKeys.has(e)||this._entityKeys.set(e,Math.random().toString()),this._entityKeys.get(e)}render(){return this.entities&&this.hass?-1!==this._indexBeingEdited?H`<div class="individual-header"><h4>${this._indexBeingEdited+1} / ${this.entities.length} ${Uo("editor.individual")}</h4><ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.clear")}" .path="${di}" class="remove-icon" @click="${()=>this._indexBeingEdited=-1}"></ha-icon-button></div><ha-form .hass="${this.hass}" .data="${this.entities[this._indexBeingEdited]}" .schema="${ti}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._configChanged}"></ha-form>`:H`<div class="entities">${vn(this.entities,(e=>this._getKey(e)),((e,t)=>H`<div class="entity"><div class="handle"><ha-svg-icon .path="${"M7,19V17H9V19H7M11,19V17H13V19H11M15,19V17H17V19H15M7,15V13H9V15H7M11,15V13H13V15H11M15,15V13H17V15H15M7,11V9H9V11H7M11,11V9H13V11H11M15,11V9H17V11H15M7,7V5H9V7H7M11,7V5H13V7H11M15,7V5H17V7H15Z"}"></ha-svg-icon></div>${e.type?H`<div class="special-row"><div><span>${this.hass.localize(`ui.panel.lovelace.editor.card.entities.entity_row.${e.type}`)} </span><span class="secondary">${this.hass.localize("ui.panel.lovelace.editor.card.entities.edit_special_row")}</span></div></div>`:H`<ha-entity-picker allow-custom-entity hideClearIcon .hass="${this.hass}" .value="${e.entity}" .index="${t}" @value-changed="${this._valueChanged}"></ha-entity-picker>`}<ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.clear")}" .path="${di}" class="remove-icon" .index="${t}" @click="${this._removeRow}"></ha-icon-button><ha-icon-button .label="${this.hass.localize("ui.components.entity.entity-picker.edit")}" .path="${"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"}" class="edit-icon" .index="${t}" @click="${()=>this._editRowElement(t)}"></ha-icon-button></div>`))}</div>${this.entities.length>=4?U:H`<ha-entity-picker class="add-entity" .hass="${this.hass}" @value-changed="${this._addEntity}"></ha-entity-picker>`}`:H`<p>No entities configured.</p>`}_configChanged(e){const t=e.detail.value||"";if(!this.config||!this.hass)return;const o=this.config.entities.individual;if(!o)return;o[this._indexBeingEdited]=t;const i=Object.assign(Object.assign({},this.config),{entities:Object.assign(Object.assign({},this.config.entities),{individual:o})});mn(this,"config-changed",{config:i})}firstUpdated(){this._createSortable()}async _createSortable(){const e=await(async()=>(_n||(_n=(await Promise.resolve().then((function(){return Mr}))).default),_n))();this._sortable=new e(this.shadowRoot.querySelector(".entities"),{animation:150,fallbackClass:"sortable-fallback",handle:".handle",onChoose:e=>{e.item.placeholder=document.createComment("sort-placeholder"),e.item.after(e.item.placeholder)},onEnd:e=>{e.item.placeholder&&(e.item.placeholder.replaceWith(e.item),delete e.item.placeholder),this._rowMoved(e)}})}_destroySortable(){var e;null===(e=this._sortable)||void 0===e||e.destroy(),this._sortable=void 0}async _addEntity(e){const t=e.detail.value;if(""===t)return;const o=this.entities.concat({entity:t});e.target.value="",mn(this,"entities-changed",{entities:o})}_rowMoved(e){if(e.oldIndex===e.newIndex)return;const t=this.entities.concat();t.splice(e.newIndex,0,t.splice(e.oldIndex,1)[0]),mn(this,"entities-changed",{entities:t})}_removeRow(e){const t=e.currentTarget.index,o=this.entities.concat();o.splice(t,1),mn(this,"entities-changed",{entities:o})}_valueChanged(e){const t=e.detail.value,o=e.target.index,i=this.entities.concat();""===t||void 0===t?i.splice(o,1):i[o]=Object.assign(Object.assign({},i[o]),{entity:t}),mn(this,"entities-changed",{entities:i})}_editRow(e){const t=e.currentTarget.index;mn(this,"edit-detail-element",{subElementConfig:{index:t,type:"row",elementConfig:this.entities[t]}})}static get styles(){return[fn,r`ha-entity-picker{margin-top:8px}.individual-header{display:flex;justify-content:space-between;align-items:center;margin-inline:.2rem;margin-bottom:1rem}.add-entity{display:block;margin-left:31px;margin-right:71px;margin-inline-start:31px;margin-inline-end:71px;direction:var(--direction)}.entity{display:flex;align-items:center}.entity .handle{padding-right:8px;cursor:move;padding-inline-end:8px;padding-inline-start:initial;direction:var(--direction)}.entity .handle>*{pointer-events:none}.entity ha-entity-picker{flex-grow:1}.special-row{height:60px;font-size:16px;display:flex;align-items:center;justify-content:space-between;flex-grow:1}.special-row div{display:flex;flex-direction:column}.edit-icon,.remove-icon{--mdc-icon-button-size:36px;color:var(--secondary-text-color)}.secondary{font-size:12px;color:var(--secondary-text-color)}`]}};e([pe({attribute:!1})],gn.prototype,"hass",void 0),e([pe({attribute:!1})],gn.prototype,"config",void 0),e([pe({attribute:!1})],gn.prototype,"entities",void 0),e([pe()],gn.prototype,"label",void 0),e([ve()],gn.prototype,"_indexBeingEdited",void 0),gn=e([ce("individual-row-editor")],gn);let bn=class extends se{constructor(){super(...arguments),this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||Uo(`editor.${null==e?void 0:e.name}`)}render(){return this.config&&this.hass?(this._configEntities=this.config.entities.individual,this._subElementEditorConfig?H`<ha-form .hass="${this.hass}" @value-changed="${this._valueChanged}" .data="${this.config}" .schema="${hi(this.hass)}" .computeLabel="${this._computeLabelCallback}"></ha-form>`:H`<individual-row-editor .hass="${this.hass}" .config="${this.config}" .entities="${this._configEntities||[]}" @open-sub-element-editor="${this._editDetailElement}" @entities-changed="${this._entitiesChanged}" style="width:100%"></individual-row-editor>`):H`<div>no config</div>`}_valueChanged(e){let t=e.detail.value||"";this.config&&this.hass&&Ee(this,"config-changed",{config:t})}_entitiesChanged(e){let t=this.config;t=Object.assign(Object.assign({},t),{entities:Object.assign(Object.assign({},t.entities),{individual:e.detail.entities})}),this._configEntities=t.entities.individual.map((e=>"string"==typeof e?{entity:e}:e)),Ee(this,"config-changed",{config:t})}_editDetailElement(e){this._subElementEditorConfig=e.detail.subElementConfig}static get styles(){return r``}};e([Qi({attribute:!1})],bn.prototype,"config",void 0),e([en()],bn.prototype,"_subElementEditorConfig",void 0),e([en()],bn.prototype,"_configEntities",void 0),bn=e([qi("individual-devices-editor")],bn);let wn=class extends se{constructor(){super(...arguments),this.outlined=!1,this.leftChevron=!1,this.icon="mdi:format-list-bulleted-type"}render(){return H`<div class="link-subpage" @click="${this._openSubElementPage}" @keydown="${this._openSubElementPage}" @focus="${this._focusChanged}" @blur="${this._focusChanged}" role="button"><ha-icon icon="${this.icon}" class="summary-icon"></ha-icon><slot name="header"><div class="header">${this.header}<slot class="secondary" name="secondary">${this.secondary}</slot></div></slot><ha-svg-icon .path="${"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"}" class="summary-icon-right"></ha-svg-icon></div>`}_focusChanged(e){this.shadowRoot.querySelector(".top").classList.toggle("focused","focus"===e.type)}_openSubElementPage(){Ee(this,"open-sub-element-editor",{open:!0})}static get styles(){return r`:host{display:block}:host([outlined]){box-shadow:none;border-width:1px;border-style:solid;border-color:var(--ha-card-border-color,var(--divider-color,#e0e0e0));border-radius:var(--ha-card-border-radius,12px)}:host([leftchevron]) .summary-icon{margin-left:0;margin-right:8px}.link-subpage{width:100%;display:flex;gap:1rem;padding:var(--expansion-panel-summary-padding,0 8px);min-height:48px;align-items:center;cursor:pointer;overflow:hidden;font-weight:500;outline:0}.summary-icon{transition:transform 150ms cubic-bezier(.4,0,.2,1);direction:var(--direction);color:var(--secondary-text-color)}.header,::slotted([slot=header]){flex:1}.container{padding:var(--expansion-panel-content-padding,0 8px);overflow:hidden;transition:height .3s cubic-bezier(.4,0,.2,1);height:0}.container.expanded{height:auto}.secondary{display:block;color:var(--secondary-text-color);font-size:12px}`}};var xn;e([Qi({type:String})],wn.prototype,"path",void 0),e([Qi({type:Boolean,reflect:!0})],wn.prototype,"outlined",void 0),e([Qi({type:Boolean,reflect:!0})],wn.prototype,"leftChevron",void 0),e([Qi()],wn.prototype,"header",void 0),e([Qi({type:String})],wn.prototype,"icon",void 0),e([Qi()],wn.prototype,"secondary",void 0),e([(xn=".container",(e,t)=>{const o={get(){return this.renderRoot.querySelector(xn)},enumerable:!0,configurable:!0};return void 0!==t?((e,t,o)=>{Object.defineProperty(t,o,e)})(o,e,t):((e,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:e}))(o,e)})],wn.prototype,"_container",void 0),wn=e([qi("link-subpage")],wn);let kn=class extends se{render(){return H`<div class="header"><div class="back-title"><ha-icon-button .label="${"Go Back"}" .path="${"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"}" @click="${this._goBack}"></ha-icon-button><span>${Uo(`editor.${this.page}`)}</span></div></div>`}_goBack(){Ee(this,"go-back")}static get styles(){return r`.header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.back-title{display:flex;align-items:center;font-size:18px}`}};e([Qi({attribute:!1})],kn.prototype,"config",void 0),e([Qi()],kn.prototype,"page",void 0),kn=e([qi("subpage-header")],kn);const $n=[{page:"grid",icon:"mdi:transmission-tower",schema:qo},{page:"solar",icon:"mdi:solar-power",schema:ei},{page:"battery",icon:"mdi:battery-high",schema:Qo},{page:"fossil_fuel_percentage",icon:"mdi:leaf",schema:oi},{page:"home",icon:"mdi:home",schema:ii},{page:"individual",icon:"mdi:dots-horizontal-circle-outline"},{page:"advanced",icon:"mdi:cog",schema:pi}];let Sn=class extends se{constructor(){super(...arguments),this._configEntities=[],this._currentConfigPage=null,this._computeLabelCallback=e=>this.hass.localize(`ui.panel.lovelace.editor.card.generic.${null==e?void 0:e.name}`)||Uo(`editor.${null==e?void 0:e.name}`)}async setConfig(e){It(e,ci),this._config=e}connectedCallback(){super.connectedCallback(),yn()}_editDetailElement(e){this._currentConfigPage=e}_goBack(){this._currentConfigPage=null}render(){var e,t,o,i,n,a,r,l,s;if(!this.hass||!this._config)return U;const d=Object.assign(Object.assign({},this._config),{display_zero_lines:{mode:null!==(t=null===(e=this._config.display_zero_lines)||void 0===e?void 0:e.mode)&&void 0!==t?t:we.displayZeroLines.mode,transparency:null!==(i=null===(o=this._config.display_zero_lines)||void 0===o?void 0:o.transparency)&&void 0!==i?i:we.displayZeroLines.transparency,grey_color:null!==(a=null===(n=this._config.display_zero_lines)||void 0===n?void 0:n.grey_color)&&void 0!==a?a:we.displayZeroLines.grey_color}});if(null!==this._currentConfigPage){if("individual"===this._currentConfigPage)return H`<subpage-header @go-back="${this._goBack}" page="${this._currentConfigPage}"></subpage-header><individual-devices-editor .hass="${this.hass}" .config="${this._config}" @config-changed="${this._valueChanged}"></individual-devices-editor>`;const e=this._currentConfigPage,t="advanced"===e?pi(Uo,null!==(l=null===(r=this._config.display_zero_lines)||void 0===r?void 0:r.mode)&&void 0!==l?l:we.displayZeroLines.mode):null===(s=$n.find((t=>t.page===e)))||void 0===s?void 0:s.schema,o="advanced"===e?d:d.entities[e];return H`<subpage-header @go-back="${this._goBack}" page="${this._currentConfigPage}"></subpage-header><ha-form .hass="${this.hass}" .data="${o}" .schema="${t}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>`}const c=(e,t="mdi:dots-horizontal-circle-outline")=>{if(null===e)return H``;const o=(()=>{var o,i;return"individual"===e||"advanced"===e?t:(null===(i=null===(o=null==this?void 0:this._config)||void 0===o?void 0:o.entities[e])||void 0===i?void 0:i.icon)||t})();return H`<link-subpage path="${e}" header="${Uo(`editor.${e}`)}" @open-sub-element-editor="${()=>this._editDetailElement(e)}" icon="${o}"></link-subpage>`};return H`<div class="card-config"><ha-form .hass="${this.hass}" .data="${d}" .schema="${ui}" .computeLabel="${this._computeLabelCallback}" @value-changed="${this._valueChanged}"></ha-form>${$n.map((e=>c(e.page,e.icon)))}</div>`}_valueChanged(e){let t=e.detail.value||"";this._config&&this.hass&&(null!==this._currentConfigPage&&"advanced"!==this._currentConfigPage&&"individual"!==this._currentConfigPage&&(t=Object.assign(Object.assign({},this._config),{entities:Object.assign(Object.assign({},this._config.entities),{[this._currentConfigPage]:t})})),Ee(this,"config-changed",{config:t}))}static get styles(){return r`ha-form{width:100%}ha-icon-button{align-self:center}.entities-section *{background-color:red}.card-config{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:10px}.config-header{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%}.config-header.sub-header{margin-top:24px}ha-icon{padding-bottom:2px;position:relative;top:-4px;right:1px}`}};e([pe({attribute:!1})],Sn.prototype,"hass",void 0),e([ve()],Sn.prototype,"_config",void 0),e([ve()],Sn.prototype,"_configEntities",void 0),e([ve()],Sn.prototype,"_currentConfigPage",void 0),Sn=e([ce("power-flow-card-plus-editor")],Sn);var Cn=Object.freeze({__proto__:null,get PowerFlowCardPlusEditor(){return Sn}});function En(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,i)}return o}function An(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?En(Object(o),!0).forEach((function(t){Pn(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):En(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function Mn(e){return Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(e)}function Pn(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function Dn(){return Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(e[i]=o[i])}return e},Dn.apply(this,arguments)}function zn(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var Tn=zn(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),On=zn(/Edge/i),Nn=zn(/firefox/i),jn=zn(/safari/i)&&!zn(/chrome/i)&&!zn(/android/i),Bn=zn(/iP(ad|od|hone)/i),In=zn(/chrome/i)&&zn(/android/i),Ln={capture:!1,passive:!1};function Hn(e,t,o){e.addEventListener(t,o,!Tn&&Ln)}function Rn(e,t,o){e.removeEventListener(t,o,!Tn&&Ln)}function Fn(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function Un(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function Gn(e,t,o,i){if(e){o=o||document;do{if(null!=t&&(">"===t[0]?e.parentNode===o&&Fn(e,t):Fn(e,t))||i&&e===o)return e;if(e===o)break}while(e=Un(e))}return null}var Vn,Wn=/\s+/g;function Zn(e,t,o){if(e&&t)if(e.classList)e.classList[o?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(Wn," ").replace(" "+t+" "," ");e.className=(i+(o?" "+t:"")).replace(Wn," ")}}function Kn(e,t,o){var i=e&&e.style;if(i){if(void 0===o)return document.defaultView&&document.defaultView.getComputedStyle?o=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(o=e.currentStyle),void 0===t?o:o[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=o+("string"==typeof o?"":"px")}}function Yn(e,t){var o="";if("string"==typeof e)o=e;else do{var i=Kn(e,"transform");i&&"none"!==i&&(o=i+" "+o)}while(!t&&(e=e.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(o)}function Xn(e,t,o){if(e){var i=e.getElementsByTagName(t),n=0,a=i.length;if(o)for(;n<a;n++)o(i[n],n);return i}return[]}function qn(){return document.scrollingElement||document.documentElement}function Jn(e,t,o,i,n){if(e.getBoundingClientRect||e===window){var a,r,l,s,d,c,u;if(e!==window&&e.parentNode&&e!==qn()?(r=(a=e.getBoundingClientRect()).top,l=a.left,s=a.bottom,d=a.right,c=a.height,u=a.width):(r=0,l=0,s=window.innerHeight,d=window.innerWidth,c=window.innerHeight,u=window.innerWidth),(t||o)&&e!==window&&(n=n||e.parentNode,!Tn))do{if(n&&n.getBoundingClientRect&&("none"!==Kn(n,"transform")||o&&"static"!==Kn(n,"position"))){var h=n.getBoundingClientRect();r-=h.top+parseInt(Kn(n,"border-top-width")),l-=h.left+parseInt(Kn(n,"border-left-width")),s=r+a.height,d=l+a.width;break}}while(n=n.parentNode);if(i&&e!==window){var p=Yn(n||e),v=p&&p.a,_=p&&p.d;p&&(s=(r/=_)+(c/=_),d=(l/=v)+(u/=v))}return{top:r,left:l,bottom:s,right:d,width:u,height:c}}}function Qn(e,t,o){for(var i=na(e,!0),n=Jn(e)[t];i;){var a=Jn(i)[o];if(!("top"===o||"left"===o?n>=a:n<=a))return i;if(i===qn())break;i=na(i,!1)}return!1}function ea(e,t,o,i){for(var n=0,a=0,r=e.children;a<r.length;){if("none"!==r[a].style.display&&r[a]!==lr.ghost&&(i||r[a]!==lr.dragged)&&Gn(r[a],o.draggable,e,!1)){if(n===t)return r[a];n++}a++}return null}function ta(e,t){for(var o=e.lastElementChild;o&&(o===lr.ghost||"none"===Kn(o,"display")||t&&!Fn(o,t));)o=o.previousElementSibling;return o||null}function oa(e,t){var o=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===lr.clone||t&&!Fn(e,t)||o++;return o}function ia(e){var t=0,o=0,i=qn();if(e)do{var n=Yn(e),a=n.a,r=n.d;t+=e.scrollLeft*a,o+=e.scrollTop*r}while(e!==i&&(e=e.parentNode));return[t,o]}function na(e,t){if(!e||!e.getBoundingClientRect)return qn();var o=e,i=!1;do{if(o.clientWidth<o.scrollWidth||o.clientHeight<o.scrollHeight){var n=Kn(o);if(o.clientWidth<o.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||o.clientHeight<o.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!o.getBoundingClientRect||o===document.body)return qn();if(i||t)return o;i=!0}}}while(o=o.parentNode);return qn()}function aa(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ra(e,t){return function(){if(!Vn){var o=arguments;1===o.length?e.call(this,o[0]):e.apply(this,o),Vn=setTimeout((function(){Vn=void 0}),t)}}}function la(e,t,o){e.scrollLeft+=t,e.scrollTop+=o}function sa(e){var t=window.Polymer,o=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):o?o(e).clone(!0)[0]:e.cloneNode(!0)}function da(e,t,o){var i={};return Array.from(e.children).forEach((function(n){var a,r,l,s;if(Gn(n,t.draggable,e,!1)&&!n.animated&&n!==o){var d=Jn(n);i.left=Math.min(null!==(a=i.left)&&void 0!==a?a:1/0,d.left),i.top=Math.min(null!==(r=i.top)&&void 0!==r?r:1/0,d.top),i.right=Math.max(null!==(l=i.right)&&void 0!==l?l:-1/0,d.right),i.bottom=Math.max(null!==(s=i.bottom)&&void 0!==s?s:-1/0,d.bottom)}})),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var ca="Sortable"+(new Date).getTime();var ua=[],ha={initializeByDefault:!0},pa={mount:function(e){for(var t in ha)ha.hasOwnProperty(t)&&!(t in e)&&(e[t]=ha[t]);ua.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),ua.push(e)},pluginEvent:function(e,t,o){var i=this;this.eventCanceled=!1,o.cancel=function(){i.eventCanceled=!0};var n=e+"Global";ua.forEach((function(i){t[i.pluginName]&&(t[i.pluginName][n]&&t[i.pluginName][n](An({sortable:t},o)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](An({sortable:t},o)))}))},initializePlugins:function(e,t,o,i){for(var n in ua.forEach((function(i){var n=i.pluginName;if(e.options[n]||i.initializeByDefault){var a=new i(e,t,e.options);a.sortable=e,a.options=e.options,e[n]=a,Dn(o,a.defaults)}})),e.options)if(e.options.hasOwnProperty(n)){var a=this.modifyOption(e,n,e.options[n]);void 0!==a&&(e.options[n]=a)}},getEventProperties:function(e,t){var o={};return ua.forEach((function(i){"function"==typeof i.eventProperties&&Dn(o,i.eventProperties.call(t[i.pluginName],e))})),o},modifyOption:function(e,t,o){var i;return ua.forEach((function(n){e[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[t]&&(i=n.optionListeners[t].call(e[n.pluginName],o))})),i}},va=["evt"],_a=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.evt,n=function(e,t){if(null==e)return{};var o,i,n=function(e,t){if(null==e)return{};var o,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)o=a[i],t.indexOf(o)>=0||(n[o]=e[o]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)o=a[i],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}(o,va);pa.pluginEvent.bind(lr)(e,t,An({dragEl:fa,parentEl:ya,ghostEl:ga,rootEl:ba,nextEl:wa,lastDownEl:xa,cloneEl:ka,cloneHidden:$a,dragStarted:Ba,putSortable:Pa,activeSortable:lr.active,originalEvent:i,oldIndex:Sa,oldDraggableIndex:Ea,newIndex:Ca,newDraggableIndex:Aa,hideGhostForTarget:ir,unhideGhostForTarget:nr,cloneNowHidden:function(){$a=!0},cloneNowShown:function(){$a=!1},dispatchSortableEvent:function(e){ma({sortable:t,name:e,originalEvent:i})}},n))};function ma(e){!function(e){var t=e.sortable,o=e.rootEl,i=e.name,n=e.targetEl,a=e.cloneEl,r=e.toEl,l=e.fromEl,s=e.oldIndex,d=e.newIndex,c=e.oldDraggableIndex,u=e.newDraggableIndex,h=e.originalEvent,p=e.putSortable,v=e.extraEventProperties;if(t=t||o&&o[ca]){var _,m=t.options,f="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||Tn||On?(_=document.createEvent("Event")).initEvent(i,!0,!0):_=new CustomEvent(i,{bubbles:!0,cancelable:!0}),_.to=r||o,_.from=l||o,_.item=n||o,_.clone=a,_.oldIndex=s,_.newIndex=d,_.oldDraggableIndex=c,_.newDraggableIndex=u,_.originalEvent=h,_.pullMode=p?p.lastPutMode:void 0;var y=An(An({},v),pa.getEventProperties(i,t));for(var g in y)_[g]=y[g];o&&o.dispatchEvent(_),m[f]&&m[f].call(t,_)}}(An({putSortable:Pa,cloneEl:ka,targetEl:fa,rootEl:ba,oldIndex:Sa,oldDraggableIndex:Ea,newIndex:Ca,newDraggableIndex:Aa},e))}var fa,ya,ga,ba,wa,xa,ka,$a,Sa,Ca,Ea,Aa,Ma,Pa,Da,za,Ta,Oa,Na,ja,Ba,Ia,La,Ha,Ra,Fa=!1,Ua=!1,Ga=[],Va=!1,Wa=!1,Za=[],Ka=!1,Ya=[],Xa="undefined"!=typeof document,qa=Bn,Ja=On||Tn?"cssFloat":"float",Qa=Xa&&!In&&!Bn&&"draggable"in document.createElement("div"),er=function(){if(Xa){if(Tn)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),tr=function(e,t){var o=Kn(e),i=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),n=ea(e,0,t),a=ea(e,1,t),r=n&&Kn(n),l=a&&Kn(a),s=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+Jn(n).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Jn(a).width;if("flex"===o.display)return"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal";if("grid"===o.display)return o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&r.float&&"none"!==r.float){var c="left"===r.float?"left":"right";return!a||"both"!==l.clear&&l.clear!==c?"horizontal":"vertical"}return n&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||s>=i&&"none"===o[Ja]||a&&"none"===o[Ja]&&s+d>i)?"vertical":"horizontal"},or=function(e){function t(e,o){return function(i,n,a,r){var l=i.options.group.name&&n.options.group.name&&i.options.group.name===n.options.group.name;if(null==e&&(o||l))return!0;if(null==e||!1===e)return!1;if(o&&"clone"===e)return e;if("function"==typeof e)return t(e(i,n,a,r),o)(i,n,a,r);var s=(o?i:n).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var o={},i=e.group;i&&"object"==Mn(i)||(i={name:i}),o.name=i.name,o.checkPull=t(i.pull,!0),o.checkPut=t(i.put),o.revertClone=i.revertClone,e.group=o},ir=function(){!er&&ga&&Kn(ga,"display","none")},nr=function(){!er&&ga&&Kn(ga,"display","")};Xa&&!In&&document.addEventListener("click",(function(e){if(Ua)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Ua=!1,!1}),!0);var ar=function(e){if(fa){var t=function(e,t){var o;return Ga.some((function(i){var n=i[ca].options.emptyInsertThreshold;if(n&&!ta(i)){var a=Jn(i),r=e>=a.left-n&&e<=a.right+n,l=t>=a.top-n&&t<=a.bottom+n;return r&&l?o=i:void 0}})),o}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(t){var o={};for(var i in e)e.hasOwnProperty(i)&&(o[i]=e[i]);o.target=o.rootEl=t,o.preventDefault=void 0,o.stopPropagation=void 0,t[ca]._onDragOver(o)}}},rr=function(e){fa&&fa.parentNode[ca]._isOutsideThisEl(e.target)};function lr(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=Dn({},t),e[ca]=this;var o={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return tr(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==lr.supportPointer&&"PointerEvent"in window&&!jn,emptyInsertThreshold:5};for(var i in pa.initializePlugins(this,e,o),o)!(i in t)&&(t[i]=o[i]);for(var n in or(t),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!t.forceFallback&&Qa,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?Hn(e,"pointerdown",this._onTapStart):(Hn(e,"mousedown",this._onTapStart),Hn(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(Hn(e,"dragover",this),Hn(e,"dragenter",this)),Ga.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Dn(this,function(){var e,t=[];return{captureAnimationState:function(){t=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(e){if("none"!==Kn(e,"display")&&e!==lr.ghost){t.push({target:e,rect:Jn(e)});var o=An({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=Yn(e,!0);i&&(o.top-=i.f,o.left-=i.e)}e.fromRect=o}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var o in e)if(e.hasOwnProperty(o))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[o][i])return Number(o);return-1}(t,{target:e}),1)},animateAll:function(o){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof o&&o());var n=!1,a=0;t.forEach((function(e){var t=0,o=e.target,r=o.fromRect,l=Jn(o),s=o.prevFromRect,d=o.prevToRect,c=e.rect,u=Yn(o,!0);u&&(l.top-=u.f,l.left-=u.e),o.toRect=l,o.thisAnimationDuration&&aa(s,l)&&!aa(r,l)&&(c.top-l.top)/(c.left-l.left)==(r.top-l.top)/(r.left-l.left)&&(t=function(e,t,o,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-o.top,2)+Math.pow(t.left-o.left,2))*i.animation}(c,s,d,i.options)),aa(l,r)||(o.prevFromRect=r,o.prevToRect=l,t||(t=i.options.animation),i.animate(o,c,l,t)),t&&(n=!0,a=Math.max(a,t),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),t),o.thisAnimationDuration=t)})),clearTimeout(e),n?e=setTimeout((function(){"function"==typeof o&&o()}),a):"function"==typeof o&&o(),t=[]},animate:function(e,t,o,i){if(i){Kn(e,"transition",""),Kn(e,"transform","");var n=Yn(this.el),a=n&&n.a,r=n&&n.d,l=(t.left-o.left)/(a||1),s=(t.top-o.top)/(r||1);e.animatingX=!!l,e.animatingY=!!s,Kn(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),Kn(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Kn(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){Kn(e,"transition",""),Kn(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),i)}}}}())}function sr(e,t,o,i,n,a,r,l){var s,d,c=e[ca],u=c.options.onMove;return!window.CustomEvent||Tn||On?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=o,s.draggedRect=i,s.related=n||t,s.relatedRect=a||Jn(t),s.willInsertAfter=l,s.originalEvent=r,e.dispatchEvent(s),u&&(d=u.call(c,s,r)),d}function dr(e){e.draggable=!1}function cr(){Ka=!1}function ur(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,o=t.length,i=0;o--;)i+=t.charCodeAt(o);return i.toString(36)}function hr(e){return setTimeout(e,0)}function pr(e){return clearTimeout(e)}lr.prototype={constructor:lr,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(Ia=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,fa):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,o=this.el,i=this.options,n=i.preventOnFilter,a=e.type,r=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(r||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(function(e){Ya.length=0;for(var t=e.getElementsByTagName("input"),o=t.length;o--;){var i=t[o];i.checked&&Ya.push(i)}}(o),!fa&&!(/mousedown|pointerdown/.test(a)&&0!==e.button||i.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!jn||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=Gn(l,i.draggable,o,!1))&&l.animated||xa===l)){if(Sa=oa(l),Ea=oa(l,i.draggable),"function"==typeof d){if(d.call(this,e,l,this))return ma({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:o,fromEl:o}),_a("filter",t,{evt:e}),void(n&&e.cancelable&&e.preventDefault())}else if(d&&(d=d.split(",").some((function(i){if(i=Gn(s,i.trim(),o,!1))return ma({sortable:t,rootEl:i,name:"filter",targetEl:l,fromEl:o,toEl:o}),_a("filter",t,{evt:e}),!0}))))return void(n&&e.cancelable&&e.preventDefault());i.handle&&!Gn(s,i.handle,o,!1)||this._prepareDragStart(e,r,l)}}},_prepareDragStart:function(e,t,o){var i,n=this,a=n.el,r=n.options,l=a.ownerDocument;if(o&&!fa&&o.parentNode===a){var s=Jn(o);if(ba=a,ya=(fa=o).parentNode,wa=fa.nextSibling,xa=o,Ma=r.group,lr.dragged=fa,Da={target:fa,clientX:(t||e).clientX,clientY:(t||e).clientY},Na=Da.clientX-s.left,ja=Da.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,fa.style["will-change"]="all",i=function(){_a("delayEnded",n,{evt:e}),lr.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!Nn&&n.nativeDraggable&&(fa.draggable=!0),n._triggerDragStart(e,t),ma({sortable:n,name:"choose",originalEvent:e}),Zn(fa,r.chosenClass,!0))},r.ignore.split(",").forEach((function(e){Xn(fa,e.trim(),dr)})),Hn(l,"dragover",ar),Hn(l,"mousemove",ar),Hn(l,"touchmove",ar),Hn(l,"mouseup",n._onDrop),Hn(l,"touchend",n._onDrop),Hn(l,"touchcancel",n._onDrop),Nn&&this.nativeDraggable&&(this.options.touchStartThreshold=4,fa.draggable=!0),_a("delayStart",this,{evt:e}),!r.delay||r.delayOnTouchOnly&&!t||this.nativeDraggable&&(On||Tn))i();else{if(lr.eventCanceled)return void this._onDrop();Hn(l,"mouseup",n._disableDelayedDrag),Hn(l,"touchend",n._disableDelayedDrag),Hn(l,"touchcancel",n._disableDelayedDrag),Hn(l,"mousemove",n._delayedDragTouchMoveHandler),Hn(l,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&Hn(l,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(i,r.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){fa&&dr(fa),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Rn(e,"mouseup",this._disableDelayedDrag),Rn(e,"touchend",this._disableDelayedDrag),Rn(e,"touchcancel",this._disableDelayedDrag),Rn(e,"mousemove",this._delayedDragTouchMoveHandler),Rn(e,"touchmove",this._delayedDragTouchMoveHandler),Rn(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?Hn(document,"pointermove",this._onTouchMove):Hn(document,t?"touchmove":"mousemove",this._onTouchMove):(Hn(fa,"dragend",this),Hn(ba,"dragstart",this._onDragStart));try{document.selection?hr((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Fa=!1,ba&&fa){_a("dragStarted",this,{evt:t}),this.nativeDraggable&&Hn(document,"dragover",rr);var o=this.options;!e&&Zn(fa,o.dragClass,!1),Zn(fa,o.ghostClass,!0),lr.active=this,e&&this._appendGhost(),ma({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(za){this._lastX=za.clientX,this._lastY=za.clientY,ir();for(var e=document.elementFromPoint(za.clientX,za.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(za.clientX,za.clientY))!==t;)t=e;if(fa.parentNode[ca]._isOutsideThisEl(e),t)do{if(t[ca]&&t[ca]._onDragOver({clientX:za.clientX,clientY:za.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break;e=t}while(t=t.parentNode);nr()}},_onTouchMove:function(e){if(Da){var t=this.options,o=t.fallbackTolerance,i=t.fallbackOffset,n=e.touches?e.touches[0]:e,a=ga&&Yn(ga,!0),r=ga&&a&&a.a,l=ga&&a&&a.d,s=qa&&Ra&&ia(Ra),d=(n.clientX-Da.clientX+i.x)/(r||1)+(s?s[0]-Za[0]:0)/(r||1),c=(n.clientY-Da.clientY+i.y)/(l||1)+(s?s[1]-Za[1]:0)/(l||1);if(!lr.active&&!Fa){if(o&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(ga){a?(a.e+=d-(Ta||0),a.f+=c-(Oa||0)):a={a:1,b:0,c:0,d:1,e:d,f:c};var u="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Kn(ga,"webkitTransform",u),Kn(ga,"mozTransform",u),Kn(ga,"msTransform",u),Kn(ga,"transform",u),Ta=d,Oa=c,za=n}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ga){var e=this.options.fallbackOnBody?document.body:ba,t=Jn(fa,!0,qa,!0,e),o=this.options;if(qa){for(Ra=e;"static"===Kn(Ra,"position")&&"none"===Kn(Ra,"transform")&&Ra!==document;)Ra=Ra.parentNode;Ra!==document.body&&Ra!==document.documentElement?(Ra===document&&(Ra=qn()),t.top+=Ra.scrollTop,t.left+=Ra.scrollLeft):Ra=qn(),Za=ia(Ra)}Zn(ga=fa.cloneNode(!0),o.ghostClass,!1),Zn(ga,o.fallbackClass,!0),Zn(ga,o.dragClass,!0),Kn(ga,"transition",""),Kn(ga,"transform",""),Kn(ga,"box-sizing","border-box"),Kn(ga,"margin",0),Kn(ga,"top",t.top),Kn(ga,"left",t.left),Kn(ga,"width",t.width),Kn(ga,"height",t.height),Kn(ga,"opacity","0.8"),Kn(ga,"position",qa?"absolute":"fixed"),Kn(ga,"zIndex","100000"),Kn(ga,"pointerEvents","none"),lr.ghost=ga,e.appendChild(ga),Kn(ga,"transform-origin",Na/parseInt(ga.style.width)*100+"% "+ja/parseInt(ga.style.height)*100+"%")}},_onDragStart:function(e,t){var o=this,i=e.dataTransfer,n=o.options;_a("dragStart",this,{evt:e}),lr.eventCanceled?this._onDrop():(_a("setupClone",this),lr.eventCanceled||((ka=sa(fa)).removeAttribute("id"),ka.draggable=!1,ka.style["will-change"]="",this._hideClone(),Zn(ka,this.options.chosenClass,!1),lr.clone=ka),o.cloneId=hr((function(){_a("clone",o),lr.eventCanceled||(o.options.removeCloneOnHide||ba.insertBefore(ka,fa),o._hideClone(),ma({sortable:o,name:"clone"}))})),!t&&Zn(fa,n.dragClass,!0),t?(Ua=!0,o._loopId=setInterval(o._emulateDragOver,50)):(Rn(document,"mouseup",o._onDrop),Rn(document,"touchend",o._onDrop),Rn(document,"touchcancel",o._onDrop),i&&(i.effectAllowed="move",n.setData&&n.setData.call(o,i,fa)),Hn(document,"drop",o),Kn(fa,"transform","translateZ(0)")),Fa=!0,o._dragStartId=hr(o._dragStarted.bind(o,t,e)),Hn(document,"selectstart",o),Ba=!0,jn&&Kn(document.body,"user-select","none"))},_onDragOver:function(e){var t,o,i,n,a=this.el,r=e.target,l=this.options,s=l.group,d=lr.active,c=Ma===s,u=l.sort,h=Pa||d,p=this,v=!1;if(!Ka){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),r=Gn(r,l.draggable,a,!0),M("dragOver"),lr.eventCanceled)return v;if(fa.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||p._ignoreWhileAnimating===r)return D(!1);if(Ua=!1,d&&!l.disabled&&(c?u||(i=ya!==ba):Pa===this||(this.lastPutMode=Ma.checkPull(this,d,fa,e))&&s.checkPut(this,d,fa,e))){if(n="vertical"===this._getDirection(e,r),t=Jn(fa),M("dragOverValid"),lr.eventCanceled)return v;if(i)return ya=ba,P(),this._hideClone(),M("revert"),lr.eventCanceled||(wa?ba.insertBefore(fa,wa):ba.appendChild(fa)),D(!0);var _=ta(a,l.draggable);if(!_||function(e,t,o){var i=Jn(ta(o.el,o.options.draggable)),n=da(o.el,o.options,ga);return t?e.clientX>n.right+10||e.clientY>i.bottom&&e.clientX>i.left:e.clientY>n.bottom+10||e.clientX>i.right&&e.clientY>i.top}(e,n,this)&&!_.animated){if(_===fa)return D(!1);if(_&&a===e.target&&(r=_),r&&(o=Jn(r)),!1!==sr(ba,a,fa,t,r,o,e,!!r))return P(),_&&_.nextSibling?a.insertBefore(fa,_.nextSibling):a.appendChild(fa),ya=a,z(),D(!0)}else if(_&&function(e,t,o){var i=Jn(ea(o.el,0,o.options,!0)),n=da(o.el,o.options,ga);return t?e.clientX<n.left-10||e.clientY<i.top&&e.clientX<i.right:e.clientY<n.top-10||e.clientY<i.bottom&&e.clientX<i.left}(e,n,this)){var m=ea(a,0,l,!0);if(m===fa)return D(!1);if(o=Jn(r=m),!1!==sr(ba,a,fa,t,r,o,e,!1))return P(),a.insertBefore(fa,m),ya=a,z(),D(!0)}else if(r.parentNode===a){o=Jn(r);var f,y,g,b=fa.parentNode!==a,w=!function(e,t,o){var i=o?e.left:e.top,n=o?e.right:e.bottom,a=o?e.width:e.height,r=o?t.left:t.top,l=o?t.right:t.bottom,s=o?t.width:t.height;return i===r||n===l||i+a/2===r+s/2}(fa.animated&&fa.toRect||t,r.animated&&r.toRect||o,n),x=n?"top":"left",k=Qn(r,"top","top")||Qn(fa,"top","top"),$=k?k.scrollTop:void 0;if(Ia!==r&&(y=o[x],Va=!1,Wa=!w&&l.invertSwap||b),f=function(e,t,o,i,n,a,r,l){var s=i?e.clientY:e.clientX,d=i?o.height:o.width,c=i?o.top:o.left,u=i?o.bottom:o.right,h=!1;if(!r)if(l&&Ha<d*n){if(!Va&&(1===La?s>c+d*a/2:s<u-d*a/2)&&(Va=!0),Va)h=!0;else if(1===La?s<c+Ha:s>u-Ha)return-La}else if(s>c+d*(1-n)/2&&s<u-d*(1-n)/2)return function(e){return oa(fa)<oa(e)?1:-1}(t);return(h=h||r)&&(s<c+d*a/2||s>u-d*a/2)?s>c+d/2?1:-1:0}(e,r,o,n,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Wa,Ia===r),0!==f){var S=oa(fa);do{S-=f,g=ya.children[S]}while(g&&("none"===Kn(g,"display")||g===ga))}if(0===f||g===r)return D(!1);Ia=r,La=f;var C=r.nextElementSibling,E=!1,A=sr(ba,a,fa,t,r,o,e,E=1===f);if(!1!==A)return 1!==A&&-1!==A||(E=1===A),Ka=!0,setTimeout(cr,30),P(),E&&!C?a.appendChild(fa):r.parentNode.insertBefore(fa,E?C:r),k&&la(k,0,$-k.scrollTop),ya=fa.parentNode,void 0===y||Wa||(Ha=Math.abs(y-Jn(r)[x])),z(),D(!0)}if(a.contains(fa))return D(!1)}return!1}function M(l,s){_a(l,p,An({evt:e,isOwner:c,axis:n?"vertical":"horizontal",revert:i,dragRect:t,targetRect:o,canSort:u,fromSortable:h,target:r,completed:D,onMove:function(o,i){return sr(ba,a,fa,t,o,Jn(o),e,i)},changed:z},s))}function P(){M("dragOverAnimationCapture"),p.captureAnimationState(),p!==h&&h.captureAnimationState()}function D(t){return M("dragOverCompleted",{insertion:t}),t&&(c?d._hideClone():d._showClone(p),p!==h&&(Zn(fa,Pa?Pa.options.ghostClass:d.options.ghostClass,!1),Zn(fa,l.ghostClass,!0)),Pa!==p&&p!==lr.active?Pa=p:p===lr.active&&Pa&&(Pa=null),h===p&&(p._ignoreWhileAnimating=r),p.animateAll((function(){M("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==h&&(h.animateAll(),h._ignoreWhileAnimating=null)),(r===fa&&!fa.animated||r===a&&!r.animated)&&(Ia=null),l.dragoverBubble||e.rootEl||r===document||(fa.parentNode[ca]._isOutsideThisEl(e.target),!t&&ar(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function z(){Ca=oa(fa),Aa=oa(fa,l.draggable),ma({sortable:p,name:"change",toEl:a,newIndex:Ca,newDraggableIndex:Aa,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Rn(document,"mousemove",this._onTouchMove),Rn(document,"touchmove",this._onTouchMove),Rn(document,"pointermove",this._onTouchMove),Rn(document,"dragover",ar),Rn(document,"mousemove",ar),Rn(document,"touchmove",ar)},_offUpEvents:function(){var e=this.el.ownerDocument;Rn(e,"mouseup",this._onDrop),Rn(e,"touchend",this._onDrop),Rn(e,"pointerup",this._onDrop),Rn(e,"touchcancel",this._onDrop),Rn(document,"selectstart",this)},_onDrop:function(e){var t=this.el,o=this.options;Ca=oa(fa),Aa=oa(fa,o.draggable),_a("drop",this,{evt:e}),ya=fa&&fa.parentNode,Ca=oa(fa),Aa=oa(fa,o.draggable),lr.eventCanceled||(Fa=!1,Wa=!1,Va=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),pr(this.cloneId),pr(this._dragStartId),this.nativeDraggable&&(Rn(document,"drop",this),Rn(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),jn&&Kn(document.body,"user-select",""),Kn(fa,"transform",""),e&&(Ba&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),ga&&ga.parentNode&&ga.parentNode.removeChild(ga),(ba===ya||Pa&&"clone"!==Pa.lastPutMode)&&ka&&ka.parentNode&&ka.parentNode.removeChild(ka),fa&&(this.nativeDraggable&&Rn(fa,"dragend",this),dr(fa),fa.style["will-change"]="",Ba&&!Fa&&Zn(fa,Pa?Pa.options.ghostClass:this.options.ghostClass,!1),Zn(fa,this.options.chosenClass,!1),ma({sortable:this,name:"unchoose",toEl:ya,newIndex:null,newDraggableIndex:null,originalEvent:e}),ba!==ya?(Ca>=0&&(ma({rootEl:ya,name:"add",toEl:ya,fromEl:ba,originalEvent:e}),ma({sortable:this,name:"remove",toEl:ya,originalEvent:e}),ma({rootEl:ya,name:"sort",toEl:ya,fromEl:ba,originalEvent:e}),ma({sortable:this,name:"sort",toEl:ya,originalEvent:e})),Pa&&Pa.save()):Ca!==Sa&&Ca>=0&&(ma({sortable:this,name:"update",toEl:ya,originalEvent:e}),ma({sortable:this,name:"sort",toEl:ya,originalEvent:e})),lr.active&&(null!=Ca&&-1!==Ca||(Ca=Sa,Aa=Ea),ma({sortable:this,name:"end",toEl:ya,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){_a("nulling",this),ba=fa=ya=ga=wa=ka=xa=$a=Da=za=Ba=Ca=Aa=Sa=Ea=Ia=La=Pa=Ma=lr.dragged=lr.ghost=lr.clone=lr.active=null,Ya.forEach((function(e){e.checked=!0})),Ya.length=Ta=Oa=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":fa&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],o=this.el.children,i=0,n=o.length,a=this.options;i<n;i++)Gn(e=o[i],a.draggable,this.el,!1)&&t.push(e.getAttribute(a.dataIdAttr)||ur(e));return t},sort:function(e,t){var o={},i=this.el;this.toArray().forEach((function(e,t){var n=i.children[t];Gn(n,this.options.draggable,i,!1)&&(o[e]=n)}),this),t&&this.captureAnimationState(),e.forEach((function(e){o[e]&&(i.removeChild(o[e]),i.appendChild(o[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Gn(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var o=this.options;if(void 0===t)return o[e];var i=pa.modifyOption(this,e,t);o[e]=void 0!==i?i:t,"group"===e&&or(o)},destroy:function(){_a("destroy",this);var e=this.el;e[ca]=null,Rn(e,"mousedown",this._onTapStart),Rn(e,"touchstart",this._onTapStart),Rn(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Rn(e,"dragover",this),Rn(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ga.splice(Ga.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!$a){if(_a("hideClone",this),lr.eventCanceled)return;Kn(ka,"display","none"),this.options.removeCloneOnHide&&ka.parentNode&&ka.parentNode.removeChild(ka),$a=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if($a){if(_a("showClone",this),lr.eventCanceled)return;fa.parentNode!=ba||this.options.group.revertClone?wa?ba.insertBefore(ka,wa):ba.appendChild(ka):ba.insertBefore(ka,fa),this.options.group.revertClone&&this.animate(fa,ka),Kn(ka,"display",""),$a=!1}}else this._hideClone()}},Xa&&Hn(document,"touchmove",(function(e){(lr.active||Fa)&&e.cancelable&&e.preventDefault()})),lr.utils={on:Hn,off:Rn,css:Kn,find:Xn,is:function(e,t){return!!Gn(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e},throttle:ra,closest:Gn,toggleClass:Zn,clone:sa,index:oa,nextTick:hr,cancelNextTick:pr,detectDirection:tr,getChild:ea},lr.get=function(e){return e[ca]},lr.mount=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(lr.utils=An(An({},lr.utils),e.utils)),pa.mount(e)}))},lr.create=function(e,t){return new lr(e,t)},lr.version="1.15.2";var vr,_r,mr,fr,yr,gr,br=[],wr=!1;function xr(){br.forEach((function(e){clearInterval(e.pid)})),br=[]}function kr(){clearInterval(gr)}var $r=ra((function(e,t,o,i){if(t.scroll){var n,a=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,d=qn(),c=!1;_r!==o&&(_r=o,xr(),vr=t.scroll,n=t.scrollFn,!0===vr&&(vr=na(o,!0)));var u=0,h=vr;do{var p=h,v=Jn(p),_=v.top,m=v.bottom,f=v.left,y=v.right,g=v.width,b=v.height,w=void 0,x=void 0,k=p.scrollWidth,$=p.scrollHeight,S=Kn(p),C=p.scrollLeft,E=p.scrollTop;p===d?(w=g<k&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),x=b<$&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(w=g<k&&("auto"===S.overflowX||"scroll"===S.overflowX),x=b<$&&("auto"===S.overflowY||"scroll"===S.overflowY));var A=w&&(Math.abs(y-a)<=l&&C+g<k)-(Math.abs(f-a)<=l&&!!C),M=x&&(Math.abs(m-r)<=l&&E+b<$)-(Math.abs(_-r)<=l&&!!E);if(!br[u])for(var P=0;P<=u;P++)br[P]||(br[P]={});br[u].vx==A&&br[u].vy==M&&br[u].el===p||(br[u].el=p,br[u].vx=A,br[u].vy=M,clearInterval(br[u].pid),0==A&&0==M||(c=!0,br[u].pid=setInterval(function(){i&&0===this.layer&&lr.active._onTouchMove(yr);var t=br[this.layer].vy?br[this.layer].vy*s:0,o=br[this.layer].vx?br[this.layer].vx*s:0;"function"==typeof n&&"continue"!==n.call(lr.dragged.parentNode[ca],o,t,e,yr,br[this.layer].el)||la(br[this.layer].el,o,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==d&&(h=na(h,!1)));wr=c}}),30),Sr=function(e){var t=e.originalEvent,o=e.putSortable,i=e.dragEl,n=e.activeSortable,a=e.dispatchSortableEvent,r=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=o||n;r();var d=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,c=document.elementFromPoint(d.clientX,d.clientY);l(),s&&!s.el.contains(c)&&(a("spill"),this.onSpill({dragEl:i,putSortable:o}))}};function Cr(){}function Er(){}Cr.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var i=ea(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),o&&o.animateAll()},drop:Sr},Dn(Cr,{pluginName:"revertOnSpill"}),Er.prototype={onSpill:function(e){var t=e.dragEl,o=e.putSortable||this.sortable;o.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),o.animateAll()},drop:Sr},Dn(Er,{pluginName:"removeOnSpill"});var Ar=[Er,Cr];lr.mount(Ar,new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?Hn(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Hn(document,"pointermove",this._handleFallbackAutoScroll):t.touches?Hn(document,"touchmove",this._handleFallbackAutoScroll):Hn(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?Rn(document,"dragover",this._handleAutoScroll):(Rn(document,"pointermove",this._handleFallbackAutoScroll),Rn(document,"touchmove",this._handleFallbackAutoScroll),Rn(document,"mousemove",this._handleFallbackAutoScroll)),kr(),xr(),clearTimeout(Vn),Vn=void 0},nulling:function(){yr=_r=vr=wr=gr=mr=fr=null,br.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var o=this,i=(e.touches?e.touches[0]:e).clientX,n=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(i,n);if(yr=e,t||this.options.forceAutoScrollFallback||On||Tn||jn){$r(e,this.options,a,t);var r=na(a,!0);!wr||gr&&i===mr&&n===fr||(gr&&kr(),gr=setInterval((function(){var a=na(document.elementFromPoint(i,n),!0);a!==r&&(r=a,xr()),$r(e,o.options,a,t)}),10),mr=i,fr=n)}else{if(!this.options.bubbleScroll||na(a,!0)===qn())return void xr();$r(e,this.options,na(a,!1),!1)}}},Dn(e,{pluginName:"scroll",initializeByDefault:!0})});var Mr=Object.freeze({__proto__:null,default:lr});export{Pt as PowerFlowCardPlus};
