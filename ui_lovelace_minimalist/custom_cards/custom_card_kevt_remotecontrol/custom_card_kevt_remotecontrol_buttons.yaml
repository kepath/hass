
########################################################
#####  BUTTON TEMPLATES                             ####
########################################################

remote_standard_button:
  type: 'custom:button-card'
  template: widget_icon

  variables:
    entity: '[[[ return variables.entity ]]]'
    button:
      background_color: "rgba(var(--color-theme),0.05)"
      type: "normal"
      icon:
        name:
        color:
      actions:
        tap:
          entity:
          action: "call-service"
          service: androidtv.adb_command
          command:
          haptic: "success"
          harmony:
            device:
            delay:
        double_tap:
          entity:
          action: "none"
          service:
          command:
          haptic: "none"
          harmony:
            device:
            delay:
        hold:
          entity:
          action: "more-info"
          service:
          command:
          haptic: "heavy"
          repeat:
          harmony:
            device:
            delay:
  remote_button_presses:
    type: 'custom:button-card'
    template: widget_icon
    variables:
      entity: '[[[ return variables.entity ]]]'
      remote_button_presses:
        tap:
          entity: '[[[ return variables.entity ]]]'
          action: '[[[ return variables.button.actions.tap.action ]]]'
          service: '[[[ return variables.button.actions.tap.service ]]]'
          haptic: '[[[ return variables.button.actions.tap.haptic ]]]'
        double_tap:
          entity: '[[[ return variables.entity ]]]'
          action: '[[[ return variables.button.actions.double_tap.action ]]]'
          service: '[[[ return variables.button.actions.double_tap.service ]]]'
          haptic: '[[[ return variables.button.actions.double_tap.haptic ]]]'
        hold:
          entity: '[[[ return variables.entity ]]]'
          action: '[[[ return variables.button.actions.hold.action ]]]'
          service: '[[[ return variables.button.actions.hold.service ]]]'
          haptic: '[[[ return variables.button.actions.hold.haptic ]]]'
          repeat:
  icon: >
    [[[
      var icon = variables.button.icon.name;
      if (variables.button.type == 'play') {
        if (states[variables.entity].state == 'off'
            || states[variables.entity].state == 'PowerOff'
            || states[variables.entity].state == 'idle'
            || states[variables.entity].state == 'paused') {
          var icon = 'mdi:play';
        }
      }
      return icon;
    ]]]
  styles:
    icon:
      - color: '[[[ return variables.button.icon.color ]]]'
    img_cell:
      - background-color: >
          [[[
              var color = variables.button.background_color;
              if (variables.button.type == 'mute') {
                if (typeof states[variables.entity].attributes.is_volume_muted !== 'undefined') {
                  if (states[variables.entity].attributes.is_volume_muted){
                    var color = "rgba(var(--color-green), 0.2)";
                  }
                }
              }
              if (variables.button.type == 'power') {
                if (states[variables.entity].state == 'off'
                    || states[variables.entity].state == 'PowerOff') {
                  var color = variables.button.background_color;
                } else {
                  var color = "rgba(var(--color-red), 0.2)";
                }
              }
              return color;
          ]]]

remote_button_presses:
  type: 'custom:button-card'
  template: widget_icon
  variables:
    entity: '[[[ return variables.entity ]]]'
    remote_button_presses:
      tap:
        entity: '[[[ return variables.entity ]]]'
        action: "call-service"
        service:
        command:
        haptic: "none"
        harmony:
          device:
          delay: 0.6
      double_tap:
        entity: '[[[ return variables.entity ]]]'
        action: "none"
        service:
        command:
        haptic: "none"
        harmony:
          device:
          delay: 0.6
      hold:
        entity: '[[[ return variables.entity ]]]'
        action: "more-info"
        service:
        command:
        haptic: "none"
        repeat:
        harmony:
          device:
          delay: 0.6
  tap_action:
    remote_button_actions:
      type: 'custom:button-card'
      template: widget_icon
      variables:
        remote_button_actions: '[[[ return variables.button.actions.tap ]]]'
  double_tap_action:
    remote_button_actions:
      type: 'custom:button-card'
      template: widget_icon
      variables:
        remote_button_actions: '[[[ return variables.button.actions.double_tap]]]'
  hold_action:
    remote_button_actions:
      type: 'custom:button-card'
      template: widget_icon
      variables:
        remote_button_actions: '[[[ return variables.button.actions.hold ]]]'

remote_button_actions:
  type: 'custom:button-card'
  template: widget_icon
  variables:
    remote_button_actions:
  action: >
    {% if variables.remote_button_actions.action == "call-service" %}
      {% if variables.remote_button_actions.service.startswith("androidtv") %}
        action: call-service
        service: androidtv.adb_command
        service_data:
          command: '[[[ return variables.remote_button_actions.command ]]]'
          entity_id: '[[[ return variables.remote_button_actions.entity ]]]'
      {% elif variables.remote_button_actions.service.startswith("media") %}
        service: media_player.play_media
        data:
          entity_id: '[[[ return variables.remote_button_actions.entity ]]]'
          media_content_id: '[[[ return variables.remote_button_actions.command ]]]'
          media_content_type: "send_key"
      {% elif variables.remote_button_actions.service.startswith("remote") %}
        service: remote.send_command
        target:
          entity_id: '[[[ return variables.remote_button_actions.entity ]]]'
        data:
          command:
            - '[[[ return variables.remote_button_actions.command ]]]'
          device: '[[[ return variables.remote_button_actions.harmony.device ]]]'
          delay_secs: '[[[ return variables.remote_button_actions.harmony.delay ]]]'
      {% else %}
        "none"
      {% endif%}
    {% elif variables.remote_button_actions.action == "more-info" %}
      action: more-info
      entity_id: '[[[ return variables.remote_button_actions.entity ]]]'
    {% elif variables.remote_button_actions.action == "toggle" %}
      action: toggle
    {% elif variables.remote_button_actions.action == "navigate" %}
      action: navigate
      navigation_path: '[[[ return variables.remote_button_actions.command ]]]'
    {% elif variables.remote_button_actions.action == "url" %}
    {% else %}
      "none"
    {% endif %}
    haptic: '[[[ return variables.remote_button_actions.haptic ]]]'


##  success	Indicates that a task or action has completed.
##  warning	Indicates that a task or action has produced a warning of some kind.
##  failure	Indicates that a task or action has failed.
##  light	Provides a physical metaphor that complements the visual experience.
##  medium	Provides a physical metaphor that complements the visual experience.
##  heavy	Provides a physical metaphor that complements the visual experience.
##  selection	Indicates that the selection is actively changing.
