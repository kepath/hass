# ---
# custom_card_kepath_binary_sensor_floorplan:
#   template:
#     - "icon_info_bg"
#     - "ulm_translation_engine"
#     - "custom_floor_selector"
#   variables:
#     ulm_card_kepath_binary_sensor_count_unavailable_tap_action:
#       action: >
#         [[[
#           var tapAction = "navigate";
#           const tap_actions = ['navigate', 'popup', 'more_info'];
#           if (variables?.ulm_card_kepath_binary_sensor_count_unavailable_tap_action?.action) {
#             for (let i = 0; i < tap_actions.length; i++) {
#               if (tap_actions[i] == variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.action) {
#                 tapAction = tap_actions[i];
#               }
#             }
#           }
#           return tapAction;
#         ]]]
#       popup:
#         title: "entity group"
#         auto_entities:
#           sort_method: >
#             [[[
#               var autoEntitiesSortMethod = "state";
#               const sort_methods = ['domain', 'entity_id', 'name', 'device', 'area', 'state', 'last_changed', 'last_updated', 'last_triggered'];
#               if (variables?.ulm_card_kepath_binary_sensor_count_unavailable_tap_action?.popup?.auto_entities?.sort_method) {
#                 for (let i = 0; i < sort_methods.length; i++) {
#                   if (sort_methods[i] == variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_method) {
#                     autoEntitiesSortMethod = sort_methods[i];
#                   }
#                 }
#               }
#               return autoEntitiesSortMethod;
#             ]]]
#           sort_reversed: >
#             [[[
#               var autoEntitiesSortReversed = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_unavailable_tap_action?.popup?.auto_entities?.sort_reversed) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_reversed === "boolean") {
#                   autoEntitiesSortReversed = variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_reversed;
#                 }
#               }
#               return autoEntitiesSortReversed;
#             ]]]
#           sort_numeric: >
#             [[[
#               var autoEntitiesSortNumeric = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_unavailable_tap_action?.popup?.auto_entities?.sort_method) {
#                 if (variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_method == "last_changed" ||
#                     variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_method == "last_updated" ||
#                     variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_method == "last_triggered") {
#                   autoEntitiesSortNumeric = true;
#                 }
#               }
#               if (variables?.ulm_card_kepath_binary_sensor_count_unavailable_tap_action?.popup?.auto_entities?.sort_numeric) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_numeric === "boolean") {
#                   autoEntitiesSortNumeric = variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_numeric;
#                 }
#               }
#               return autoEntitiesSortNumeric;
#             ]]]
#           exclude_unknown_state: >
#             [[[
#               var autoEntitiesExcludeUnknownState = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_unavailable_tap_action?.popup?.auto_entities?.exclude_unknown_state) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.exclude_unknown_state === "boolean") {
#                   autoEntitiesExcludeUnknownState = variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.exclude_unknown_state;
#                 }
#               }
#               return autoEntitiesExcludeUnknownState;
#             ]]]
#           exclude_unavailable_state: >
#             [[[
#               var autoEntitiesExcludeUnavailableState = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_unavailable_tap_action?.popup?.auto_entities?.exclude_unavailable_state) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.exclude_unavailable_state === "boolean") {
#                   autoEntitiesExcludeUnavailableState = variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.exclude_unavailable_state;
#                 }
#               }
#               return autoEntitiesExcludeUnavailableState;
#             ]]]
#     ulm_card_kepath_binary_sensor_count_amount_tap_action:
#       action: >
#         [[[
#           var tapAction = "none";
#           const tap_actions = ['none', 'navigate', 'popup', 'more_info'];
#           if (variables?.ulm_card_kepath_binary_sensor_count_amount_tap_action?.action) {
#             for (let i = 0; i < tap_actions.length; i++) {
#               if (tap_actions[i] == variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.action) {
#                 tapAction = tap_actions[i];
#               }
#             }
#           }
#           return tapAction;
#         ]]]
#       popup:
#         title: "entity group"
#         auto_entities:
#           sort_method: >
#             [[[
#               var autoEntitiesSortMethod = "state";
#               const sort_methods = ['domain', 'entity_id', 'name', 'device', 'area', 'state', 'last_changed', 'last_updated', 'last_triggered'];
#               if (variables?.ulm_card_kepath_binary_sensor_count_amount_tap_action?.popup?.auto_entities?.sort_method) {
#                 for (let i = 0; i < sort_methods.length; i++) {
#                   if (sort_methods[i] == variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_method) {
#                     autoEntitiesSortMethod = sort_methods[i];
#                   }
#                 }
#               }
#               return autoEntitiesSortMethod;
#             ]]]
#           sort_reversed: >
#             [[[
#               var autoEntitiesSortReversed = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_amount_tap_action?.popup?.auto_entities?.sort_reversed) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_reversed === "boolean") {
#                   autoEntitiesSortReversed = variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_reversed;
#                 }
#               }
#               return autoEntitiesSortReversed;
#             ]]]
#           sort_numeric: >
#             [[[
#               var autoEntitiesSortNumeric = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_amount_tap_action?.popup?.auto_entities?.sort_method) {
#                 if (variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_method == "last_changed" ||
#                     variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_method == "last_updated" ||
#                     variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_method == "last_triggered") {
#                   autoEntitiesSortNumeric = true;
#                 }
#               }
#               if (variables?.ulm_card_kepath_binary_sensor_count_amount_tap_action?.popup?.auto_entities?.sort_numeric) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_numeric === "boolean") {
#                   autoEntitiesSortNumeric = variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_numeric;
#                 }
#               }
#               return autoEntitiesSortNumeric;
#             ]]]
#           exclude_unknown_state: >
#             [[[
#               var autoEntitiesExcludeUnknownState = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_amount_tap_action?.popup?.auto_entities?.exclude_unknown_state) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.exclude_unknown_state === "boolean") {
#                   autoEntitiesExcludeUnknownState = variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.exclude_unknown_state;
#                 }
#               }
#               return autoEntitiesExcludeUnknownState;
#             ]]]
#           exclude_unavailable_state: >
#             [[[
#               var autoEntitiesExcludeUnavailableState = false;
#               if (variables?.ulm_card_kepath_binary_sensor_count_amount_tap_action?.popup?.auto_entities?.exclude_unavailable_state) {
#                 if (typeof variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.exclude_unavailable_state === "boolean") {
#                   autoEntitiesExcludeUnavailableState = variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.exclude_unavailable_state;
#                 }
#               }
#               return autoEntitiesExcludeUnavailableState;
#             ]]]
#     ulm_card_kepath_binary_sensor_floorplan:
#       navigate_floor: >
#         [[[
#           var navigateFloor = "G";
#           if (variables?.ulm_card_kepath_binary_sensor_floorplan?.navigate_floor) {
#             navigateFloor = variables.ulm_card_kepath_binary_sensor_floorplan.navigate_floor;
#           }
#           return navigateFloor;
#         ]]]
#   show_icon: false
#   show_name: false
#   styles:
#     grid:
#       - grid-template-rows: "1fr"
#     name:
#       - overflow: "visible"
#       - transform: "none"
#     custom_fields:
#       unavailable:
#         - left: "10px"
#         - top: "10px"
#       amount:
#         - left: "130px"
#         - top: "10px"
#       notification:
#         - visibility: "hidden"

#   custom_fields:
#     unavailable:
#       card:
#         type: "custom:button-card"
#         template:
#           - "custom_card_kepath_binary_sensor_popup"
#         variables:
#           ulm_card_kepath_binary_sensor_count_unavailable_tap_action:
#             action: "[[[ return variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.action; ]]]"
#             popup:
#               title: "[[[ return variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.title; ]]]"
#               auto_entities:
#                 sort_method: "[[[ return variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_method; ]]]"
#                 sort_reversed: "[[[ return variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_reversed; ]]]"
#                 sort_numeric: "[[[ return variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.sort_numeric; ]]]"
#                 exclude_unknown_state: "[[[ return variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.exclude_unknown_state; ]]]"
#                 exclude_unavailable_state: "[[[ return variables.ulm_card_kepath_binary_sensor_count_unavailable_tap_action.popup.auto_entities.exclude_unavailable_state; ]]]"
#         # entity: "[[[ return variables?.ulm_card_kepath_binary_sensor_count_notifications?.unavailable?.entity; ]]]"

#     amount:
#       card:
#         type: "custom:button-card"
#         template:
#           - "custom_card_kepath_binary_sensor_popup"
#         variables:
#           ulm_card_kepath_binary_sensor_count_amount_tap_action:
#             action: "[[[ return variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.action; ]]]"
#             popup:
#               title: "[[[ return variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.title; ]]]"
#               auto_entities:
#                 sort_method: "[[[ return variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_method; ]]]"
#                 sort_reversed: "[[[ return variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_reversed; ]]]"
#                 sort_numeric: "[[[ return variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.sort_numeric; ]]]"
#                 exclude_unknown_state: "[[[ return variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.exclude_unknown_state; ]]]"
#                 exclude_unavailable_state: "[[[ return variables.ulm_card_kepath_binary_sensor_count_amount_tap_action.popup.auto_entities.exclude_unavailable_state; ]]]"
#         # entity: "[[[ return variables?.ulm_card_kepath_binary_sensor_count_notifications?.amount?.entity; ]]]"

#   # hold_action:
#   #   action: "more-info"

# custom_floor_selector:
#   tap_action:
#     action: "fire-dom-event"
#     browser_mod:
#       service: "browser_mod.sequence"
#       data:
#         sequence:
#           - service: "input_select.select_option"
#             data:
#               option: "[[[return variables.ulm_card_kepath_binary_sensor_floorplan.navigate_floor;]]]"
#             target:
#               entity_id: "input_select.floorplan_floor"
#           - service: "browser_mod.navigate"
#             data:
#               path: "/lovelace-minimalist-energy/3"
