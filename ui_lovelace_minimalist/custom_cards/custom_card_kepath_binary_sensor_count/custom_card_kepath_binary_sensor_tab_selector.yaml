---
custom_card_kepath_binary_sensor_tab_selector:
  template:
    - "icon_info_bg"
    - "ulm_translation_engine"
    - "custom_tab_selector"
    - "ulm_card_kepath_binary_sensor_tab_list"
  show_name: false
  styles:
    icon:
      - color: "rgba(var(--color-theme),1)"
    img_cell:
      - background-color: "rgba(var(--color-theme), 0.2)"
    card:
      - border-bottom-left-radius: "0px"
      - border-bottom-right-radius: "0px"
      - padding: "12px"
      - padding-bottom: "18px"
      - margin-bottom: >
          [[[
            var marginBottom = "-5px";
            if (entity.state == "on") {
              marginBottom = "-10px";
              if (hass.themes.darkMode) {
                marginBottom = "-6px";
              }
            }
            return marginBottom;
          ]]]
      - box-shadow: >
          [[[
            var boxShadow = "none";
            if (entity.state == "on") {
              boxShadow = "rgba(0, 0, 0, 0.16) 0px -4px 7px -1px";
            }
            return boxShadow;
          ]]]
      - background-color: >
          [[[
            var BGColor = "rgba(var(--color-theme),0)";
            if (entity.state == "on") {
              BGColor = "";
            }
            return BGColor;
          ]]]
    custom_fields:
      unavailable:
        - top: "8px"
      amount:
        - top: "38px"

widget_count_indicator:
  show_icon: true
  show_label: false
  show_name: false
  styles:
    img_cell:
      - background-color: >
          [[[
            var BGColor = "blue";
            if(hass.themes.darkMode) {
              BGColor = "rgba(var(--color-theme),0)";
            }
            return BGColor;
          ]]]
      - border: >
            [[[
              var borderColor = "blue";
              if(hass.themes.darkMode) {
                borderColor = "rgba(var(--color-theme),0)";
              }
              return "2px solid " + borderColor;
            ]]]

    card:
      - background-color: "rgba(#000,0)"

custom_tab_selector:
  tap_action:
    action: "fire-dom-event"
    browser_mod:
      service: "browser_mod.sequence"
      data:
        sequence:
          - service: "input_boolean.turn_off"
            data:
              entity_id: >
                [[[
                  const dropdown_list = variables.ulm_card_kepath_binary_sensor_tab_list;
                  for (let i = 0; i < dropdown_list.length; i++) {
                    if (dropdown_list[i] == entity.entity_id) {
                      dropdown_list.splice(i,1); //remove selected tab button
                    }
                  }
                  return dropdown_list;
                ]]]
          - service: "input_boolean.turn_on"
            data:
              entity_id: >
                [[[ return entity.entity_id ]]]
