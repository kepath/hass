---
device_kepath_washing_machine_state:
  variables:
    ulm_device_kepath_washing_machine_state:
      entity: >
        [[[
          var deviceStatus = entity?.entity_id;
          if (variables?.ulm_device_kepath_washing_machine_state) {
            if (variables?.ulm_device_kepath_washing_machine_state?.device_status) {
              deviceStatus = variables?.ulm_device_kepath_washing_machine_state?.device_status;
            }
          }

          return deviceStatus;
        ]]]
  state:
    - operator: "template"
      value: >
        [[[
          var returnVar = false;
          if (variables?.ulm_device_kepath_washing_machine_state?.entity) {
            stateValue = states[variables.ulm_device_kepath_washing_machine_state.entity].state;
          }
          if (!isNaN(stateValue) && stateValue !== undefined){
            if (stateValue > 10) {
              returnVar = true;
            }
          }
          return returnVar;
        ]]]
      icon: "mdi:washing-machine"
      styles:
        icon:
          - color: "rgba(var(--color-green),1)"
        img_cell:
          - background-color: "rgba(var(--color-green), 0.2)"
    - operator: "template"
      value: >
        [[[
          var returnVar = false;
          if (variables?.ulm_device_kepath_washing_machine_state?.entity) {
            stateValue = states[variables.ulm_device_kepath_washing_machine_state.entity].state;
          }
          if (isNaN(stateValue) && stateValue !== undefined){
            if (stateValue.toLowerCase() == 'unknown' || stateValue.toLowerCase() == 'unavailable') {
              returnVar = true;
            }
          }
          return returnVar;
        ]]]
      icon: "mdi:washing-machine-off"
      styles:
        icon:
          - color: "rgba(var(--color-red),1)"
        img_cell:
          - background-color: "rgba(var(--color-red), 0.2)"
    - operator: "default"
      icon: "mdi:washing-machine"
      styles:
        icon:
          - color: "rgba(var(--color-blue),1)"
        img_cell:
          - background-color: "rgba(var(--color-blue), 0.2)"
