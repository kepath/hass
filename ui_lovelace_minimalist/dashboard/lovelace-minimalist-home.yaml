---
button_card_templates: !include_dir_merge_named "../../custom_components/ui_lovelace_minimalist/__ui_minimalist__/ulm_templates/"

views:

  - title: "Main"
    icon: "mdi:cellphone-text"
    theme: "minimalist-mobile"
    cards:
      - type: "vertical-stack"
        cards:
          - type: "horizontal-stack"
            cards:
              - type: "custom:button-card"
                template: "card_kepath_welcome"
                triggers_update: "input_boolean.welcome_toggle"
                variables:
                  ulm_card_kepath_welcome_collapse: "input_boolean.welcome_toggle"
                  ulm_chip_temperature_inside:
                  ulm_chip_temperature_outside: "sensor.banbury_temperature"
                  ulm_chip_temperature_weather: "weather.met_office_banbury"
                  entity_1:
                    nav: "/lovelace-minimalist-rooms"
                    icon: "mdi:floor-plan"
                    name: "Rooms"
                    color: "blue"
                  entity_2:
                    nav: "/lovelace-minimalist-devices"
                    icon: "mdi:devices"
                    name: "Device"
                    color: "green"
                  entity_3:
                    nav: "/lovelace-minimalist-network"
                    icon: "mdi:lan"
                    name: "Net"
                    color: "yellow"
                  entity_4:
                    nav: "/lovelace-minimalist-downloads"
                    icon: "mdi:download"
                    name: "Down"
                    color: "purple"
                  entity_5:
                    nav: "/lovelace-minimalist-security"
                    icon: "mdi:shield-home"
                    name: "Secure"
                    color: "red"
                  entity_6:
                    nav: "/lovelace-minimalist-media"
                    icon: "mdi:remote-tv"
                    name: "Media"
                    color: "green"
                  entity_7:
                    nav: "/lovelace-minimalist-climate"
                    icon: "mdi:home-thermometer"
                    name: "Temp"
                    color: "red"
                  entity_8:
                    nav: "/lovelace-minimalist-links"
                    icon: "mdi:link-variant"
                    name: "Links"
                    color: "blue"
                  entity_9:
                    nav: "/lovelace-minimalist-energy"
                    icon: "mdi:lightning-bolt"
                    name: "Energy"
                    color: "yellow"
                  entity_10:
                    nav: "/a0d7b954_grafana"
                    icon: "si:grafana"
                    name: "Data"
                    color: "purple"

          - type: "vertical-stack"
            cards:
              - type: "custom:button-card"
                styles:
                  grid:
                    - grid-template-areas: "'item1 item1 item1 item1 item1 item2 item2 item2 item2 item2' 'item3 item3 item4 item4 item5 item5 item6 item6 item7 item7' 'item8 item8 item9 item9 item10 item10 item11 item11 item12 item12'"
                    - grid-template-columns: "1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr 1fr"
                    - grid-template-rows: "min-content"
                    - justify-items: "center"
                  card:
                    - padding: "10px 10px 0px 10px"
                    - overflow: "visible"
                    - border-bottom-left-radius: "0px"
                    - border-bottom-right-radius: "0px"

                  custom_fields:
                    item1: &widget_update_styling
                      - border-radius: "none"
                      - box-shadow: "none"
                      - padding: "4px"
                      - margin-bottom: "10px"
                      - cursor: "default"
                      - width: "86%"
                      - justify-items: "center"
                    item2: *widget_update_styling
                    item3: &widget_icon_binary_sensor_styling
                      - border-radius: "none"
                      - box-shadow: "none"
                      - padding: "4px"
                      - cursor: "default"
                    item4: *widget_icon_binary_sensor_styling
                    item5: *widget_icon_binary_sensor_styling
                    item6: *widget_icon_binary_sensor_styling
                    item7: *widget_icon_binary_sensor_styling
                    item8: *widget_icon_binary_sensor_styling
                    item9: *widget_icon_binary_sensor_styling
                    item10: *widget_icon_binary_sensor_styling
                    item11: *widget_icon_binary_sensor_styling
                    item12: *widget_icon_binary_sensor_styling
                tap_action:
                  action: "call-service"
                  service: "input_boolean.toggle"
                  data: {}
                  target:
                    entity_id: "input_boolean.minimalist_ui_home_buttons_expanded"
                custom_fields:
                  item1:
                    card:
                      type: "custom:button-card"
                      template: "card_kepath_update"
                      entity: "update.home_assistant_core_update"
                      variables:
                        ulm_card_neekster_update_enable_controls: true
                        ulm_card_neekster_update_collapsible: false
                        ulm_card_neekster_update_horizontal: false
                        ulm_card_neekster_update_narrow_buttons: true
                        ulm_card_neekster_update_view_release_notes: true
                  item2:
                    card:
                      type: "custom:button-card"
                      template: "card_kepath_update"
                      entity: "update.home_assistant_supervisor_update"
                      variables:
                        ulm_card_neekster_update_enable_controls: true
                        ulm_card_neekster_update_collapsible: false
                        ulm_card_neekster_update_horizontal: false
                        ulm_card_neekster_update_narrow_buttons: true
                        ulm_card_neekster_update_view_release_notes: true
                  item3:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "icon_set_color"
                      entity: "group.all_updates"
                      name: "Updates"
                      variables:
                        ulm_card_kepath_extra_templates_alternative_state_appearance:
                          default_color: "green"
                          triggered_color: "yellow"
                        ulm_card_kepath_binary_sensor_count_notifications:
                          amount:
                            is_attribute: false
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "update entities"

                  item4:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "icon_set_color"
                      entity: "group.all_lights"
                      name: "Lights"
                      variables:
                        ulm_card_kepath_extra_templates_alternative_state_appearance:
                          triggered_icon: "mdi:lightbulb-multiple"
                          triggered_color: "yellow"
                        ulm_card_kepath_binary_sensor_count_notifications:
                          amount:
                            attribute_name: "lights_on_count"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "light entities"

                  item5:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "icon_set_color"
                      entity: "group.all_outlet_class_switch"
                      name: "Plugs"
                      variables:
                        ulm_card_kepath_extra_templates_alternative_state_appearance:
                          default_color: "green"
                          triggered_icon: "mdi:power-plug-off"
                          triggered_color: "blue"
                        ulm_card_kepath_binary_sensor_count_notifications:
                          amount:
                            attribute_name: "plugs_off_count"
                            count_tooltip: "Plugs off"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "plug entities"
                            auto_entities:
                              sort_reversed: true

                  item6:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "icon_set_color"
                      entity: "group.all_fans"
                      name: "Fans"
                      variables:
                        ulm_card_kepath_extra_templates_alternative_state_appearance:
                          default_color: "blue"
                          triggered_icon: "mdi:fan"
                          triggered_color: "green"
                        ulm_card_kepath_binary_sensor_count_notifications:
                          unavailable:
                            attribute_name: "fans_unavailable_count"
                          amount:
                            attribute_name: "fans_on_count"
                            count_tooltip: "Fans on"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "fan entities"

                  item7:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "icon_set_color"
                      entity: "group.all_safety_class_binary_sensors"
                      name: "Alerts"
                      variables:
                        ulm_card_kepath_extra_templates_alternative_state_appearance:
                          default_color: "green"
                          triggered_icon: "mdi:alarm-light"
                          triggered_color: "red"
                          trigger_on_unavailable: true
                        ulm_card_kepath_binary_sensor_count_notifications:
                          unavailable:
                            attribute_name: "safety_sensors_unavailable_count"
                          amount:
                            attribute_name: "safety_sensors_triggered_count"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "safety entities"
                            auto_entities:
                              sort_method: "last_changed"

                  item8:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "icon_set_color"
                      entity: "group.all_door_class_binary_sensors"
                      name: "Doors"
                      variables:
                        ulm_card_kepath_extra_templates_alternative_state_appearance:
                          default_color: "green"
                          triggered_icon: "mdi:door-open"
                          triggered_color: "red"
                        ulm_card_kepath_binary_sensor_count_notifications:
                          unavailable:
                            attribute_name: "door_sensors_unavailable_count"
                          amount:
                            attribute_name: "door_sensors_triggered_count"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "door entities"
                            auto_entities:
                              sort_method: "last_changed"

                  item9:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "custom_card_kepath_lock_state"
                      entity: "group.all_locks"
                      icon: "mdi:lock"
                      name: "Locks"
                      variables:
                        ulm_card_kepath_binary_sensor_count_notifications:
                          unavailable:
                            attribute_name: "locks_unavailable_count"
                          amount:
                            attribute_name: "locks_unlocked_count"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "Lock entities"

                  item10:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "custom_card_kepath_occupancy_state"
                      entity: "group.all_occupancy_class_binary_sensors"
                      name: "Motion"
                      variables:
                        ulm_card_kepath_binary_sensor_count_notifications:
                          unavailable:
                            attribute_name: "occupancy_sensors_unavailable_count"
                          amount:
                            attribute_name: "occupancy_sensors_triggered_count"
                          person:
                            attribute_name: "occupancy_persons_home_count"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "occupancy entities"
                            auto_entities:
                              sort_method: "last_changed"

                  item11:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "icon_set_color"
                      entity: "group.all_cameras"
                      name: "Camera"
                      variables:
                        ulm_card_kepath_extra_templates_alternative_state_appearance:
                          default_color: "green"
                          triggered_icon: "mdi:camera-off"
                          triggered_color: "red"
                          trigger_on_unavailable: true
                        ulm_card_kepath_binary_sensor_count_notifications:
                          amount:
                            attribute_name: "cameras_off_count"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "camera entities"
                            auto_entities:
                              sort_method: "name"

                  item12:
                    card:
                      type: "custom:button-card"
                      template:
                        - "custom_card_kepath_binary_sensor_count"
                        - "custom_card_kepath_data_rate_state"
                      entity: "group.all_data_rate_class_sensors"
                      name: "Data"
                      variables:
                        ulm_card_kepath_binary_sensor_count_notifications:
                          data_rate_value:
                            attribute_name: "data_rate_total_value"
                          unavailable:
                            attribute_name: "data_rate_unavailable_count"
                            count_tooltip: "Num unavailable"
                        ulm_card_kepath_binary_sensor_count_tap_action:
                          action: "popup"
                          popup:
                            title: "data entities"
                            auto_entities:
                              sort_method: "state"
                              sort_numeric: true

              - type: "conditional"
                conditions:
                  - entity: "input_boolean.minimalist_ui_home_buttons_expanded"
                    state: "on"
                card:
                  type: "custom:button-card"
                  styles:
                    grid:
                      - grid-template-areas: "'item1 item2 item3 item4 item5' 'item6 item7 item8 item9 item10'"
                      - grid-template-columns: "1fr 1fr 1fr 1fr 1fr"
                      - grid-template-rows: "min-content"
                      - justify-items: "center"
                    card:
                      - padding: "10px"
                      - overflow: "visible"
                      - border-top-left-radius: "0px"
                      - border-top-right-radius: "0px"
                      - margin-top: "-10px"
                      - margin-bottom: "-4px"
                      - box-shadow: "0px 2px 0px 0px rgba(0,0,0,0.16)"

                    custom_fields:
                      item1: &widget_icon_binary_sensor_expanded_styling
                        - border-radius: "none"
                        - box-shadow: "none"
                        - padding: "4px"
                        - cursor: "default"
                      item2: *widget_icon_binary_sensor_expanded_styling
                      item3: *widget_icon_binary_sensor_expanded_styling
                      item4: *widget_icon_binary_sensor_expanded_styling
                      item5: *widget_icon_binary_sensor_expanded_styling
                      item6: *widget_icon_binary_sensor_expanded_styling
                      item7: *widget_icon_binary_sensor_expanded_styling
                      item8: *widget_icon_binary_sensor_expanded_styling
                      item9: *widget_icon_binary_sensor_expanded_styling
                      item10: *widget_icon_binary_sensor_expanded_styling
                  custom_fields:

                    item1:
                      card:
                        type: "custom:button-card"
                        template:
                          - "card_notification_script_trigger"
                          - "green_icon_off"
                        entity: "input_boolean.away_script_active"
                        icon: "mdi:home-lock-open"
                        name: "Passive"
                        variables:
                          script_activate:
                            icon:
                              mdi: "mdi:home-lock"
                              color: "red"
                            name: "Active"
                            script:
                              name: "script.lockdown_mode_on"
                              confirmation_text: "This will ACTIVATE lockdown mode. Are you sure you want to proceed?"
                          script_deactivate:
                            script:
                              name: "script.lockdown_mode_off"
                              confirmation_text: "This will return to home mode. Are you sure you want to proceed?"

                    item2:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "red_heating_icon"
                        entity: "group.all_climate"
                        icon: "mdi:thermometer"
                        name: "Heating"
                        variables:
                          ulm_card_kepath_binary_sensor_count_notifications:
                            amount:
                              attribute_name: "climate_devices_on_count"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "climate entities"
                              auto_entities:
                                sort_reversed: true

                    item3:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "card_room_mower_state"
                        entity: "vacuum.moe"
                        icon: "mdi:robot-mower"
                        name: "Mower"
                        variables:
                          ulm_card_kepath_binary_sensor_count_notifications:
                            unavailable:
                              attribute_name: "vacuums_error_count"
                            amount:
                              attribute_name: "vacuums_busy_count"
                        tap_action:
                          action: "more-info"

                    item4:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "icon_set_color"
                        entity: "group.all_remotes_and_tv_class_media_player"
                        name: "Video"
                        variables:
                          ulm_card_kepath_extra_templates_alternative_state_appearance:
                            default_color: "blue"
                            triggered_icon: "mdi:television-play"
                            triggered_color: "green"
                          ulm_card_kepath_binary_sensor_count_notifications:
                            amount:
                              attribute_name: "media_player_tv_and_remote_on_count"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "tv entities"
                              auto_entities:
                                sort_method: "name"
                                sort_reversed: true

                    item5:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "icon_set_color"
                        entity: "group.all_audio_class_media_player"
                        name: "Audio"
                        variables:
                          ulm_card_kepath_extra_templates_alternative_state_appearance:
                            default_color: "blue"
                            triggered_icon: "mdi:volume-medium"
                            triggered_color: "green"
                          ulm_card_kepath_binary_sensor_count_notifications:
                            unavailable:
                              attribute_name: "media_player_audio_unavailable_count"
                            amount:
                              attribute_name: "media_player_audio_on_count"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "speaker entities"
                              auto_entities:
                                sort_method: "last_changed"

                    item6:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "icon_set_color"
                        entity: "group.all_device_trackers"
                        name: "Device"
                        variables:
                          ulm_card_kepath_binary_sensor_count_notifications:
                            unavailable:
                              attribute_name: "device_trackers_unavailable_count"
                            amount:
                              attribute_name: "device_trackers_away_count"
                              count_tooltip: "Num Away"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "device_tracker entities"
                              auto_entities:
                                sort_method: "last_changed"

                    item7:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "icon_set_color"
                        entity: "group.all_connectivity_class_binary_sensors"
                        name: "Connect"
                        variables:
                          ulm_card_kepath_extra_templates_alternative_state_appearance:
                            default_color: "green"
                            triggered_icon: "mdi:lan-disconnect"
                            triggered_color: "blue"
                          ulm_card_kepath_binary_sensor_count_notifications:
                            unavailable:
                              attribute_name: "connectivity_unavailable_count"
                            amount:
                              attribute_name: "connectivity_disconnected_count"
                              count_tooltip: "Num disconnected"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "connectivity entities"
                              auto_entities:
                                sort_method: "last_changed"

                    item8:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "icon_set_color"
                        entity: "group.all_running_class_binary_sensors"
                        name: "Running"
                        variables:
                          ulm_card_kepath_extra_templates_alternative_state_appearance:
                            default_color: "red"
                            triggered_icon: "mdi:server-network"
                            triggered_color: "green"
                          ulm_card_kepath_binary_sensor_count_notifications:
                            unavailable:
                              attribute_name: "running_unavailable_count"
                            amount:
                              attribute_name: "running_stopped_count"
                              count_tooltip: "Num stopped"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "running entities"

                    item9:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "custom_card_kepath_battery_state"
                        entity: "group.all_battery_class_sensors"
                        name: "Battery"
                        variables:
                          ulm_card_kepath_binary_sensor_count_notifications:
                            battery_value:
                              attribute_name: "batteries_average_value"
                            unavailable:
                              attribute_name: "batteries_unavailable_count"
                            amount:
                              attribute_name: "batteries_below20_count"
                              count_tooltip: "Num under 20%"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "battery entities"
                              auto_entities:
                                sort_method: "state"
                                sort_numeric: true

                    item10:
                      card:
                        type: "custom:button-card"
                        template:
                          - "custom_card_kepath_binary_sensor_count"
                          - "custom_card_kepath_signal_strength_state"
                        entity: "group.all_signal_strength_class_sensors"
                        name: "Signal"
                        variables:
                          ulm_card_kepath_binary_sensor_count_notifications:
                            signal_value:
                              attribute_name: "signal_sensors_average_value"
                            unavailable:
                              attribute_name: "signal_sensors_unavailable_count"
                            amount:
                              attribute_name: "signal_sensors_low_count"
                              count_tooltip: "Num under -80dBm"
                          ulm_card_kepath_binary_sensor_count_tap_action:
                            action: "popup"
                            popup:
                              title: "signal entities"

              - type: "conditional"
                conditions:
                  - entity: "input_boolean.minimalist_ui_home_buttons_expanded"
                    state: "off"
                card:
                  type: "custom:button-card"
                  styles:
                    card:
                      - padding: "10px"
                      - overflow: "visible"
                      - border-top-left-radius: "0px"
                      - border-top-right-radius: "0px"
                      - margin-top: "-10px"
                      - box-shadow: "0px 2px 0px 0px rgba(0,0,0,0.16)"

          - type: "horizontal-stack"
            cards:
              - type: "custom:button-card"
                styles:
                  grid:
                    - grid-template-areas: "'item1 item2 item3 item4'"
                    - grid-template-columns: "1fr 1fr 1fr 1fr"
                    - row-gap: "0px"
                  card:
                    - padding: "10px"
                    - cursor: "default"
                  custom_fields:
                    item1: &widget_person_styling
                      - border-radius: "none"
                      - box-shadow: "none"
                      - padding: "4px"
                      - margin-left: "relative"
                      - cursor: "default"
                      - border-radius: "50%"
                    item2: *widget_person_styling
                    item3: *widget_person_styling
                    item4: *widget_person_styling
                custom_fields:
                  item1:
                    card:
                      type: "custom:button-card"
                      template: "custom_card_kepath_person_info"
                      variables:
                        ulm_card_kepath_person_entity: "person.kevin_thorn"
                        ulm_card_kepath_person_wifi_tracker: "device_tracker.kev_iphone_11_unifi"
                        ulm_card_kepath_person_gps_tracker: "device_tracker.repl_iphone_11_2"
                        ulm_card_kepath_person_findmy_device: "repl_iphone_11"
                        ulm_card_kepath_person_driving_entity: "binary_sensor.kev_driving_status"
                        ulm_card_kepath_person_distance_entity: "sensor.repl_iphone_11_home_distance"
                  item2:
                    card:
                      type: "custom:button-card"
                      template: "custom_card_kepath_person_info"
                      variables:
                        ulm_card_kepath_person_entity: "person.julia_thorn"
                        ulm_card_kepath_person_wifi_tracker: "device_tracker.ju_iphone_8_unifi"
                        ulm_card_kepath_person_gps_tracker: "device_tracker.julia_s_iphone_8"
                        ulm_card_kepath_person_findmy_device: "julia_s_iphone_8"
                        ulm_card_kepath_person_driving_entity: ""
                        ulm_card_kepath_person_distance_entity: "sensor.julia_s_iphone_8_home_distance"
                  item3:
                    card:
                      type: "custom:button-card"
                      template: "custom_card_kepath_person_info"
                      variables:
                        ulm_card_kepath_person_entity: "person.daniel_thorn"
                        ulm_card_kepath_person_wifi_tracker: "device_tracker.iphone_12_dan_unifi"
                        ulm_card_kepath_person_gps_tracker: "device_tracker.iphone_2"
                        ulm_card_kepath_person_findmy_device: "iphone"
                        ulm_card_kepath_person_driving_entity: ""
                        ulm_card_kepath_person_distance_entity: "sensor.iphone_home_distance"
                  item4:
                    card:
                      type: "custom:button-card"
                      template: "custom_card_kepath_person_info"
                      variables:
                        ulm_card_kepath_person_entity: "person.emily_thorn"
                        ulm_card_kepath_person_wifi_tracker: "device_tracker.iphone13_emily_patrice_unifi"
                        ulm_card_kepath_person_gps_tracker: "device_tracker.patrice_2"
                        ulm_card_kepath_person_findmy_device: "patrice"
                        ulm_card_kepath_person_driving_entity: ""
                        ulm_card_kepath_person_distance_entity: "sensor.patrice_home_distance"
