---
button_card_templates: !include_dir_merge_named "../../custom_components/ui_lovelace_minimalist/__ui_minimalist__/ulm_templates/"
views:
  - title: "Security"
    icon: "mdi:shield-home"
    theme: "minimalist-mobile"
    cards:
      - type: "horizontal-stack"
        cards:
          - type: "custom:button-card"
            template: "chip_back"
            variables:
              ulm_chip_back_path: "/lovelace-minimalist-home"
          - type: "custom:button-card"
            template:
              - "chip_navigate"
            variables:
              ulm_chip_navigate_path: "/lovelace-minimalist-home"
              ulm_chip_navigate_icon: "mdi:home"
              ulm_chip_navigate_icon_color: "rgba(var(--color-blue),1)"
              ulm_chip_navigate_label_color: "rgba(var(--color-blue),0.2)"
          - type: "custom:button-card"
            template:
              - "chip_navigate"
            variables:
              ulm_chip_navigate_path: "/lovelace-minimalist-rooms"
              ulm_chip_navigate_icon: "mdi:floor-plan"
              ulm_chip_navigate_icon_color: "rgba(var(--color-red),1)"
              ulm_chip_navigate_label_color: "rgba(var(--color-red),0.2)"
          - type: "custom:button-card"
            template:
              - "chip_navigate"
            variables:
              ulm_chip_navigate_path: "/lovelace-minimalist-network"
              ulm_chip_navigate_icon: "mdi:lan"
              ulm_chip_navigate_icon_color: "rgba(var(--color-red),1)"
              ulm_chip_navigate_label_color: "rgba(var(--color-red),0.2)"
          - type: "custom:button-card"
            template:
              - "chip_navigate"
            variables:
              ulm_chip_navigate_path: "/lovelace-minimalist-media"
              ulm_chip_navigate_icon: "mdi:remote-tv"
              ulm_chip_navigate_icon_color: "rgba(var(--color-red),1)"
              ulm_chip_navigate_label_color: "rgba(var(--color-red),0.2)"
          - type: "custom:button-card"
            template:
              - "chip_navigate"
            variables:
              ulm_chip_navigate_path: "/lovelace-minimalist-devices/9"
              ulm_chip_navigate_icon: "mdi:alpha-k-box"
              ulm_chip_navigate_icon_color: "rgba(var(--color-green),1)"
              ulm_chip_navigate_label_color: "rgba(var(--color-green),0.2)"

  - title: "Floorplan"
    icon: "mdi:floor-plan"
    theme: "minimalist-mobile"
    panel: true
    cards:
      - type: "vertical-stack"
        cards:
          - type: "conditional"
            conditions:
              - entity: "input_select.floorplan_floor"
                state: "G"
            card: !include "floorplan_security/floor-ground.yaml"
          - type: "conditional"
            conditions:
              - entity: "input_select.floorplan_floor"
                state: "1"
            card: !include "floorplan_security/floor-first.yaml"
          - type: "conditional"
            conditions:
              - entity: "input_select.floorplan_floor"
                state: "2"
            card: !include "floorplan_security/floor-second.yaml"

  #     - type: "horizontal-stack"
  #       cards:
  #         - type: "custom:button-card"
  #           template: "edge"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor_alert"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "input_boolean.front_door_open"
  #           show_last_changed: true
  #           name: "Front"
  #           tap_action:
  #             action: "more-info"
  #             entity: "binary_sensor.zigbee_door_sensor_front_contact"
  #           double_tap_action:
  #             action: "navigate"
  #             navigation_path: "/45df7312_zigbee2mqtt_edge"
  #           hold_action:
  #             action: "more-info"
  #             entity: "camera.lounge_g3_instant"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor_alert"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "input_boolean.back_door_open"
  #           show_last_changed: true
  #           name: "Back"
  #           tap_action:
  #             action: "more-info"
  #             entity: "binary_sensor.zigbee_door_sensor_back_contact"
  #           double_tap_action:
  #             action: "navigate"
  #             navigation_path: "/45df7312_zigbee2mqtt_edge"
  #           hold_action:
  #             action: "more-info"
  #             entity: "camera.back_g3_flex"
  #         - type: "custom:button-card"
  #           template: "edge"
  #     - type: "horizontal-stack"
  #       cards:
  #         - type: "custom:button-card"
  #           template: "edge"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor_alert"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.zigbee_door_sensor_patio_1_contact"
  #           show_last_changed: true
  #           name: "Patio"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor_alert"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.zigbee_door_sensor_patio_2_contact"
  #           show_last_changed: true
  #           name: "Patio"
  #         - type: "custom:button-card"
  #           template: "edge"
  #     - type: "horizontal-stack"
  #       cards:
  #         - type: "custom:button-card"
  #           template: "edge"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.zigbee_motion_sensor_middle_hallway_occupancy"
  #           show_last_changed: true
  #           name: "Stairs Motion"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.motion_uvc_g3_flex_middle_hallway"
  #           show_last_changed: true
  #           name: "G3 Middle"
  #         - type: "custom:button-card"
  #           template: "edge"
  #     - type: "horizontal-stack"
  #       cards:
  #         - type: "custom:button-card"
  #           template: "edge"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.zigbee_door_sensor_garage_contact"
  #           show_last_changed: true
  #           name: "Garage"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: false
  #           entity: "binary_sensor.zigbee_door_sensor_bed_b_contact"
  #           show_last_changed: true
  #           name: "Loft"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: false
  #           entity: "binary_sensor.zigbee_door_sensor_bed_c_contact"
  #           show_last_changed: true
  #           name: "Bed C"
  #         - type: "custom:button-card"
  #           template: "edge"
  #     - type: "horizontal-stack"
  #       cards:
  #         - type: "custom:button-card"
  #           template: "edge"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.nest_protect_bottom_floor_occupancy"
  #           show_last_changed: true
  #           name: "Nest Bottom"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.nest_protect_middle_floor_occupancy"
  #           show_last_changed: true
  #           name: "Nest Middle"
  #         - type: "custom:button-card"
  #           template: "card_binary_sensor"
  #           variables:
  #             - ulm_card_binary_sensor_alert: true
  #           entity: "binary_sensor.nest_protect_top_floor_occupancy"
  #           show_last_changed: true
  #           name: "Nest Top"
  #         - type: "custom:button-card"
  #           template: "edge"

  - title: "Camera's"
    icon: "mdi:cctv"
    theme: "minimalist-mobile"
    panel: true
    cards:
      - type: "custom:surveillance-card"
        thumb_interval: 10
        update_interval: 1
        recording_duration: 10
        show_capture_buttons: false
        cameras:
          - entity: "camera.doorbell_g4_medium"
            motion_entity: "binary_sensor.doorbell_g4_motion"
          - entity: "camera.front_g3_flex_medium"
            motion_entity: "binary_sensor.front_g3_flex_motion"
          - entity: "camera.back_g3_flex_medium"
            motion_entity: "binary_sensor.back_g3_flex_motion"
          - entity: "camera.lounge_g3_instant_medium"
            motion_entity: "binary_sensor.lounge_g3_instant_motion"
          - entity: "camera.middle_hallway_g3_flex_medium"
            motion_entity: "binary_sensor.middle_hallway_g3_flex_motion"
          - entity: "camera.kitchen_g3_instant_medium"
            motion_entity: "binary_sensor.kitchen_g3_instant_motion"
          - entity: "camera.bed_c_g3_instant_medium"
            motion_entity: "binary_sensor.bed_c_g3_instant_motion"
  - title: "Diagnostics"
    icon: "mdi:signal"
    theme: "minimalist-mobile"
    cards:
      # - type: "horizontal-stack"
      #   cards:
      - type: "custom:button-card"
        template: "chip_back"
        variables:
          ulm_chip_back_path: "/lovelace-minimalist"
      # - type: "horizontal-stack"
      #   cards:
      - type: "custom:flex-table-card"
        title: "Zigbee Sensor Diagnostics"
        entities:
          include: "binary_sensor.zigbee*"
        sort_by: "battery"
        strict: true
        clickable: true
        columns:
          - data: "friendly_name"
            name: "Friendly Name"
          - data: "battery"
            name: "Battery Level"
            suffix: "%"
            align: "right"
          - data: "voltage"
            name: "Voltage"
            suffix: " mV"
          - data: "power_outage_count"
            name: "Power Outage Count"
            align: "right"
          - data: "linkquality"
            name: "LQI"
            modify: "Math.round((x/255)*100)"
            suffix: "%"
            align: "right"
      # - type: "horizontal-stack"
      #   cards:
      - type: "custom:flex-table-card"
        title: "Shelly Diagnostics"
        entities:
          include: "sensor.*_light_diagnostics"
          exclude: "*middle_hallway*"
        sort_by: "ip"
        strict: true
        clickable: true
        columns:
          - data: "friendly_name"
            name: "Friendly Name"
          - data: "connected"
            name: "Connected"
            align: "right"
          - data: "switch_1"
            name: "Switch 1"
            align: "right"
          - data: "switch_2"
            name: "Switch 2"
            align: "right"
          - data: "rssi"
            name: "RSSI"
            align: "right"
          - data: "temperature"
            name: "Temp"
            modify: "parseFloat(x).toFixed(0)"
            suffix: " &#8451;"
            align: "right"
          - data: "firmware_installed"
            name: "Version"


  - title: "3D Floorplan"
    icon: "mdi:rotate-3d"
    theme: "minimalist-mobile"
    cards:
      - type: "custom:floor3d-card"
        path: "/local/floorplan/digitalTwin"
        objfile: "28GriffithRoad_export.obj"
        mtlfile: "28GriffithRoad_export.mtl"
