button_card_templates: !include_dir_merge_named "../../custom_components/ui_lovelace_minimalist/__ui_minimalist__/ulm_templates/"
views:

  - title: Rooms
    icon: mdi:floor-plan
    theme: minimalist-mobile
    cards:
    - type: horizontal-stack
      style:
        card:
        - width: "100%"    
      cards:
      - type: custom:button-card
        template: edge
      - type: 'custom:button-card'
        template: chip_back
        variables:
          ulm_chip_back_path: /lovelace-minimalist

    - type: vertical-stack
      cards:
      - type: custom:button-card
        template: edge      
      - type: 'custom:button-card'
        template: card_title
        label: Exterior      
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - green_off
            - red_on
          name: Front
          entity: binary_sensor.zigbee_door_sensor_front_contact
          icon: mdi:home-lock
          tap_action:
            action: more-info
          hold_action:
            action: more-info
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: input_boolean.doorbell_rung
              templates:               
                - green_off
                - red_on
              tap_action:
                action: more-info
                entity: camera.uvc_g4_doorbell
                show_live_stream: true
              hold_action:
                action: more-info
            entity_2:
              entity_id: binary_sensor.motion_front_g3_flex
              templates:
                - green_off
                - red_on
              tap_action:
                action: more-info
                entity: camera.front_g3_flex
                show_live_stream: true
              hold_action:
                action: more-info  
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
        - type: 'custom:button-card'
          template:
            - card_room
            - green_off
            - red_on
          name: Back
          entity: binary_sensor.zigbee_door_sensor_back_contact
          icon: mdi:shovel
          tap_action:
            action: more-info  
          hold_action:
            action: more-info
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: light.tybf82abce93da177c79kymc
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: binary_sensor.motion_uvc_g3_flex_back
              templates:
                - green_off
                - red_on
              tap_action:
                action: more-info
                entity: camera.back_g3_flex
                show_live_stream: true
              hold_action:
                action: more-info
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_4:
              entity_id: binary_sensor.zigbee_vibration_sensor_patio_vibration
              templates:
                - purple_on
              tap_action:
                action: more-info
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - green_off
            - red_on
          name: Garage
          entity: binary_sensor.zigbee_door_sensor_garage_contact
          icon: mdi:garage
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: light.zigbee_bulb_garage
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: switch.zigbee_plug_garage
              templates:
                - yellow_on
                - icon_power_plug
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_3:
              entity_id: device_tracker.solar_battery_1_unifi
              device_class: presence
              templates:
                - blue_presence_home
                - red_presence_away
                - icon_solar_power
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
            - card_met_office_weather
          name: Outside
          entity: weather.met_office_banbury
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: person.kevin_thorn
              templates:             
                - card_zone_icon_color
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            entity_2:
              entity_id: person.julia_thorn
              templates: 
                - card_zone_icon_color
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            entity_3:
              entity_id: person.daniel_thorn
              templates:
                - card_zone_icon_color
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            entity_4:
              entity_id: person.emily_thorn
              templates:
                - card_zone_icon_color
              tap_action:
                action: more-info
              hold_action:
                action: more-info

    - type: vertical-stack
      cards:
      - type: custom:button-card
        template: edge      
      - type: 'custom:button-card'
        template: card_title
        label: Hallways
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - yellow_heating
          name: Bottom Hallway
          entity: climate.nest_bottom_floor
          icon: mdi:home-floor-g
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: light.shelly1l_hallway_bottom_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: binary_sensor.nest_protect_bottom_floor_occupancy
              templates:
                - green_off
                - red_on
                - icon_motion_sensor
              tap_action:
                action: more-info  
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info 
            entity_4:
              entity_id: binary_sensor.nest_protect_bottom_floor_smoke_status
              templates:
                - purple_on
                - icon_fire_alert
              tap_action:
                action: more-info  
        - type: 'custom:button-card'
          template:
            - card_room
            - yellow_heating
          name: Middle Hallway
          entity: climate.nest_middle_floor
          icon: mdi:home-floor-1
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: light.middle_hallway_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: binary_sensor.nest_protect_middle_floor_occupancy
              templates:
                - green_off
                - red_on
                - icon_motion_sensor
              tap_action:
                action: more-info  
            entity_3:
              entity_id: binary_sensor.motion_uvc_g3_flex_middle_hallway
              templates:
                - green_off
                - red_on
              tap_action:
                action: more-info
                entity: camera.uvc_g3_flex_middle_hallway
                show_live_stream: true
              hold_action:
                action: more-info
            entity_4:
              entity_id: binary_sensor.nest_protect_middle_floor_smoke_status
              templates:
                - purple_on
                - icon_fire_alert
              tap_action:
                action: more-info  
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: Top Hallway
          entity: binary_sensor.zigbee_door_sensor_bed_b_contact
          icon: mdi:home-floor-2
          tap_action:
            action: more-info  
          hold_action:
            action: more-info
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info 
            entity_2:
              entity_id: binary_sensor.nest_protect_top_floor_occupancy
              templates:
                - green_off                
                - red_on
                - icon_motion_sensor
              tap_action:
                action: more-info  
            entity_3:
              entity_id: device_tracker.u6_lr
              templates:
                - blue_presence_home
                - icon_wifi_cog
              tap_action:
                action: more-info
              hold_action:
                action: more-info 
            entity_4:
              entity_id: binary_sensor.nest_protect_top_floor_smoke_status
              templates:
                - purple_on
                - icon_fire_alert
              tap_action:
                action: more-info  

        - type: 'custom:button-card'
          template:
            - card_room
            - green_off
            - red_on
          name: Loft
          entity: binary_sensor.zigbee_door_sensor_bed_b_contact
          icon: mdi:home-floor-l
          tap_action:
            action: more-info  
          hold_action:
            action: more-info 
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: device_tracker.download_pc_unifi
              templates:
                - blue_presence_home
                - icon_desktop_classic
              tap_action:
                action: more-info
              hold_action:
                action: toggle
                entity: switch.download_pc_unifi
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info 
            entity_4:
              entity_id: binary_sensor.udmpro_disk_0_health
              templates:
                - purple_on
                - icon_file_video
              tap_action:
                action: more-info  

    - type: vertical-stack
      cards:
      - type: custom:button-card
        template: edge      
      - type: 'custom:button-card'
        template: card_title
        label: Rooms
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - green_off
            - red_on
          name: Lounge
          entity: binary_sensor.zigbee_door_sensor_patio_2_contact
          icon: mdi:sofa
          tap_action:
            action: more-info  
          hold_action:
            action: more-info
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: light.lounge_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: binary_sensor.motion_uvc_g3_instant
              templates:
                - green_off
                - red_on
              tap_action:
                action: more-info
                entity: camera.lounge_g3_instant_high
                show_live_stream: true
              hold_action:
                action: more-info  
            entity_3:
              entity_id: binary_sensor.nvidia_shield_lounge_state
              templates:
                - green_on
              tap_action:
                action: more-info 
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info  
                
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: Kitchen
          entity: input_boolean.placeholder
          icon: mdi:countertop-outline
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: light.kitchen_main_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: light.kitchen_utility_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_3:
              entity_id: binary_sensor.fire_stick_tv_kitchen_state
              templates:
                - green_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: Study
          entity: input_boolean.placeholder
          icon: mdi:bookshelf
          tap_action:
            action: toggle
          hold_action:
            action: more-info         
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: light.study_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: device_tracker.apple_imac_2011_unifi
              templates:
                - blue_presence_home
                - icon_desktop_classic
              tap_action:
                action: more-info
              hold_action:
                action: toggle
                #entity: switch.apple_imac_2011_unifi
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info 
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: Bathroom
          entity: input_boolean.placeholder
          icon: mdi:bathtub-outline
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: light.bathroom_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info 
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info

    - type: vertical-stack
      cards:
      - type: custom:button-card
        template: edge      
      - type: 'custom:button-card'
        template: card_title
        label: Bedrooms
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: Bed A
          entity: input_boolean.placeholder
          icon: mdi:alpha-a-circle
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: light.bed_a_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_3:
              entity_id: binary_sensor.fire_stick_tv_bed_a_state
              templates:
                - green_on
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: En-suite
          entity: input_boolean.placeholder
          icon: mdi:shower-head
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: light.ensuite_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: Bed B
          entity: input_boolean.placeholder
          icon: mdi:alpha-b-circle
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: light.bed_b_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
            entity_2:
              entity_id: group.active_devices_tracker_emily
              templates:
                - blue_presence_home
                - icon_desktop_classic
              tap_action:
                action: more-info
              hold_action:
                action: toggle
                entity: group.blocked_devices_tracker_emily
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
        - type: 'custom:button-card'
          template:
            - card_room
            - green_off
            - red_on
          name: Bed C
          entity: binary_sensor.zigbee_door_sensor_bed_c_contact
          icon: mdi:alpha-c-circle
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: true
            label_use_brightness: false
            entity_1:
              entity_id: light.bed_c_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: switch.zigbee_plug_arcade_pc_bed_c
              templates:
                - yellow_on
                - icon_power_plug
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_3:
              entity_id: binary_sensor.harmony_hub_bed_c_state
              templates:
                - green_on
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            entity_4:
              entity_id: binary_sensor.diskstation_security_status
              templates:
                - purple_on
                - icon_nas
              tap_action:
                action: more-info
      - type: horizontal-stack
        cards:
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
          name: Bed D
          entity: input_boolean.placeholder
          icon: mdi:alpha-d-circle
          tap_action:
            action: more-info  
          hold_action:
            action: more-info            
          variables:
            label_use_temperature: false
            label_use_brightness: false
            entity_1:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              entity_id: group.active_devices_tracker_daniel
              templates:
                - blue_presence_home
                - icon_desktop_classic
              tap_action:
                action: more-info
              hold_action:
                action: toggle
                entity: group.blocked_devices_tracker_daniel
            entity_3:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: more-info  
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
        - type: 'custom:button-card'
          template:
            - card_room
            - blue_no_state
            # - card_room_get_service_data_entity_id
          name: Bed E
          entity: input_boolean.placeholder
          icon: mdi:alpha-e-circle
          tap_action:
            action: more-info
          hold_action:
            action: more-info
          # label: '[[[ return states[`switch.big_pc_unifi`].state ]]]'
          # label: '[[[ return `${variables.entity_2.tap_action.service_data.entity_id}` ]]]'
          # label: '[[[ return `${variables.service_data_entity}` ]]]'
          # label: >
          #   [[[
          #     if (variables?.entity_2?.tap_action?.service_data?.entity_id) {
          #       return variables.entity_2.tap_action.service_data.entity_id;
          #     } else {
          #       return "input_boolean.placeholder";
          #     }
          #   ]]]
          # label: >
          #   [[[
          #     return ['widget_icon_room'].concat(variables.entity_2.templates);
          #   ]]]
          

          variables:
            label_use_temperature: false
            label_use_brightness: false
            # trigger_entity: '[[[ return ${variables.entity_2.tap_action.service_data.entity_id} ]]]'
            # service_data_entity: >
              # [[[
              #   //if (variables?.entity_2.tap_action.service_data.entity_id) {
              #     return '${variables.entity_2.tap_action.service_data.entity_id}';
              #   //} else {
              #   //  return "input_boolean.placeholder";
              #   //}
              # ]]]
            entity_1:
              entity_id: light.bed_e_light_light_1
              templates:
                - yellow_on
              tap_action:
                action: toggle
              hold_action:
                action: more-info
            entity_2:
              # type: 'custom:button-card'
              entity_id: device_tracker.big_pc_unifi
              templates:
                # - blue_presence_home
                - icon_desktop_classic
                - yellow_other_entity_on
              # variables:
              #   trigger_entity: switch.big_pc_unifi
              #   # trigger_entity: '[[[ return variables.entity_2.tap_action.service_data.entity_id ]]]'
              #   trigger_entity: '[[[ return ${variables.entity_2.tap_action.service_data.entity_id} ]]]'
                # dgdefesx
              tap_action:
                action: call-service
                service: switch.toggle
                service_data: 
                  entity_id: switch.big_pc_unifi
              hold_action:
                action: more-info
              
            entity_3:
              entity_id: binary_sensor.nvidia_shield_bed_e_state
              templates:
                - green_on
              tap_action:
                action: more-info
              hold_action:
                action: more-info
            entity_4:
              entity_id: input_boolean.placeholder
              templates:
                - grey_no_state
              tap_action:
                action: toggle
              hold_action:
                action: more-info
